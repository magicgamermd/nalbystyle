(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $p={exports:{}},Vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function lD(){if(Kb)return Vc;Kb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Vc.Fragment=e,Vc.jsx=n,Vc.jsxs=n,Vc}var $b;function cD(){return $b||($b=1,$p.exports=lD()),$p.exports}var y=cD(),Xp={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function uD(){if(Xb)return Me;Xb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=T&&k[T]||k["@@iterator"],typeof k=="function"?k:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,C={};function G(k,ne,ue){this.props=k,this.context=ne,this.refs=C,this.updater=ue||N}G.prototype.isReactComponent={},G.prototype.setState=function(k,ne){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ne,"setState")},G.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Z(){}Z.prototype=G.prototype;function H(k,ne,ue){this.props=k,this.context=ne,this.refs=C,this.updater=ue||N}var X=H.prototype=new Z;X.constructor=H,V(X,G.prototype),X.isPureReactComponent=!0;var ce=Array.isArray;function he(){}var O={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(k,ne,ue){var re=ue.ref;return{$$typeof:t,type:k,key:ne,ref:re!==void 0?re:null,props:ue}}function M(k,ne){return R(k.type,ne,k.props)}function U(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function B(k){var ne={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return ne[ue]})}var D=/\/+/g;function Ye(k,ne){return typeof k=="object"&&k!==null&&k.key!=null?B(""+k.key):ne.toString(36)}function Je(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(he,he):(k.status="pending",k.then(function(ne){k.status==="pending"&&(k.status="fulfilled",k.value=ne)},function(ne){k.status==="pending"&&(k.status="rejected",k.reason=ne)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ee(k,ne,ue,re,fe){var Ee=typeof k;(Ee==="undefined"||Ee==="boolean")&&(k=null);var Ie=!1;if(k===null)Ie=!0;else switch(Ee){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(k.$$typeof){case t:case e:Ie=!0;break;case _:return Ie=k._init,ee(Ie(k._payload),ne,ue,re,fe)}}if(Ie)return fe=fe(k),Ie=re===""?"."+Ye(k,0):re,ce(fe)?(ue="",Ie!=null&&(ue=Ie.replace(D,"$&/")+"/"),ee(fe,ne,ue,"",function(gn){return gn})):fe!=null&&(U(fe)&&(fe=M(fe,ue+(fe.key==null||k&&k.key===fe.key?"":(""+fe.key).replace(D,"$&/")+"/")+Ie)),ne.push(fe)),1;Ie=0;var ft=re===""?".":re+":";if(ce(k))for(var $e=0;$e<k.length;$e++)re=k[$e],Ee=ft+Ye(re,$e),Ie+=ee(re,ne,ue,Ee,fe);else if($e=S(k),typeof $e=="function")for(k=$e.call(k),$e=0;!(re=k.next()).done;)re=re.value,Ee=ft+Ye(re,$e++),Ie+=ee(re,ne,ue,Ee,fe);else if(Ee==="object"){if(typeof k.then=="function")return ee(Je(k),ne,ue,re,fe);throw ne=String(k),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function L(k,ne,ue){if(k==null)return k;var re=[],fe=0;return ee(k,re,"","",function(Ee){return ne.call(ue,Ee,fe++)}),re}function te(k){if(k._status===-1){var ne=k._result;ne=ne(),ne.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=ne)}if(k._status===1)return k._result.default;throw k._result}var ye=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Te={map:L,forEach:function(k,ne,ue){L(k,function(){ne.apply(this,arguments)},ue)},count:function(k){var ne=0;return L(k,function(){ne++}),ne},toArray:function(k){return L(k,function(ne){return ne})||[]},only:function(k){if(!U(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Me.Activity=E,Me.Children=Te,Me.Component=G,Me.Fragment=n,Me.Profiler=a,Me.PureComponent=H,Me.StrictMode=s,Me.Suspense=m,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Me.__COMPILER_RUNTIME={__proto__:null,c:function(k){return O.H.useMemoCache(k)}},Me.cache=function(k){return function(){return k.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(k,ne,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var re=V({},k.props),fe=k.key;if(ne!=null)for(Ee in ne.key!==void 0&&(fe=""+ne.key),ne)!I.call(ne,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ne.ref===void 0||(re[Ee]=ne[Ee]);var Ee=arguments.length-2;if(Ee===1)re.children=ue;else if(1<Ee){for(var Ie=Array(Ee),ft=0;ft<Ee;ft++)Ie[ft]=arguments[ft+2];re.children=Ie}return R(k.type,fe,re)},Me.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Me.createElement=function(k,ne,ue){var re,fe={},Ee=null;if(ne!=null)for(re in ne.key!==void 0&&(Ee=""+ne.key),ne)I.call(ne,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=ne[re]);var Ie=arguments.length-2;if(Ie===1)fe.children=ue;else if(1<Ie){for(var ft=Array(Ie),$e=0;$e<Ie;$e++)ft[$e]=arguments[$e+2];fe.children=ft}if(k&&k.defaultProps)for(re in Ie=k.defaultProps,Ie)fe[re]===void 0&&(fe[re]=Ie[re]);return R(k,Ee,fe)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(k){return{$$typeof:d,render:k}},Me.isValidElement=U,Me.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:te}},Me.memo=function(k,ne){return{$$typeof:g,type:k,compare:ne===void 0?null:ne}},Me.startTransition=function(k){var ne=O.T,ue={};O.T=ue;try{var re=k(),fe=O.S;fe!==null&&fe(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(he,ye)}catch(Ee){ye(Ee)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),O.T=ne}},Me.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Me.use=function(k){return O.H.use(k)},Me.useActionState=function(k,ne,ue){return O.H.useActionState(k,ne,ue)},Me.useCallback=function(k,ne){return O.H.useCallback(k,ne)},Me.useContext=function(k){return O.H.useContext(k)},Me.useDebugValue=function(){},Me.useDeferredValue=function(k,ne){return O.H.useDeferredValue(k,ne)},Me.useEffect=function(k,ne){return O.H.useEffect(k,ne)},Me.useEffectEvent=function(k){return O.H.useEffectEvent(k)},Me.useId=function(){return O.H.useId()},Me.useImperativeHandle=function(k,ne,ue){return O.H.useImperativeHandle(k,ne,ue)},Me.useInsertionEffect=function(k,ne){return O.H.useInsertionEffect(k,ne)},Me.useLayoutEffect=function(k,ne){return O.H.useLayoutEffect(k,ne)},Me.useMemo=function(k,ne){return O.H.useMemo(k,ne)},Me.useOptimistic=function(k,ne){return O.H.useOptimistic(k,ne)},Me.useReducer=function(k,ne,ue){return O.H.useReducer(k,ne,ue)},Me.useRef=function(k){return O.H.useRef(k)},Me.useState=function(k){return O.H.useState(k)},Me.useSyncExternalStore=function(k,ne,ue){return O.H.useSyncExternalStore(k,ne,ue)},Me.useTransition=function(){return O.H.useTransition()},Me.version="19.2.3",Me}var Qb;function Vy(){return Qb||(Qb=1,Xp.exports=uD()),Xp.exports}var Q=Vy();const hD=Mw(Q);var Qp={exports:{}},Lc={},Wp={exports:{}},Jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function dD(){return Wb||(Wb=1,(function(t){function e(ee,L){var te=ee.length;ee.push(L);e:for(;0<te;){var ye=te-1>>>1,Te=ee[ye];if(0<a(Te,L))ee[ye]=L,ee[te]=Te,te=ye;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var L=ee[0],te=ee.pop();if(te!==L){ee[0]=te;e:for(var ye=0,Te=ee.length,k=Te>>>1;ye<k;){var ne=2*(ye+1)-1,ue=ee[ne],re=ne+1,fe=ee[re];if(0>a(ue,te))re<Te&&0>a(fe,ue)?(ee[ye]=fe,ee[re]=te,ye=re):(ee[ye]=ue,ee[ne]=te,ye=ne);else if(re<Te&&0>a(fe,te))ee[ye]=fe,ee[re]=te,ye=re;else break e}}return L}function a(ee,L){var te=ee.sortIndex-L.sortIndex;return te!==0?te:ee.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,E=null,T=3,S=!1,N=!1,V=!1,C=!1,G=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function X(ee){for(var L=n(g);L!==null;){if(L.callback===null)s(g);else if(L.startTime<=ee)s(g),L.sortIndex=L.expirationTime,e(m,L);else break;L=n(g)}}function ce(ee){if(V=!1,X(ee),!N)if(n(m)!==null)N=!0,he||(he=!0,B());else{var L=n(g);L!==null&&Je(ce,L.startTime-ee)}}var he=!1,O=-1,I=5,R=-1;function M(){return C?!0:!(t.unstable_now()-R<I)}function U(){if(C=!1,he){var ee=t.unstable_now();R=ee;var L=!0;try{e:{N=!1,V&&(V=!1,Z(O),O=-1),S=!0;var te=T;try{t:{for(X(ee),E=n(m);E!==null&&!(E.expirationTime>ee&&M());){var ye=E.callback;if(typeof ye=="function"){E.callback=null,T=E.priorityLevel;var Te=ye(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof Te=="function"){E.callback=Te,X(ee),L=!0;break t}E===n(m)&&s(m),X(ee)}else s(m);E=n(m)}if(E!==null)L=!0;else{var k=n(g);k!==null&&Je(ce,k.startTime-ee),L=!1}}break e}finally{E=null,T=te,S=!1}L=void 0}}finally{L?B():he=!1}}}var B;if(typeof H=="function")B=function(){H(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ye=D.port2;D.port1.onmessage=U,B=function(){Ye.postMessage(null)}}else B=function(){G(U,0)};function Je(ee,L){O=G(function(){ee(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var L=3;break;default:L=T}var te=T;T=L;try{return ee()}finally{T=te}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(ee,L){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var te=T;T=ee;try{return L()}finally{T=te}},t.unstable_scheduleCallback=function(ee,L,te){var ye=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,ee){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=te+Te,ee={id:_++,callback:L,priorityLevel:ee,startTime:te,expirationTime:Te,sortIndex:-1},te>ye?(ee.sortIndex=te,e(g,ee),n(m)===null&&ee===n(g)&&(V?(Z(O),O=-1):V=!0,Je(ce,te-ye))):(ee.sortIndex=Te,e(m,ee),N||S||(N=!0,he||(he=!0,B()))),ee},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ee){var L=T;return function(){var te=T;T=L;try{return ee.apply(this,arguments)}finally{T=te}}}})(Jp)),Jp}var Jb;function fD(){return Jb||(Jb=1,Wp.exports=dD()),Wp.exports}var Zp={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function mD(){if(Zb)return En;Zb=1;var t=Vy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,En.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},En.flushSync=function(m){var g=c.T,_=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=g,s.p=_,s.d.f()}},En.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},En.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},En.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:S}):_==="script"&&s.d.X(m,{crossOrigin:E,integrity:T,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},En.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},En.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);s.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},En.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},En.requestFormReset=function(m){s.d.r(m)},En.unstable_batchedUpdates=function(m,g){return m(g)},En.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.2.3",En}var eT;function pD(){if(eT)return Zp.exports;eT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zp.exports=mD(),Zp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function gD(){if(tT)return Lc;tT=1;var t=fD(),e=Vy(),n=pD();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),i;if(p===u)return m(f),r;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=p;else{for(var b=!1,x=f.child;x;){if(x===o){b=!0,o=f,u=p;break}if(x===u){b=!0,u=f,o=p;break}x=x.sibling}if(!b){for(x=p.child;x;){if(x===o){b=!0,o=p,u=f;break}if(x===u){b=!0,u=p,o=f;break}x=x.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function _(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=_(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ye(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case G:return"Profiler";case C:return"StrictMode";case ce:return"Suspense";case he:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case H:return i.displayName||"Context";case Z:return(i._context.displayName||"Context")+".Consumer";case X:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:Ye(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return Ye(i(r))}catch{}}return null}var Je=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ye=[],Te=-1;function k(i){return{current:i}}function ne(i){0>Te||(i.current=ye[Te],ye[Te]=null,Te--)}function ue(i,r){Te++,ye[Te]=i.current,i.current=r}var re=k(null),fe=k(null),Ee=k(null),Ie=k(null);function ft(i,r){switch(ue(Ee,r),ue(fe,i),ue(re,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?gb(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=gb(r),i=yb(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(re),ue(re,i)}function $e(){ne(re),ne(fe),ne(Ee)}function gn(i){i.memoizedState!==null&&ue(Ie,i);var r=re.current,o=yb(r,i.type);r!==o&&(ue(fe,i),ue(re,o))}function In(i){fe.current===i&&(ne(re),ne(fe)),Ie.current===i&&(ne(Ie),Oc._currentValue=te)}var an,$t;function yn(i){if(an===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);an=r&&r[1]||"",$t=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+an+i+$t}var Bn=!1;function Rn(i,r){if(!i||Bn)return"";Bn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var $=W}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(W){$=W}i.call(oe.prototype)}}else{try{throw Error()}catch(W){$=W}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],x=p[1];if(b&&x){var P=b.split(`
`),K=x.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===K.length)for(u=P.length-1,f=K.length-1;1<=u&&0<=f&&P[u]!==K[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==K[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==K[f]){var ie=`
`+P[u].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=u&&0<=f);break}}}finally{Bn=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?yn(o):""}function Lt(i,r){switch(i.tag){case 26:case 27:case 5:return yn(i.type);case 16:return yn("Lazy");case 13:return i.child!==r&&r!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return Rn(i.type,!1);case 11:return Rn(i.type.render,!1);case 1:return Rn(i.type,!0);case 31:return yn("Activity");default:return""}}function Gi(i){try{var r="",o=null;do r+=Lt(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ys=Object.prototype.hasOwnProperty,qi=t.unstable_scheduleCallback,_s=t.unstable_cancelCallback,vo=t.unstable_shouldYield,Eo=t.unstable_requestPaint,Jt=t.unstable_now,_a=t.unstable_getCurrentPriorityLevel,St=t.unstable_ImmediatePriority,ct=t.unstable_UserBlockingPriority,di=t.unstable_NormalPriority,bo=t.unstable_LowPriority,vs=t.unstable_IdlePriority,nr=t.log,fi=t.unstable_setDisableYieldValue,Ae=null,ht=null;function kt(i){if(typeof nr=="function"&&fi(i),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Ae,i)}catch{}}var Zt=Math.clz32?Math.clz32:ir,Bl=Math.log,va=Math.LN2;function ir(i){return i>>>=0,i===0?32:31-(Bl(i)/va|0)|0}var Es=256,mi=262144,Yi=4194304;function Wn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fn(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var x=u&134217727;return x!==0?(u=x&~p,u!==0?f=Wn(u):(b&=x,b!==0?f=Wn(b):o||(o=x&~i,o!==0&&(f=Wn(o))))):(x=u&~p,x!==0?f=Wn(x):b!==0?f=Wn(b):o||(o=u&~i,o!==0&&(f=Wn(o)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:f}function Ki(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function sr(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ea(){var i=Yi;return Yi<<=1,(Yi&62914560)===0&&(Yi=4194304),i}function Ci(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function Nn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ut(i,r,o,u,f,p){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var x=i.entanglements,P=i.expirationTimes,K=i.hiddenUpdates;for(o=b&~o;0<o;){var ie=31-Zt(o),oe=1<<ie;x[ie]=0,P[ie]=-1;var $=K[ie];if($!==null)for(K[ie]=null,ie=0;ie<$.length;ie++){var W=$[ie];W!==null&&(W.lane&=-536870913)}o&=~oe}u!==0&&ba(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(b&~r))}function ba(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Zt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function $i(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-Zt(o),f=1<<u;f&r|i[u]&r&&(i[u]|=r),o&=~f}}function Oi(i,r){var o=r&-r;return o=(o&42)!==0?1:Ta(o),(o&(i.suspendedLanes|r))!==0?0:o}function Ta(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function F(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function me(){var i=L.p;return i!==0?i:(i=window.event,i===void 0?32:Bb(i.type))}function rt(i,r){var o=L.p;try{return L.p=i,r()}finally{L.p=o}}var Oe=Math.random().toString(36).slice(2),De="__reactFiber$"+Oe,nt="__reactProps$"+Oe,_n="__reactContainer$"+Oe,Xi="__reactEvents$"+Oe,Jn="__reactListeners$"+Oe,To="__reactHandles$"+Oe,Fl="__reactResources$"+Oe,bs="__reactMarker$"+Oe;function Aa(i){delete i[De],delete i[nt],delete i[Xi],delete i[Jn],delete i[To]}function Ts(i){var r=i[De];if(r)return r;for(var o=i.parentNode;o;){if(r=o[_n]||o[De]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=Sb(i);i!==null;){if(o=i[De])return o;i=Sb(i)}return r}i=o,o=i.parentNode}return null}function As(i){if(i=i[De]||i[_n]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Sa(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Di(i){var r=i[Fl];return r||(r=i[Fl]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(i){i[bs]=!0}var Ao=new Set,rr={};function Cn(i,r){Qi(i,r),Qi(i+"Capture",r)}function Qi(i,r){for(rr[i]=r,i=0;i<r.length;i++)Ao.add(r[i])}var Xf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zl={},Hl={};function Gu(i){return ys.call(Hl,i)?!0:ys.call(zl,i)?!1:Xf.test(i)?Hl[i]=!0:(zl[i]=!0,!1)}function ar(i,r,o){if(Gu(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function or(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function pi(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function On(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qf(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function So(i){if(!i._valueTracker){var r=qu(i)?"checked":"value";i._valueTracker=Qf(i,r,""+i[r])}}function Gl(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=qu(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function xo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ss=/[\n"\\]/g;function xt(i){return i.replace(Ss,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function lr(i,r,o,u,f,p,b,x){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+On(r)):i.value!==""+On(r)&&(i.value=""+On(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?wo(i,b,On(r)):o!=null?wo(i,b,On(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+On(x):i.removeAttribute("name")}function xa(i,r,o,u,f,p,b,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){So(i);return}o=o!=null?""+On(o):"",r=r!=null?""+On(r):o,x||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=x?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),So(i)}function wo(i,r,o){r==="number"&&xo(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Xe(i,r,o,u){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+On(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function wa(i,r,o){if(r!=null&&(r=""+On(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+On(o):""}function cr(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(Je(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=On(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),So(i)}function gi(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Wf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ql(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||Wf.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function Yu(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&ql(i,f,u)}else for(var p in r)r.hasOwnProperty(p)&&ql(i,p,r[p])}function Yl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wi(i){return Zf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function en(){}var Io=null;function Ro(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xs=null,Zn=null;function Ku(i){var r=As(i);if(r&&(i=r.stateNode)){var o=i[nt]||null;e:switch(i=r.stateNode,r.type){case"input":if(lr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var f=u[nt]||null;if(!f)throw Error(s(90));lr(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&Gl(u)}break e;case"textarea":wa(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Xe(i,!!o.multiple,r,!1)}}}var Kl=!1;function $u(i,r,o){if(Kl)return i(r,o);Kl=!0;try{var u=i(r);return u}finally{if(Kl=!1,(xs!==null||Zn!==null)&&(Gh(),xs&&(r=xs,i=Zn,Zn=xs=null,Ku(r),i)))for(r=0;r<i.length;r++)Ku(i[r])}}function zn(i,r){var o=i.stateNode;if(o===null)return null;var u=o[nt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=!1;if(Mi)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){$l=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{$l=!1}var ei=null,No=null,Zi=null;function ur(){if(Zi)return Zi;var i,r=No,o=r.length,u,f="value"in ei?ei.value:ei.textContent,p=f.length;for(i=0;i<o&&r[i]===f[i];i++);var b=o-i;for(u=1;u<=b&&r[o-u]===f[p-u];u++);return Zi=f.slice(i,1<u?1-u:void 0)}function Ia(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function hr(){return!0}function mt(){return!1}function vn(i){function r(o,u,f,p,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(o=i[x],this[x]=o?o(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?hr:mt,this.isPropagationStopped=mt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),r}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=vn(ws),dr=E({},ws,{view:0,detail:0}),Xu=vn(dr),fr,Co,Dn,Na=E({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Dn&&(Dn&&i.type==="mousemove"?(fr=i.screenX-Dn.screenX,Co=i.screenY-Dn.screenY):Co=fr=0,Dn=i),fr)},movementY:function(i){return"movementY"in i?i.movementY:Co}}),Qu=vn(Na),Ca=E({},Na,{dataTransfer:0}),Wu=vn(Ca),Xl=E({},dr,{relatedTarget:0}),mr=vn(Xl),Ju=E({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Oo=vn(Ju),em=E({},ws,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Zu=vn(em),Oa=E({},ws,{data:0}),Ql=vn(Oa),eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function th(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Jl[i])?!!r[i]:!1}function pr(){return th}var nh=E({},dr,{key:function(i){if(i.key){var r=eh[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ia(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(i){return i.type==="keypress"?Ia(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ia(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ih=vn(nh),Is=E({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zl=vn(Is),sh=E({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),rh=vn(sh),ah=E({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Do=vn(ah),Mn=E({},Na,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),oh=vn(Mn),lh=E({},ws,{newState:0,oldState:0}),gr=vn(lh),h=[9,13,27,32],v=Mi&&"CompositionEvent"in window,A=null;Mi&&"documentMode"in document&&(A=document.documentMode);var w=Mi&&"TextEvent"in window&&!A,q=Mi&&(!v||A&&8<A&&11>=A),J=" ",de=!1;function et(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ke=!1;function tn(i,r){switch(i){case"compositionend":return jt(r);case"keypress":return r.which!==32?null:(de=!0,J);case"textInput":return i=r.data,i===J&&de?null:i;default:return null}}function nn(i,r){if(ke)return i==="compositionend"||!v&&et(i,r)?(i=ur(),Zi=No=ei=null,ke=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return q&&r.locale!=="ko"?null:r.data;default:return null}}var yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!yr[i.type]:r==="textarea"}function Da(i,r,o,u){xs?Zn?Zn.push(u):Zn=[u]:xs=u,r=Wh(r,"onChange"),0<r.length&&(o=new Ra("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var Rs=null,ec=null;function V1(i){ub(i,0)}function ch(i){var r=Sa(i);if(Gl(r))return i}function Nv(i,r){if(i==="change")return r}var Cv=!1;if(Mi){var tm;if(Mi){var nm="oninput"in document;if(!nm){var Ov=document.createElement("div");Ov.setAttribute("oninput","return;"),nm=typeof Ov.oninput=="function"}tm=nm}else tm=!1;Cv=tm&&(!document.documentMode||9<document.documentMode)}function Dv(){Rs&&(Rs.detachEvent("onpropertychange",Mv),ec=Rs=null)}function Mv(i){if(i.propertyName==="value"&&ch(ec)){var r=[];Da(r,ec,i,Ro(i)),$u(V1,r)}}function L1(i,r,o){i==="focusin"?(Dv(),Rs=r,ec=o,Rs.attachEvent("onpropertychange",Mv)):i==="focusout"&&Dv()}function k1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ch(ec)}function U1(i,r){if(i==="click")return ch(r)}function j1(i,r){if(i==="input"||i==="change")return ch(r)}function B1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ti=typeof Object.is=="function"?Object.is:B1;function tc(i,r){if(ti(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ys.call(r,f)||!ti(i[f],r[f]))return!1}return!0}function Pv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Vv(i,r){var o=Pv(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Pv(o)}}function Lv(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Lv(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function kv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=xo(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=xo(i.document)}return r}function im(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var F1=Mi&&"documentMode"in document&&11>=document.documentMode,Mo=null,sm=null,nc=null,rm=!1;function Uv(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rm||Mo==null||Mo!==xo(u)||(u=Mo,"selectionStart"in u&&im(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nc&&tc(nc,u)||(nc=u,u=Wh(sm,"onSelect"),0<u.length&&(r=new Ra("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=Mo)))}function Ma(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Po={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},am={},jv={};Mi&&(jv=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Pa(i){if(am[i])return am[i];if(!Po[i])return i;var r=Po[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in jv)return am[i]=r[o];return i}var Bv=Pa("animationend"),Fv=Pa("animationiteration"),zv=Pa("animationstart"),z1=Pa("transitionrun"),H1=Pa("transitionstart"),G1=Pa("transitioncancel"),Hv=Pa("transitionend"),Gv=new Map,om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");om.push("scrollEnd");function Pi(i,r){Gv.set(i,r),Cn(r,[i])}var uh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},yi=[],Vo=0,lm=0;function hh(){for(var i=Vo,r=lm=Vo=0;r<i;){var o=yi[r];yi[r++]=null;var u=yi[r];yi[r++]=null;var f=yi[r];yi[r++]=null;var p=yi[r];if(yi[r++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}p!==0&&qv(o,f,p)}}function dh(i,r,o,u){yi[Vo++]=i,yi[Vo++]=r,yi[Vo++]=o,yi[Vo++]=u,lm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function cm(i,r,o,u){return dh(i,r,o,u),fh(i)}function Va(i,r){return dh(i,null,null,r),fh(i)}function qv(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-Zt(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=o|536870912),p):null}function fh(i){if(50<Sc)throw Sc=0,_p=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Lo={};function q1(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(i,r,o,u){return new q1(i,r,o,u)}function um(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ns(i,r){var o=i.alternate;return o===null?(o=ni(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Yv(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function mh(i,r,o,u,f,p){var b=0;if(u=i,typeof i=="function")um(i)&&(b=1);else if(typeof i=="string")b=QO(i,o,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=ni(31,o,r,f),i.elementType=R,i.lanes=p,i;case V:return La(o.children,f,p,r);case C:b=8,f|=24;break;case G:return i=ni(12,o,r,f|2),i.elementType=G,i.lanes=p,i;case ce:return i=ni(13,o,r,f),i.elementType=ce,i.lanes=p,i;case he:return i=ni(19,o,r,f),i.elementType=he,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:b=10;break e;case Z:b=9;break e;case X:b=11;break e;case O:b=14;break e;case I:b=16,u=null;break e}b=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=ni(b,o,r,f),r.elementType=i,r.type=u,r.lanes=p,r}function La(i,r,o,u){return i=ni(7,i,u,r),i.lanes=o,i}function hm(i,r,o){return i=ni(6,i,null,r),i.lanes=o,i}function Kv(i){var r=ni(18,null,null,0);return r.stateNode=i,r}function dm(i,r,o){return r=ni(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var $v=new WeakMap;function _i(i,r){if(typeof i=="object"&&i!==null){var o=$v.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Gi(r)},$v.set(i,r),r)}return{value:i,source:r,stack:Gi(r)}}var ko=[],Uo=0,ph=null,ic=0,vi=[],Ei=0,_r=null,es=1,ts="";function Cs(i,r){ko[Uo++]=ic,ko[Uo++]=ph,ph=i,ic=r}function Xv(i,r,o){vi[Ei++]=es,vi[Ei++]=ts,vi[Ei++]=_r,_r=i;var u=es;i=ts;var f=32-Zt(u)-1;u&=~(1<<f),o+=1;var p=32-Zt(r)+f;if(30<p){var b=f-f%5;p=(u&(1<<b)-1).toString(32),u>>=b,f-=b,es=1<<32-Zt(r)+f|o<<f|u,ts=p+i}else es=1<<p|o<<f|u,ts=i}function fm(i){i.return!==null&&(Cs(i,1),Xv(i,1,0))}function mm(i){for(;i===ph;)ph=ko[--Uo],ko[Uo]=null,ic=ko[--Uo],ko[Uo]=null;for(;i===_r;)_r=vi[--Ei],vi[Ei]=null,ts=vi[--Ei],vi[Ei]=null,es=vi[--Ei],vi[Ei]=null}function Qv(i,r){vi[Ei++]=es,vi[Ei++]=ts,vi[Ei++]=_r,es=r.id,ts=r.overflow,_r=i}var on=null,pt=null,qe=!1,vr=null,bi=!1,pm=Error(s(519));function Er(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sc(_i(r,i)),pm}function Wv(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[De]=i,r[nt]=u,o){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(o=0;o<wc.length;o++)Be(wc[o],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),xa(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),cr(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||mb(r.textContent,o)?(u.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),u.onScroll!=null&&Be("scroll",r),u.onScrollEnd!=null&&Be("scrollend",r),u.onClick!=null&&(r.onclick=en),r=!0):r=!1,r||Er(i,!0)}function Jv(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:on=on.return}}function jo(i){if(i!==on)return!1;if(!qe)return Jv(i),qe=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Mp(i.type,i.memoizedProps)),o=!o),o&&pt&&Er(i),Jv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=Ab(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=Ab(i)}else r===27?(r=pt,Pr(i.type)?(i=Up,Up=null,pt=i):pt=r):pt=on?Ai(i.stateNode.nextSibling):null;return!0}function ka(){pt=on=null,qe=!1}function gm(){var i=vr;return i!==null&&(Kn===null?Kn=i:Kn.push.apply(Kn,i),vr=null),i}function sc(i){vr===null?vr=[i]:vr.push(i)}var ym=k(null),Ua=null,Os=null;function br(i,r,o){ue(ym,r._currentValue),r._currentValue=o}function Ds(i){i._currentValue=ym.current,ne(ym)}function _m(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function vm(i,r,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=f;for(var P=0;P<r.length;P++)if(x.context===r[P]){p.lanes|=o,x=p.alternate,x!==null&&(x.lanes|=o),_m(p.return,o,i),u||(b=null);break e}p=x.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),_m(b,o,i),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===i){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Bo(i,r,o,u){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var x=f.type;ti(f.pendingProps.value,b.value)||(i!==null?i.push(x):i=[x])}}else if(f===Ie.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Oc):i=[Oc])}f=f.return}i!==null&&vm(r,i,o,u),r.flags|=262144}function gh(i){for(i=i.firstContext;i!==null;){if(!ti(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ja(i){Ua=i,Os=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ln(i){return Zv(Ua,i)}function yh(i,r){return Ua===null&&ja(i),Zv(i,r)}function Zv(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Os===null){if(i===null)throw Error(s(308));Os=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Os=Os.next=r;return o}var Y1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},K1=t.unstable_scheduleCallback,$1=t.unstable_NormalPriority,Bt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Em(){return{controller:new Y1,data:new Map,refCount:0}}function rc(i){i.refCount--,i.refCount===0&&K1($1,function(){i.controller.abort()})}var ac=null,bm=0,Fo=0,zo=null;function X1(i,r){if(ac===null){var o=ac=[];bm=0,Fo=Sp(),zo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return bm++,r.then(e0,e0),r}function e0(){if(--bm===0&&ac!==null){zo!==null&&(zo.status="fulfilled");var i=ac;ac=null,Fo=0,zo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Q1(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var t0=ee.S;ee.S=function(i,r){UE=Jt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&X1(i,r),t0!==null&&t0(i,r)};var Ba=k(null);function Tm(){var i=Ba.current;return i!==null?i:ut.pooledCache}function _h(i,r){r===null?ue(Ba,Ba.current):ue(Ba,r.pool)}function n0(){var i=Tm();return i===null?null:{parent:Bt._currentValue,pool:i}}var Ho=Error(s(460)),Am=Error(s(474)),vh=Error(s(542)),Eh={then:function(){}};function i0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function s0(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(en,en),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,a0(i),i;default:if(typeof r.status=="string")r.then(en,en);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,a0(i),i}throw za=r,Ho}}function Fa(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(za=o,Ho):o}}var za=null;function r0(){if(za===null)throw Error(s(459));var i=za;return za=null,i}function a0(i){if(i===Ho||i===vh)throw Error(s(483))}var Go=null,oc=0;function bh(i){var r=oc;return oc+=1,Go===null&&(Go=[]),s0(Go,i,r)}function lc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Th(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function o0(i){function r(z,j){if(i){var Y=z.deletions;Y===null?(z.deletions=[j],z.flags|=16):Y.push(j)}}function o(z,j){if(!i)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function u(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function f(z,j){return z=Ns(z,j),z.index=0,z.sibling=null,z}function p(z,j,Y){return z.index=Y,i?(Y=z.alternate,Y!==null?(Y=Y.index,Y<j?(z.flags|=67108866,j):Y):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function b(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function x(z,j,Y,se){return j===null||j.tag!==6?(j=hm(Y,z.mode,se),j.return=z,j):(j=f(j,Y),j.return=z,j)}function P(z,j,Y,se){var Se=Y.type;return Se===V?ie(z,j,Y.props.children,se,Y.key):j!==null&&(j.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&Fa(Se)===j.type)?(j=f(j,Y.props),lc(j,Y),j.return=z,j):(j=mh(Y.type,Y.key,Y.props,null,z.mode,se),lc(j,Y),j.return=z,j)}function K(z,j,Y,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=dm(Y,z.mode,se),j.return=z,j):(j=f(j,Y.children||[]),j.return=z,j)}function ie(z,j,Y,se,Se){return j===null||j.tag!==7?(j=La(Y,z.mode,se,Se),j.return=z,j):(j=f(j,Y),j.return=z,j)}function oe(z,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=hm(""+j,z.mode,Y),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return Y=mh(j.type,j.key,j.props,null,z.mode,Y),lc(Y,j),Y.return=z,Y;case N:return j=dm(j,z.mode,Y),j.return=z,j;case I:return j=Fa(j),oe(z,j,Y)}if(Je(j)||B(j))return j=La(j,z.mode,Y,null),j.return=z,j;if(typeof j.then=="function")return oe(z,bh(j),Y);if(j.$$typeof===H)return oe(z,yh(z,j),Y);Th(z,j)}return null}function $(z,j,Y,se){var Se=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Se!==null?null:x(z,j,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===Se?P(z,j,Y,se):null;case N:return Y.key===Se?K(z,j,Y,se):null;case I:return Y=Fa(Y),$(z,j,Y,se)}if(Je(Y)||B(Y))return Se!==null?null:ie(z,j,Y,se,null);if(typeof Y.then=="function")return $(z,j,bh(Y),se);if(Y.$$typeof===H)return $(z,j,yh(z,Y),se);Th(z,Y)}return null}function W(z,j,Y,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(Y)||null,x(j,z,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return z=z.get(se.key===null?Y:se.key)||null,P(j,z,se,Se);case N:return z=z.get(se.key===null?Y:se.key)||null,K(j,z,se,Se);case I:return se=Fa(se),W(z,j,Y,se,Se)}if(Je(se)||B(se))return z=z.get(Y)||null,ie(j,z,se,Se,null);if(typeof se.then=="function")return W(z,j,Y,bh(se),Se);if(se.$$typeof===H)return W(z,j,Y,yh(j,se),Se);Th(j,se)}return null}function _e(z,j,Y,se){for(var Se=null,Qe=null,be=j,Le=j=0,ze=null;be!==null&&Le<Y.length;Le++){be.index>Le?(ze=be,be=null):ze=be.sibling;var We=$(z,be,Y[Le],se);if(We===null){be===null&&(be=ze);break}i&&be&&We.alternate===null&&r(z,be),j=p(We,j,Le),Qe===null?Se=We:Qe.sibling=We,Qe=We,be=ze}if(Le===Y.length)return o(z,be),qe&&Cs(z,Le),Se;if(be===null){for(;Le<Y.length;Le++)be=oe(z,Y[Le],se),be!==null&&(j=p(be,j,Le),Qe===null?Se=be:Qe.sibling=be,Qe=be);return qe&&Cs(z,Le),Se}for(be=u(be);Le<Y.length;Le++)ze=W(be,z,Le,Y[Le],se),ze!==null&&(i&&ze.alternate!==null&&be.delete(ze.key===null?Le:ze.key),j=p(ze,j,Le),Qe===null?Se=ze:Qe.sibling=ze,Qe=ze);return i&&be.forEach(function(jr){return r(z,jr)}),qe&&Cs(z,Le),Se}function we(z,j,Y,se){if(Y==null)throw Error(s(151));for(var Se=null,Qe=null,be=j,Le=j=0,ze=null,We=Y.next();be!==null&&!We.done;Le++,We=Y.next()){be.index>Le?(ze=be,be=null):ze=be.sibling;var jr=$(z,be,We.value,se);if(jr===null){be===null&&(be=ze);break}i&&be&&jr.alternate===null&&r(z,be),j=p(jr,j,Le),Qe===null?Se=jr:Qe.sibling=jr,Qe=jr,be=ze}if(We.done)return o(z,be),qe&&Cs(z,Le),Se;if(be===null){for(;!We.done;Le++,We=Y.next())We=oe(z,We.value,se),We!==null&&(j=p(We,j,Le),Qe===null?Se=We:Qe.sibling=We,Qe=We);return qe&&Cs(z,Le),Se}for(be=u(be);!We.done;Le++,We=Y.next())We=W(be,z,Le,We.value,se),We!==null&&(i&&We.alternate!==null&&be.delete(We.key===null?Le:We.key),j=p(We,j,Le),Qe===null?Se=We:Qe.sibling=We,Qe=We);return i&&be.forEach(function(oD){return r(z,oD)}),qe&&Cs(z,Le),Se}function lt(z,j,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===V&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var Se=Y.key;j!==null;){if(j.key===Se){if(Se=Y.type,Se===V){if(j.tag===7){o(z,j.sibling),se=f(j,Y.props.children),se.return=z,z=se;break e}}else if(j.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&Fa(Se)===j.type){o(z,j.sibling),se=f(j,Y.props),lc(se,Y),se.return=z,z=se;break e}o(z,j);break}else r(z,j);j=j.sibling}Y.type===V?(se=La(Y.props.children,z.mode,se,Y.key),se.return=z,z=se):(se=mh(Y.type,Y.key,Y.props,null,z.mode,se),lc(se,Y),se.return=z,z=se)}return b(z);case N:e:{for(Se=Y.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){o(z,j.sibling),se=f(j,Y.children||[]),se.return=z,z=se;break e}else{o(z,j);break}else r(z,j);j=j.sibling}se=dm(Y,z.mode,se),se.return=z,z=se}return b(z);case I:return Y=Fa(Y),lt(z,j,Y,se)}if(Je(Y))return _e(z,j,Y,se);if(B(Y)){if(Se=B(Y),typeof Se!="function")throw Error(s(150));return Y=Se.call(Y),we(z,j,Y,se)}if(typeof Y.then=="function")return lt(z,j,bh(Y),se);if(Y.$$typeof===H)return lt(z,j,yh(z,Y),se);Th(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(o(z,j.sibling),se=f(j,Y),se.return=z,z=se):(o(z,j),se=hm(Y,z.mode,se),se.return=z,z=se),b(z)):o(z,j)}return function(z,j,Y,se){try{oc=0;var Se=lt(z,j,Y,se);return Go=null,Se}catch(be){if(be===Ho||be===vh)throw be;var Qe=ni(29,be,null,z.mode);return Qe.lanes=se,Qe.return=z,Qe}finally{}}}var Ha=o0(!0),l0=o0(!1),Tr=!1;function Sm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ar(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Sr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=fh(i),qv(i,null,o),r}return dh(i,u,r,o),fh(i)}function cc(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,$i(i,o)}}function wm(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var Im=!1;function uc(){if(Im){var i=zo;if(i!==null)throw i}}function hc(i,r,o,u){Im=!1;var f=i.updateQueue;Tr=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var P=x,K=P.next;P.next=null,b===null?p=K:b.next=K,b=P;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,x=ie.lastBaseUpdate,x!==b&&(x===null?ie.firstBaseUpdate=K:x.next=K,ie.lastBaseUpdate=P))}if(p!==null){var oe=f.baseState;b=0,ie=K=P=null,x=p;do{var $=x.lane&-536870913,W=$!==x.lane;if(W?(Fe&$)===$:(u&$)===$){$!==0&&$===Fo&&(Im=!0),ie!==null&&(ie=ie.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var _e=i,we=x;$=r;var lt=o;switch(we.tag){case 1:if(_e=we.payload,typeof _e=="function"){oe=_e.call(lt,oe,$);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,$=typeof _e=="function"?_e.call(lt,oe,$):_e,$==null)break e;oe=E({},oe,$);break e;case 2:Tr=!0}}$=x.callback,$!==null&&(i.flags|=64,W&&(i.flags|=8192),W=f.callbacks,W===null?f.callbacks=[$]:W.push($))}else W={lane:$,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ie===null?(K=ie=W,P=oe):ie=ie.next=W,b|=$;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;W=x,x=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);ie===null&&(P=oe),f.baseState=P,f.firstBaseUpdate=K,f.lastBaseUpdate=ie,p===null&&(f.shared.lanes=0),Nr|=b,i.lanes=b,i.memoizedState=oe}}function c0(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function u0(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)c0(o[i],r)}var qo=k(null),Ah=k(0);function h0(i,r){i=Fs,ue(Ah,i),ue(qo,r),Fs=i|r.baseLanes}function Rm(){ue(Ah,Fs),ue(qo,qo.current)}function Nm(){Fs=Ah.current,ne(qo),ne(Ah)}var ii=k(null),Ti=null;function xr(i){var r=i.alternate;ue(Dt,Dt.current&1),ue(ii,i),Ti===null&&(r===null||qo.current!==null||r.memoizedState!==null)&&(Ti=i)}function Cm(i){ue(Dt,Dt.current),ue(ii,i),Ti===null&&(Ti=i)}function d0(i){i.tag===22?(ue(Dt,Dt.current),ue(ii,i),Ti===null&&(Ti=i)):wr()}function wr(){ue(Dt,Dt.current),ue(ii,ii.current)}function si(i){ne(ii),Ti===i&&(Ti=null),ne(Dt)}var Dt=k(0);function Sh(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Lp(o)||kp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ms=0,Ve=null,at=null,Ft=null,xh=!1,Yo=!1,Ga=!1,wh=0,dc=0,Ko=null,W1=0;function wt(){throw Error(s(321))}function Om(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!ti(i[o],r[o]))return!1;return!0}function Dm(i,r,o,u,f,p){return Ms=p,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=i===null||i.memoizedState===null?X0:Km,Ga=!1,p=o(u,f),Ga=!1,Yo&&(p=m0(r,o,u,f)),f0(i),p}function f0(i){ee.H=pc;var r=at!==null&&at.next!==null;if(Ms=0,Ft=at=Ve=null,xh=!1,dc=0,Ko=null,r)throw Error(s(300));i===null||zt||(i=i.dependencies,i!==null&&gh(i)&&(zt=!0))}function m0(i,r,o,u){Ve=i;var f=0;do{if(Yo&&(Ko=null),dc=0,Yo=!1,25<=f)throw Error(s(301));if(f+=1,Ft=at=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ee.H=Q0,p=r(o,u)}while(Yo);return p}function J1(){var i=ee.H,r=i.useState()[0];return r=typeof r.then=="function"?fc(r):r,i=i.useState()[0],(at!==null?at.memoizedState:null)!==i&&(Ve.flags|=1024),r}function Mm(){var i=wh!==0;return wh=0,i}function Pm(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Vm(i){if(xh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xh=!1}Ms=0,Ft=at=Ve=null,Yo=!1,dc=wh=0,Ko=null}function Pn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Ve.memoizedState=Ft=i:Ft=Ft.next=i,Ft}function Mt(){if(at===null){var i=Ve.alternate;i=i!==null?i.memoizedState:null}else i=at.next;var r=Ft===null?Ve.memoizedState:Ft.next;if(r!==null)Ft=r,at=i;else{if(i===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));at=i,i={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ft===null?Ve.memoizedState=Ft=i:Ft=Ft.next=i}return Ft}function Ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(i){var r=dc;return dc+=1,Ko===null&&(Ko=[]),i=s0(Ko,i,r),r=Ve,(Ft===null?r.memoizedState:Ft.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?X0:Km),i}function Rh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return fc(i);if(i.$$typeof===H)return ln(i)}throw Error(s(438,String(i)))}function Lm(i){var r=null,o=Ve.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Ih(),Ve.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=M;return r.index++,o}function Ps(i,r){return typeof r=="function"?r(i):r}function Nh(i){var r=Mt();return km(r,at,i)}function km(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}r.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var x=b=null,P=null,K=r,ie=!1;do{var oe=K.lane&-536870913;if(oe!==K.lane?(Fe&oe)===oe:(Ms&oe)===oe){var $=K.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),oe===Fo&&(ie=!0);else if((Ms&$)===$){K=K.next,$===Fo&&(ie=!0);continue}else oe={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(x=P=oe,b=p):P=P.next=oe,Ve.lanes|=$,Nr|=$;oe=K.action,Ga&&o(p,oe),p=K.hasEagerState?K.eagerState:o(p,oe)}else $={lane:oe,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(x=P=$,b=p):P=P.next=$,Ve.lanes|=oe,Nr|=oe;K=K.next}while(K!==null&&K!==r);if(P===null?b=p:P.next=x,!ti(p,i.memoizedState)&&(zt=!0,ie&&(o=zo,o!==null)))throw o;i.memoizedState=p,i.baseState=b,i.baseQueue=P,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Um(i){var r=Mt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do p=i(p,b.action),b=b.next;while(b!==f);ti(p,r.memoizedState)||(zt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function p0(i,r,o){var u=Ve,f=Mt(),p=qe;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=r();var b=!ti((at||f).memoizedState,o);if(b&&(f.memoizedState=o,zt=!0),f=f.queue,Fm(_0.bind(null,u,f,i),[i]),f.getSnapshot!==r||b||Ft!==null&&Ft.memoizedState.tag&1){if(u.flags|=2048,$o(9,{destroy:void 0},y0.bind(null,u,f,o,r),null),ut===null)throw Error(s(349));p||(Ms&127)!==0||g0(u,r,o)}return o}function g0(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Ve.updateQueue,r===null?(r=Ih(),Ve.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function y0(i,r,o,u){r.value=o,r.getSnapshot=u,v0(r)&&E0(i)}function _0(i,r,o){return o(function(){v0(r)&&E0(i)})}function v0(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!ti(i,o)}catch{return!0}}function E0(i){var r=Va(i,2);r!==null&&$n(r,i,2)}function jm(i){var r=Pn();if(typeof i=="function"){var o=i;if(i=o(),Ga){kt(!0);try{o()}finally{kt(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:i},r}function b0(i,r,o,u){return i.baseState=o,km(i,at,typeof u=="function"?u:Ps)}function Z1(i,r,o,u,f){if(Dh(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};ee.T!==null?o(!0):p.isTransition=!1,u(p),o=r.pending,o===null?(p.next=r.pending=p,T0(r,p)):(p.next=o.next,r.pending=o.next=p)}}function T0(i,r){var o=r.action,u=r.payload,f=i.state;if(r.isTransition){var p=ee.T,b={};ee.T=b;try{var x=o(f,u),P=ee.S;P!==null&&P(b,x),A0(i,r,x)}catch(K){Bm(i,r,K)}finally{p!==null&&b.types!==null&&(p.types=b.types),ee.T=p}}else try{p=o(f,u),A0(i,r,p)}catch(K){Bm(i,r,K)}}function A0(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){S0(i,r,u)},function(u){return Bm(i,r,u)}):S0(i,r,o)}function S0(i,r,o){r.status="fulfilled",r.value=o,x0(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,T0(i,o)))}function Bm(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,x0(r),r=r.next;while(r!==u)}i.action=null}function x0(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function w0(i,r){return r}function I0(i,r){if(qe){var o=ut.formState;if(o!==null){e:{var u=Ve;if(qe){if(pt){t:{for(var f=pt,p=bi;f.nodeType!==8;){if(!p){f=null;break t}if(f=Ai(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=Ai(f.nextSibling),u=f.data==="F!";break e}}Er(u)}u=!1}u&&(r=o[0])}}return o=Pn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w0,lastRenderedState:r},o.queue=u,o=Y0.bind(null,Ve,u),u.dispatch=o,u=jm(!1),p=Ym.bind(null,Ve,!1,u.queue),u=Pn(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,o=Z1.bind(null,Ve,f,p,o),f.dispatch=o,u.memoizedState=i,[r,o,!1]}function R0(i){var r=Mt();return N0(r,at,i)}function N0(i,r,o){if(r=km(i,r,w0)[0],i=Nh(Ps)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=fc(r)}catch(b){throw b===Ho?vh:b}else u=r;r=Mt();var f=r.queue,p=f.dispatch;return o!==r.memoizedState&&(Ve.flags|=2048,$o(9,{destroy:void 0},eO.bind(null,f,o),null)),[u,p,i]}function eO(i,r){i.action=r}function C0(i){var r=Mt(),o=at;if(o!==null)return N0(r,o,i);Mt(),r=r.memoizedState,o=Mt();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function $o(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=Ih(),Ve.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function O0(){return Mt().memoizedState}function Ch(i,r,o,u){var f=Pn();Ve.flags|=i,f.memoizedState=$o(1|r,{destroy:void 0},o,u===void 0?null:u)}function Oh(i,r,o,u){var f=Mt();u=u===void 0?null:u;var p=f.memoizedState.inst;at!==null&&u!==null&&Om(u,at.memoizedState.deps)?f.memoizedState=$o(r,p,o,u):(Ve.flags|=i,f.memoizedState=$o(1|r,p,o,u))}function D0(i,r){Ch(8390656,8,i,r)}function Fm(i,r){Oh(2048,8,i,r)}function tO(i){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=Ih(),Ve.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function M0(i){var r=Mt().memoizedState;return tO({ref:r,nextImpl:i}),function(){if((Ze&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function P0(i,r){return Oh(4,2,i,r)}function V0(i,r){return Oh(4,4,i,r)}function L0(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function k0(i,r,o){o=o!=null?o.concat([i]):null,Oh(4,4,L0.bind(null,r,i),o)}function zm(){}function U0(i,r){var o=Mt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Om(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function j0(i,r){var o=Mt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Om(r,u[1]))return u[0];if(u=i(),Ga){kt(!0);try{i()}finally{kt(!1)}}return o.memoizedState=[u,r],u}function Hm(i,r,o){return o===void 0||(Ms&1073741824)!==0&&(Fe&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=BE(),Ve.lanes|=i,Nr|=i,o)}function B0(i,r,o,u){return ti(o,r)?o:qo.current!==null?(i=Hm(i,o,u),ti(i,r)||(zt=!0),i):(Ms&42)===0||(Ms&1073741824)!==0&&(Fe&261930)===0?(zt=!0,i.memoizedState=o):(i=BE(),Ve.lanes|=i,Nr|=i,r)}function F0(i,r,o,u,f){var p=L.p;L.p=p!==0&&8>p?p:8;var b=ee.T,x={};ee.T=x,Ym(i,!1,r,o);try{var P=f(),K=ee.S;if(K!==null&&K(x,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ie=Q1(P,u);mc(i,r,ie,oi(i))}else mc(i,r,u,oi(i))}catch(oe){mc(i,r,{then:function(){},status:"rejected",reason:oe},oi())}finally{L.p=p,b!==null&&x.types!==null&&(b.types=x.types),ee.T=b}}function nO(){}function Gm(i,r,o,u){if(i.tag!==5)throw Error(s(476));var f=z0(i).queue;F0(i,f,r,te,o===null?nO:function(){return H0(i),o(u)})}function z0(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:te},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function H0(i){var r=z0(i);r.next===null&&(r=i.alternate.memoizedState),mc(i,r.next.queue,{},oi())}function qm(){return ln(Oc)}function G0(){return Mt().memoizedState}function q0(){return Mt().memoizedState}function iO(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=oi();i=Ar(o);var u=Sr(r,i,o);u!==null&&($n(u,r,o),cc(u,r,o)),r={cache:Em()},i.payload=r;return}r=r.return}}function sO(i,r,o){var u=oi();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Dh(i)?K0(r,o):(o=cm(i,r,o,u),o!==null&&($n(o,i,u),$0(o,r,u)))}function Y0(i,r,o){var u=oi();mc(i,r,o,u)}function mc(i,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Dh(i))K0(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var b=r.lastRenderedState,x=p(b,o);if(f.hasEagerState=!0,f.eagerState=x,ti(x,b))return dh(i,r,f,0),ut===null&&hh(),!1}catch{}finally{}if(o=cm(i,r,f,u),o!==null)return $n(o,i,u),$0(o,r,u),!0}return!1}function Ym(i,r,o,u){if(u={lane:2,revertLane:Sp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dh(i)){if(r)throw Error(s(479))}else r=cm(i,o,u,2),r!==null&&$n(r,i,2)}function Dh(i){var r=i.alternate;return i===Ve||r!==null&&r===Ve}function K0(i,r){Yo=xh=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function $0(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,$i(i,o)}}var pc={readContext:ln,use:Rh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};pc.useEffectEvent=wt;var X0={readContext:ln,use:Rh,useCallback:function(i,r){return Pn().memoizedState=[i,r===void 0?null:r],i},useContext:ln,useEffect:D0,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,Ch(4194308,4,L0.bind(null,r,i),o)},useLayoutEffect:function(i,r){return Ch(4194308,4,i,r)},useInsertionEffect:function(i,r){Ch(4,2,i,r)},useMemo:function(i,r){var o=Pn();r=r===void 0?null:r;var u=i();if(Ga){kt(!0);try{i()}finally{kt(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=Pn();if(o!==void 0){var f=o(r);if(Ga){kt(!0);try{o(r)}finally{kt(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=sO.bind(null,Ve,i),[u.memoizedState,i]},useRef:function(i){var r=Pn();return i={current:i},r.memoizedState=i},useState:function(i){i=jm(i);var r=i.queue,o=Y0.bind(null,Ve,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:zm,useDeferredValue:function(i,r){var o=Pn();return Hm(o,i,r)},useTransition:function(){var i=jm(!1);return i=F0.bind(null,Ve,i.queue,!0,!1),Pn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=Ve,f=Pn();if(qe){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),ut===null)throw Error(s(349));(Fe&127)!==0||g0(u,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,D0(_0.bind(null,u,p,i),[i]),u.flags|=2048,$o(9,{destroy:void 0},y0.bind(null,u,p,o,r),null),o},useId:function(){var i=Pn(),r=ut.identifierPrefix;if(qe){var o=ts,u=es;o=(u&~(1<<32-Zt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=wh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=W1++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:qm,useFormState:I0,useActionState:I0,useOptimistic:function(i){var r=Pn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Ym.bind(null,Ve,!0,o),o.dispatch=r,[i,r]},useMemoCache:Lm,useCacheRefresh:function(){return Pn().memoizedState=iO.bind(null,Ve)},useEffectEvent:function(i){var r=Pn(),o={impl:i};return r.memoizedState=o,function(){if((Ze&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Km={readContext:ln,use:Rh,useCallback:U0,useContext:ln,useEffect:Fm,useImperativeHandle:k0,useInsertionEffect:P0,useLayoutEffect:V0,useMemo:j0,useReducer:Nh,useRef:O0,useState:function(){return Nh(Ps)},useDebugValue:zm,useDeferredValue:function(i,r){var o=Mt();return B0(o,at.memoizedState,i,r)},useTransition:function(){var i=Nh(Ps)[0],r=Mt().memoizedState;return[typeof i=="boolean"?i:fc(i),r]},useSyncExternalStore:p0,useId:G0,useHostTransitionStatus:qm,useFormState:R0,useActionState:R0,useOptimistic:function(i,r){var o=Mt();return b0(o,at,i,r)},useMemoCache:Lm,useCacheRefresh:q0};Km.useEffectEvent=M0;var Q0={readContext:ln,use:Rh,useCallback:U0,useContext:ln,useEffect:Fm,useImperativeHandle:k0,useInsertionEffect:P0,useLayoutEffect:V0,useMemo:j0,useReducer:Um,useRef:O0,useState:function(){return Um(Ps)},useDebugValue:zm,useDeferredValue:function(i,r){var o=Mt();return at===null?Hm(o,i,r):B0(o,at.memoizedState,i,r)},useTransition:function(){var i=Um(Ps)[0],r=Mt().memoizedState;return[typeof i=="boolean"?i:fc(i),r]},useSyncExternalStore:p0,useId:G0,useHostTransitionStatus:qm,useFormState:C0,useActionState:C0,useOptimistic:function(i,r){var o=Mt();return at!==null?b0(o,at,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:q0};Q0.useEffectEvent=M0;function $m(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:E({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Xm={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=oi(),f=Ar(u);f.payload=r,o!=null&&(f.callback=o),r=Sr(i,f,u),r!==null&&($n(r,i,u),cc(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=oi(),f=Ar(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Sr(i,f,u),r!==null&&($n(r,i,u),cc(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=oi(),u=Ar(o);u.tag=2,r!=null&&(u.callback=r),r=Sr(i,u,o),r!==null&&($n(r,i,o),cc(r,i,o))}};function W0(i,r,o,u,f,p,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,b):r.prototype&&r.prototype.isPureReactComponent?!tc(o,u)||!tc(f,p):!0}function J0(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Xm.enqueueReplaceState(r,r.state,null)}function qa(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=E({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function Z0(i){uh(i)}function eE(i){console.error(i)}function tE(i){uh(i)}function Mh(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function nE(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qm(i,r,o){return o=Ar(o),o.tag=3,o.payload={element:null},o.callback=function(){Mh(i,r)},o}function iE(i){return i=Ar(i),i.tag=3,i}function sE(i,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){nE(r,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){nE(r,o,u),typeof f!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function rO(i,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Bo(r,o,f,!0),o=ii.current,o!==null){switch(o.tag){case 31:case 13:return Ti===null?qh():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Eh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),bp(i,u,f)),!1;case 22:return o.flags|=65536,u===Eh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),bp(i,u,f)),!1}throw Error(s(435,o.tag))}return bp(i,u,f),qh(),!1}if(qe)return r=ii.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==pm&&(i=Error(s(422),{cause:u}),sc(_i(i,o)))):(u!==pm&&(r=Error(s(423),{cause:u}),sc(_i(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=_i(u,o),f=Qm(i.stateNode,u,f),wm(i,f),It!==4&&(It=2)),!1;var p=Error(s(520),{cause:u});if(p=_i(p,o),Ac===null?Ac=[p]:Ac.push(p),It!==4&&(It=2),r===null)return!0;u=_i(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Qm(o.stateNode,u,i),wm(o,i),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cr===null||!Cr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=iE(f),sE(f,i,o,u),wm(o,f),!1}o=o.return}while(o!==null);return!1}var Wm=Error(s(461)),zt=!1;function cn(i,r,o,u){r.child=i===null?l0(r,null,o,u):Ha(r,i.child,o,u)}function rE(i,r,o,u,f){o=o.render;var p=r.ref;if("ref"in u){var b={};for(var x in u)x!=="ref"&&(b[x]=u[x])}else b=u;return ja(r),u=Dm(i,r,o,b,p,f),x=Mm(),i!==null&&!zt?(Pm(i,r,f),Vs(i,r,f)):(qe&&x&&fm(r),r.flags|=1,cn(i,r,u,f),r.child)}function aE(i,r,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!um(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,oE(i,r,p,u,f)):(i=mh(o.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!rp(i,f)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:tc,o(b,u)&&i.ref===r.ref)return Vs(i,r,f)}return r.flags|=1,i=Ns(p,u),i.ref=r.ref,i.return=r,r.child=i}function oE(i,r,o,u,f){if(i!==null){var p=i.memoizedProps;if(tc(p,u)&&i.ref===r.ref)if(zt=!1,r.pendingProps=u=p,rp(i,f))(i.flags&131072)!==0&&(zt=!0);else return r.lanes=i.lanes,Vs(i,r,f)}return Jm(i,r,o,u,f)}function lE(i,r,o,u){var f=u.children,p=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=r.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,r.child=null;return cE(i,r,p,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&_h(r,p!==null?p.cachePool:null),p!==null?h0(r,p):Rm(),d0(r);else return u=r.lanes=536870912,cE(i,r,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(_h(r,p.cachePool),h0(r,p),wr(),r.memoizedState=null):(i!==null&&_h(r,null),Rm(),wr());return cn(i,r,f,o),r.child}function gc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function cE(i,r,o,u,f){var p=Tm();return p=p===null?null:{parent:Bt._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},i!==null&&_h(r,null),Rm(),d0(r),i!==null&&Bo(i,r,u,!0),r.childLanes=f,null}function Ph(i,r){return r=Lh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function uE(i,r,o){return Ha(r,i.child,null,o),i=Ph(r,r.pendingProps),i.flags|=2,si(r),r.memoizedState=null,i}function aO(i,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(qe){if(u.mode==="hidden")return i=Ph(r,u),r.lanes=536870912,gc(null,i);if(Cm(r),(i=pt)?(i=Tb(i,bi),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:_r!==null?{id:es,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},o=Kv(i),o.return=r,r.child=o,on=r,pt=null)):i=null,i===null)throw Er(r);return r.lanes=536870912,null}return Ph(r,u)}var p=i.memoizedState;if(p!==null){var b=p.dehydrated;if(Cm(r),f)if(r.flags&256)r.flags&=-257,r=uE(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(zt||Bo(i,r,o,!1),f=(o&i.childLanes)!==0,zt||f){if(u=ut,u!==null&&(b=Oi(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Va(i,b),$n(u,i,b),Wm;qh(),r=uE(i,r,o)}else i=p.treeContext,pt=Ai(b.nextSibling),on=r,qe=!0,vr=null,bi=!1,i!==null&&Qv(r,i),r=Ph(r,u),r.flags|=4096;return r}return i=Ns(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Vh(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Jm(i,r,o,u,f){return ja(r),o=Dm(i,r,o,u,void 0,f),u=Mm(),i!==null&&!zt?(Pm(i,r,f),Vs(i,r,f)):(qe&&u&&fm(r),r.flags|=1,cn(i,r,o,f),r.child)}function hE(i,r,o,u,f,p){return ja(r),r.updateQueue=null,o=m0(r,u,o,f),f0(i),u=Mm(),i!==null&&!zt?(Pm(i,r,p),Vs(i,r,p)):(qe&&u&&fm(r),r.flags|=1,cn(i,r,o,p),r.child)}function dE(i,r,o,u,f){if(ja(r),r.stateNode===null){var p=Lo,b=o.contextType;typeof b=="object"&&b!==null&&(p=ln(b)),p=new o(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Xm,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},Sm(r),b=o.contextType,p.context=typeof b=="object"&&b!==null?ln(b):Lo,p.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&($m(r,o,b,u),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Xm.enqueueReplaceState(p,p.state,null),hc(r,u,p,f),uc(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){p=r.stateNode;var x=r.memoizedProps,P=qa(o,x);p.props=P;var K=p.context,ie=o.contextType;b=Lo,typeof ie=="object"&&ie!==null&&(b=ln(ie));var oe=o.getDerivedStateFromProps;ie=typeof oe=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||K!==b)&&J0(r,p,u,b),Tr=!1;var $=r.memoizedState;p.state=$,hc(r,u,p,f),uc(),K=r.memoizedState,x||$!==K||Tr?(typeof oe=="function"&&($m(r,o,oe,u),K=r.memoizedState),(P=Tr||W0(r,o,P,u,$,K,b))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=K),p.props=u,p.state=K,p.context=b,u=P):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,xm(i,r),b=r.memoizedProps,ie=qa(o,b),p.props=ie,oe=r.pendingProps,$=p.context,K=o.contextType,P=Lo,typeof K=="object"&&K!==null&&(P=ln(K)),x=o.getDerivedStateFromProps,(K=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==oe||$!==P)&&J0(r,p,u,P),Tr=!1,$=r.memoizedState,p.state=$,hc(r,u,p,f),uc();var W=r.memoizedState;b!==oe||$!==W||Tr||i!==null&&i.dependencies!==null&&gh(i.dependencies)?(typeof x=="function"&&($m(r,o,x,u),W=r.memoizedState),(ie=Tr||W0(r,o,ie,u,$,W,P)||i!==null&&i.dependencies!==null&&gh(i.dependencies))?(K||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,P)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),p.props=u,p.state=W,p.context=P,u=ie):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),u=!1)}return p=u,Vh(i,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&u?(r.child=Ha(r,i.child,null,f),r.child=Ha(r,null,o,f)):cn(i,r,o,f),r.memoizedState=p.state,i=r.child):i=Vs(i,r,f),i}function fE(i,r,o,u){return ka(),r.flags|=256,cn(i,r,o,u),r.child}var Zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ep(i){return{baseLanes:i,cachePool:n0()}}function tp(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=ai),i}function mE(i,r,o){var u=r.pendingProps,f=!1,p=(r.flags&128)!==0,b;if((b=p)||(b=i!==null&&i.memoizedState===null?!1:(Dt.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(qe){if(f?xr(r):wr(),(i=pt)?(i=Tb(i,bi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:_r!==null?{id:es,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},o=Kv(i),o.return=r,r.child=o,on=r,pt=null)):i=null,i===null)throw Er(r);return kp(i)?r.lanes=32:r.lanes=536870912,null}var x=u.children;return u=u.fallback,f?(wr(),f=r.mode,x=Lh({mode:"hidden",children:x},f),u=La(u,f,o,null),x.return=r,u.return=r,x.sibling=u,r.child=x,u=r.child,u.memoizedState=ep(o),u.childLanes=tp(i,b,o),r.memoizedState=Zm,gc(null,u)):(xr(r),np(r,x))}var P=i.memoizedState;if(P!==null&&(x=P.dehydrated,x!==null)){if(p)r.flags&256?(xr(r),r.flags&=-257,r=ip(i,r,o)):r.memoizedState!==null?(wr(),r.child=i.child,r.flags|=128,r=null):(wr(),x=u.fallback,f=r.mode,u=Lh({mode:"visible",children:u.children},f),x=La(x,f,o,null),x.flags|=2,u.return=r,x.return=r,u.sibling=x,r.child=u,Ha(r,i.child,null,o),u=r.child,u.memoizedState=ep(o),u.childLanes=tp(i,b,o),r.memoizedState=Zm,r=gc(null,u));else if(xr(r),kp(x)){if(b=x.nextSibling&&x.nextSibling.dataset,b)var K=b.dgst;b=K,u=Error(s(419)),u.stack="",u.digest=b,sc({value:u,source:null,stack:null}),r=ip(i,r,o)}else if(zt||Bo(i,r,o,!1),b=(o&i.childLanes)!==0,zt||b){if(b=ut,b!==null&&(u=Oi(b,o),u!==0&&u!==P.retryLane))throw P.retryLane=u,Va(i,u),$n(b,i,u),Wm;Lp(x)||qh(),r=ip(i,r,o)}else Lp(x)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,pt=Ai(x.nextSibling),on=r,qe=!0,vr=null,bi=!1,i!==null&&Qv(r,i),r=np(r,u.children),r.flags|=4096);return r}return f?(wr(),x=u.fallback,f=r.mode,P=i.child,K=P.sibling,u=Ns(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,K!==null?x=Ns(K,x):(x=La(x,f,o,null),x.flags|=2),x.return=r,u.return=r,u.sibling=x,r.child=u,gc(null,u),u=r.child,x=i.child.memoizedState,x===null?x=ep(o):(f=x.cachePool,f!==null?(P=Bt._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=n0(),x={baseLanes:x.baseLanes|o,cachePool:f}),u.memoizedState=x,u.childLanes=tp(i,b,o),r.memoizedState=Zm,gc(i.child,u)):(xr(r),o=i.child,i=o.sibling,o=Ns(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=o,r.memoizedState=null,o)}function np(i,r){return r=Lh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Lh(i,r){return i=ni(22,i,null,r),i.lanes=0,i}function ip(i,r,o){return Ha(r,i.child,null,o),i=np(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function pE(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),_m(i.return,r,o)}function sp(i,r,o,u,f,p){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=f,b.treeForkCount=p)}function gE(i,r,o){var u=r.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var b=Dt.current,x=(b&2)!==0;if(x?(b=b&1|2,r.flags|=128):b&=1,ue(Dt,b),cn(i,r,u,o),u=qe?ic:0,!x&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pE(i,o,r);else if(i.tag===19)pE(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&Sh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),sp(r,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&Sh(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}sp(r,!0,o,null,p,u);break;case"together":sp(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Vs(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),Nr|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Bo(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=Ns(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=Ns(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function rp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&gh(i)))}function oO(i,r,o){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),br(r,Bt,i.memoizedState.cache),ka();break;case 27:case 5:gn(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:br(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Cm(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(xr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?mE(i,r,o):(xr(r),i=Vs(i,r,o),i!==null?i.sibling:null);xr(r);break;case 19:var f=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Bo(i,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return gE(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Dt,Dt.current),u)break;return null;case 22:return r.lanes=0,lE(i,r,o,r.pendingProps);case 24:br(r,Bt,i.memoizedState.cache)}return Vs(i,r,o)}function yE(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)zt=!0;else{if(!rp(i,o)&&(r.flags&128)===0)return zt=!1,oO(i,r,o);zt=(i.flags&131072)!==0}else zt=!1,qe&&(r.flags&1048576)!==0&&Xv(r,ic,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Fa(r.elementType),r.type=i,typeof i=="function")um(i)?(u=qa(i,u),r.tag=1,r=dE(null,r,i,u,o)):(r.tag=0,r=Jm(null,r,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===X){r.tag=11,r=rE(null,r,i,u,o);break e}else if(f===O){r.tag=14,r=aE(null,r,i,u,o);break e}}throw r=Ye(i)||i,Error(s(306,r,""))}}return r;case 0:return Jm(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=qa(u,r.pendingProps),dE(i,r,u,f,o);case 3:e:{if(ft(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var p=r.memoizedState;f=p.element,xm(i,r),hc(r,u,null,o);var b=r.memoizedState;if(u=b.cache,br(r,Bt,u),u!==p.cache&&vm(r,[Bt],o,!0),uc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=fE(i,r,u,o);break e}else if(u!==f){f=_i(Error(s(424)),r),sc(f),r=fE(i,r,u,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pt=Ai(i.firstChild),on=r,qe=!0,vr=null,bi=!0,o=l0(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ka(),u===f){r=Vs(i,r,o);break e}cn(i,r,u,o)}r=r.child}return r;case 26:return Vh(i,r),i===null?(o=Rb(r.type,null,r.pendingProps,null))?r.memoizedState=o:qe||(o=r.type,i=r.pendingProps,u=Jh(Ee.current).createElement(o),u[De]=r,u[nt]=i,un(u,o,i),Ot(u),r.stateNode=u):r.memoizedState=Rb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return gn(r),i===null&&qe&&(u=r.stateNode=xb(r.type,r.pendingProps,Ee.current),on=r,bi=!0,f=pt,Pr(r.type)?(Up=f,pt=Ai(u.firstChild)):pt=f),cn(i,r,r.pendingProps.children,o),Vh(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&qe&&((f=u=pt)&&(u=kO(u,r.type,r.pendingProps,bi),u!==null?(r.stateNode=u,on=r,pt=Ai(u.firstChild),bi=!1,f=!0):f=!1),f||Er(r)),gn(r),f=r.type,p=r.pendingProps,b=i!==null?i.memoizedProps:null,u=p.children,Mp(f,p)?u=null:b!==null&&Mp(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Dm(i,r,J1,null,null,o),Oc._currentValue=f),Vh(i,r),cn(i,r,u,o),r.child;case 6:return i===null&&qe&&((i=o=pt)&&(o=UO(o,r.pendingProps,bi),o!==null?(r.stateNode=o,on=r,pt=null,i=!0):i=!1),i||Er(r)),null;case 13:return mE(i,r,o);case 4:return ft(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Ha(r,null,u,o):cn(i,r,u,o),r.child;case 11:return rE(i,r,r.type,r.pendingProps,o);case 7:return cn(i,r,r.pendingProps,o),r.child;case 8:return cn(i,r,r.pendingProps.children,o),r.child;case 12:return cn(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,br(r,r.type,u.value),cn(i,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,ja(r),f=ln(f),u=u(f),r.flags|=1,cn(i,r,u,o),r.child;case 14:return aE(i,r,r.type,r.pendingProps,o);case 15:return oE(i,r,r.type,r.pendingProps,o);case 19:return gE(i,r,o);case 31:return aO(i,r,o);case 22:return lE(i,r,o,r.pendingProps);case 24:return ja(r),u=ln(Bt),i===null?(f=Tm(),f===null&&(f=ut,p=Em(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),r.memoizedState={parent:u,cache:f},Sm(r),br(r,Bt,f)):((i.lanes&o)!==0&&(xm(i,r),hc(r,null,null,o),uc()),f=i.memoizedState,p=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),br(r,Bt,u)):(u=p.cache,br(r,Bt,u),u!==f.cache&&vm(r,[Bt],o,!0))),cn(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ls(i){i.flags|=4}function ap(i,r,o,u,f){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(GE())i.flags|=8192;else throw za=Eh,Am}else i.flags&=-16777217}function _E(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Mb(r))if(GE())i.flags|=8192;else throw za=Eh,Am}function kh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ea():536870912,i.lanes|=r,Jo|=r)}function yc(i,r){if(!qe)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function gt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function lO(i,r,o){var u=r.pendingProps;switch(mm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Ds(Bt),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(jo(r)?Ls(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gm())),gt(r),null;case 26:var f=r.type,p=r.memoizedState;return i===null?(Ls(r),p!==null?(gt(r),_E(r,p)):(gt(r),ap(r,f,null,u,o))):p?p!==i.memoizedState?(Ls(r),gt(r),_E(r,p)):(gt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ls(r),gt(r),ap(r,f,i,u,o)),null;case 27:if(In(r),o=Ee.current,f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ls(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return gt(r),null}i=re.current,jo(r)?Wv(r):(i=xb(f,u,o),r.stateNode=i,Ls(r))}return gt(r),null;case 5:if(In(r),f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ls(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return gt(r),null}if(p=re.current,jo(r))Wv(r);else{var b=Jh(Ee.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(f,{is:u.is}):b.createElement(f)}}p[De]=r,p[nt]=u;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=p;e:switch(un(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ls(r)}}return gt(r),ap(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ls(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Ee.current,jo(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[De]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||mb(i.nodeValue,o)),i||Er(r,!0)}else i=Jh(i).createTextNode(u),i[De]=r,r.stateNode=i}return gt(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=jo(r),o!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[De]=r}else ka(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),i=!1}else o=gm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(si(r),r):(si(r),null);if((r.flags&128)!==0)throw Error(s(558))}return gt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=jo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[De]=r}else ka(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),f=!1}else f=gm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(si(r),r):(si(r),null)}return si(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),kh(r,r.updateQueue),gt(r),null);case 4:return $e(),i===null&&Rp(r.stateNode.containerInfo),gt(r),null;case 10:return Ds(r.type),gt(r),null;case 19:if(ne(Dt),u=r.memoizedState,u===null)return gt(r),null;if(f=(r.flags&128)!==0,p=u.rendering,p===null)if(f)yc(u,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=Sh(i),p!==null){for(r.flags|=128,yc(u,!1),i=p.updateQueue,r.updateQueue=i,kh(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)Yv(o,i),o=o.sibling;return ue(Dt,Dt.current&1|2),qe&&Cs(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Jt()>zh&&(r.flags|=128,f=!0,yc(u,!1),r.lanes=4194304)}else{if(!f)if(i=Sh(p),i!==null){if(r.flags|=128,f=!0,i=i.updateQueue,r.updateQueue=i,kh(r,i),yc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!qe)return gt(r),null}else 2*Jt()-u.renderingStartTime>zh&&o!==536870912&&(r.flags|=128,f=!0,yc(u,!1),r.lanes=4194304);u.isBackwards?(p.sibling=r.child,r.child=p):(i=u.last,i!==null?i.sibling=p:r.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Jt(),i.sibling=null,o=Dt.current,ue(Dt,f?o&1|2:o&1),qe&&Cs(r,u.treeForkCount),i):(gt(r),null);case 22:case 23:return si(r),Nm(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),o=r.updateQueue,o!==null&&kh(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&ne(Ba),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Ds(Bt),gt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function cO(i,r){switch(mm(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ds(Bt),$e(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return In(r),null;case 31:if(r.memoizedState!==null){if(si(r),r.alternate===null)throw Error(s(340));ka()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(si(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ka()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(Dt),null;case 4:return $e(),null;case 10:return Ds(r.type),null;case 22:case 23:return si(r),Nm(),i!==null&&ne(Ba),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ds(Bt),null;case 25:return null;default:return null}}function vE(i,r){switch(mm(r),r.tag){case 3:Ds(Bt),$e();break;case 26:case 27:case 5:In(r);break;case 4:$e();break;case 31:r.memoizedState!==null&&si(r);break;case 13:si(r);break;case 19:ne(Dt);break;case 10:Ds(r.type);break;case 22:case 23:si(r),Nm(),i!==null&&ne(Ba);break;case 24:Ds(Bt)}}function _c(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==f)}}catch(x){st(r,r.return,x)}}function Ir(i,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var b=u.inst,x=b.destroy;if(x!==void 0){b.destroy=void 0,f=r;var P=o,K=x;try{K()}catch(ie){st(f,P,ie)}}}u=u.next}while(u!==p)}}catch(ie){st(r,r.return,ie)}}function EE(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{u0(r,o)}catch(u){st(i,i.return,u)}}}function bE(i,r,o){o.props=qa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){st(i,r,u)}}function vc(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){st(i,r,f)}}function ns(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){st(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){st(i,r,f)}else o.current=null}function TE(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){st(i,i.return,f)}}function op(i,r,o){try{var u=i.stateNode;OO(u,i.type,o,r),u[nt]=r}catch(f){st(i,i.return,f)}}function AE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Pr(i.type)||i.tag===4}function lp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||AE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Pr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cp(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=en));else if(u!==4&&(u===27&&Pr(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(cp(i,r,o),i=i.sibling;i!==null;)cp(i,r,o),i=i.sibling}function Uh(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&Pr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Uh(i,r,o),i=i.sibling;i!==null;)Uh(i,r,o),i=i.sibling}function SE(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);un(r,u,o),r[De]=i,r[nt]=o}catch(p){st(i,i.return,p)}}var ks=!1,Ht=!1,up=!1,xE=typeof WeakSet=="function"?WeakSet:Set,sn=null;function uO(i,r){if(i=i.containerInfo,Op=rd,i=kv(i),im(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,x=-1,P=-1,K=0,ie=0,oe=i,$=null;t:for(;;){for(var W;oe!==o||f!==0&&oe.nodeType!==3||(x=b+f),oe!==p||u!==0&&oe.nodeType!==3||(P=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(W=oe.firstChild)!==null;)$=oe,oe=W;for(;;){if(oe===i)break t;if($===o&&++K===f&&(x=b),$===p&&++ie===u&&(P=b),(W=oe.nextSibling)!==null)break;oe=$,$=oe.parentNode}oe=W}o=x===-1||P===-1?null:{start:x,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dp={focusedElem:i,selectionRange:o},rd=!1,sn=r;sn!==null;)if(r=sn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,sn=i;else for(;sn!==null;){switch(r=sn,p=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=r,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var _e=qa(o.type,f);i=u.getSnapshotBeforeUpdate(_e,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(we){st(o,o.return,we)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Vp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Vp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,sn=i;break}sn=r.return}}function wE(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:js(i,o),u&4&&_c(5,o);break;case 1:if(js(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(b){st(o,o.return,b)}else{var f=qa(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){st(o,o.return,b)}}u&64&&EE(o),u&512&&vc(o,o.return);break;case 3:if(js(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{u0(i,r)}catch(b){st(o,o.return,b)}}break;case 27:r===null&&u&4&&SE(o);case 26:case 5:js(i,o),r===null&&u&4&&TE(o),u&512&&vc(o,o.return);break;case 12:js(i,o);break;case 31:js(i,o),u&4&&NE(i,o);break;case 13:js(i,o),u&4&&CE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=vO.bind(null,o),jO(i,o))));break;case 22:if(u=o.memoizedState!==null||ks,!u){r=r!==null&&r.memoizedState!==null||Ht,f=ks;var p=Ht;ks=u,(Ht=r)&&!p?Bs(i,o,(o.subtreeFlags&8772)!==0):js(i,o),ks=f,Ht=p}break;case 30:break;default:js(i,o)}}function IE(i){var r=i.alternate;r!==null&&(i.alternate=null,IE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Aa(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Gn=!1;function Us(i,r,o){for(o=o.child;o!==null;)RE(i,r,o),o=o.sibling}function RE(i,r,o){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ae,o)}catch{}switch(o.tag){case 26:Ht||ns(o,r),Us(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ht||ns(o,r);var u=vt,f=Gn;Pr(o.type)&&(vt=o.stateNode,Gn=!1),Us(i,r,o),Rc(o.stateNode),vt=u,Gn=f;break;case 5:Ht||ns(o,r);case 6:if(u=vt,f=Gn,vt=null,Us(i,r,o),vt=u,Gn=f,vt!==null)if(Gn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(p){st(o,r,p)}else try{vt.removeChild(o.stateNode)}catch(p){st(o,r,p)}break;case 18:vt!==null&&(Gn?(i=vt,Eb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),al(i)):Eb(vt,o.stateNode));break;case 4:u=vt,f=Gn,vt=o.stateNode.containerInfo,Gn=!0,Us(i,r,o),vt=u,Gn=f;break;case 0:case 11:case 14:case 15:Ir(2,o,r),Ht||Ir(4,o,r),Us(i,r,o);break;case 1:Ht||(ns(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&bE(o,r,u)),Us(i,r,o);break;case 21:Us(i,r,o);break;case 22:Ht=(u=Ht)||o.memoizedState!==null,Us(i,r,o),Ht=u;break;default:Us(i,r,o)}}function NE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{al(i)}catch(o){st(r,r.return,o)}}}function CE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{al(i)}catch(o){st(r,r.return,o)}}function hO(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new xE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new xE),r;default:throw Error(s(435,i.tag))}}function jh(i,r){var o=hO(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=EO.bind(null,i,u);u.then(f,f)}})}function qn(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,b=r,x=b;e:for(;x!==null;){switch(x.tag){case 27:if(Pr(x.type)){vt=x.stateNode,Gn=!1;break e}break;case 5:vt=x.stateNode,Gn=!1;break e;case 3:case 4:vt=x.stateNode.containerInfo,Gn=!0;break e}x=x.return}if(vt===null)throw Error(s(160));RE(p,b,f),vt=null,Gn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)OE(r,i),r=r.sibling}var Vi=null;function OE(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(r,i),Yn(i),u&4&&(Ir(3,i,i.return),_c(3,i),Ir(5,i,i.return));break;case 1:qn(r,i),Yn(i),u&512&&(Ht||o===null||ns(o,o.return)),u&64&&ks&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Vi;if(qn(r,i),Yn(i),u&512&&(Ht||o===null||ns(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[bs]||p[De]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),un(p,u,o),p[De]=i,Ot(p),u=p;break e;case"link":var b=Ob("link","href",f).get(u+(o.href||""));if(b){for(var x=0;x<b.length;x++)if(p=b[x],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(x,1);break t}}p=f.createElement(u),un(p,u,o),f.head.appendChild(p);break;case"meta":if(b=Ob("meta","content",f).get(u+(o.content||""))){for(x=0;x<b.length;x++)if(p=b[x],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(x,1);break t}}p=f.createElement(u),un(p,u,o),f.head.appendChild(p);break;default:throw Error(s(468,u))}p[De]=i,Ot(p),u=p}i.stateNode=u}else Db(f,i.type,i.stateNode);else i.stateNode=Cb(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Db(f,i.type,i.stateNode):Cb(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&op(i,i.memoizedProps,o.memoizedProps)}break;case 27:qn(r,i),Yn(i),u&512&&(Ht||o===null||ns(o,o.return)),o!==null&&u&4&&op(i,i.memoizedProps,o.memoizedProps);break;case 5:if(qn(r,i),Yn(i),u&512&&(Ht||o===null||ns(o,o.return)),i.flags&32){f=i.stateNode;try{gi(f,"")}catch(_e){st(i,i.return,_e)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,op(i,f,o!==null?o.memoizedProps:f)),u&1024&&(up=!0);break;case 6:if(qn(r,i),Yn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(_e){st(i,i.return,_e)}}break;case 3:if(td=null,f=Vi,Vi=Zh(r.containerInfo),qn(r,i),Vi=f,Yn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{al(r.containerInfo)}catch(_e){st(i,i.return,_e)}up&&(up=!1,DE(i));break;case 4:u=Vi,Vi=Zh(i.stateNode.containerInfo),qn(r,i),Yn(i),Vi=u;break;case 12:qn(r,i),Yn(i);break;case 31:qn(r,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,jh(i,u)));break;case 13:qn(r,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Fh=Jt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,jh(i,u)));break;case 22:f=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,K=ks,ie=Ht;if(ks=K||f,Ht=ie||P,qn(r,i),Ht=ie,ks=K,Yn(i),u&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||P||ks||Ht||Ya(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){P=o=r;try{if(p=P.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{x=P.stateNode;var oe=P.memoizedProps.style,$=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;x.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){st(P,P.return,_e)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(_e){st(P,P.return,_e)}}}else if(r.tag===18){if(o===null){P=r;try{var W=P.stateNode;f?bb(W,!0):bb(P.stateNode,!1)}catch(_e){st(P,P.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,jh(i,o))));break;case 19:qn(r,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,jh(i,u)));break;case 30:break;case 21:break;default:qn(r,i),Yn(i)}}function Yn(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(AE(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,p=lp(i);Uh(i,p,f);break;case 5:var b=o.stateNode;o.flags&32&&(gi(b,""),o.flags&=-33);var x=lp(i);Uh(i,x,b);break;case 3:case 4:var P=o.stateNode.containerInfo,K=lp(i);cp(i,K,P);break;default:throw Error(s(161))}}catch(ie){st(i,i.return,ie)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function DE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;DE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function js(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)wE(i,r.alternate,r),r=r.sibling}function Ya(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ir(4,r,r.return),Ya(r);break;case 1:ns(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&bE(r,r.return,o),Ya(r);break;case 27:Rc(r.stateNode);case 26:case 5:ns(r,r.return),Ya(r);break;case 22:r.memoizedState===null&&Ya(r);break;case 30:Ya(r);break;default:Ya(r)}i=i.sibling}}function Bs(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,p=r,b=p.flags;switch(p.tag){case 0:case 11:case 15:Bs(f,p,o),_c(4,p);break;case 1:if(Bs(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){st(u,u.return,K)}if(u=p,f=u.updateQueue,f!==null){var x=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)c0(P[f],x)}catch(K){st(u,u.return,K)}}o&&b&64&&EE(p),vc(p,p.return);break;case 27:SE(p);case 26:case 5:Bs(f,p,o),o&&u===null&&b&4&&TE(p),vc(p,p.return);break;case 12:Bs(f,p,o);break;case 31:Bs(f,p,o),o&&b&4&&NE(f,p);break;case 13:Bs(f,p,o),o&&b&4&&CE(f,p);break;case 22:p.memoizedState===null&&Bs(f,p,o),vc(p,p.return);break;case 30:break;default:Bs(f,p,o)}r=r.sibling}}function hp(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&rc(o))}function dp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&rc(i))}function Li(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ME(i,r,o,u),r=r.sibling}function ME(i,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Li(i,r,o,u),f&2048&&_c(9,r);break;case 1:Li(i,r,o,u);break;case 3:Li(i,r,o,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&rc(i)));break;case 12:if(f&2048){Li(i,r,o,u),i=r.stateNode;try{var p=r.memoizedProps,b=p.id,x=p.onPostCommit;typeof x=="function"&&x(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){st(r,r.return,P)}}else Li(i,r,o,u);break;case 31:Li(i,r,o,u);break;case 13:Li(i,r,o,u);break;case 23:break;case 22:p=r.stateNode,b=r.alternate,r.memoizedState!==null?p._visibility&2?Li(i,r,o,u):Ec(i,r):p._visibility&2?Li(i,r,o,u):(p._visibility|=2,Xo(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&hp(b,r);break;case 24:Li(i,r,o,u),f&2048&&dp(r.alternate,r);break;default:Li(i,r,o,u)}}function Xo(i,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=i,b=r,x=o,P=u,K=b.flags;switch(b.tag){case 0:case 11:case 15:Xo(p,b,x,P,f),_c(8,b);break;case 23:break;case 22:var ie=b.stateNode;b.memoizedState!==null?ie._visibility&2?Xo(p,b,x,P,f):Ec(p,b):(ie._visibility|=2,Xo(p,b,x,P,f)),f&&K&2048&&hp(b.alternate,b);break;case 24:Xo(p,b,x,P,f),f&&K&2048&&dp(b.alternate,b);break;default:Xo(p,b,x,P,f)}r=r.sibling}}function Ec(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,f=u.flags;switch(u.tag){case 22:Ec(o,u),f&2048&&hp(u.alternate,u);break;case 24:Ec(o,u),f&2048&&dp(u.alternate,u);break;default:Ec(o,u)}r=r.sibling}}var bc=8192;function Qo(i,r,o){if(i.subtreeFlags&bc)for(i=i.child;i!==null;)PE(i,r,o),i=i.sibling}function PE(i,r,o){switch(i.tag){case 26:Qo(i,r,o),i.flags&bc&&i.memoizedState!==null&&WO(o,Vi,i.memoizedState,i.memoizedProps);break;case 5:Qo(i,r,o);break;case 3:case 4:var u=Vi;Vi=Zh(i.stateNode.containerInfo),Qo(i,r,o),Vi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=bc,bc=16777216,Qo(i,r,o),bc=u):Qo(i,r,o));break;default:Qo(i,r,o)}}function VE(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Tc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];sn=u,kE(u,i)}VE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)LE(i),i=i.sibling}function LE(i){switch(i.tag){case 0:case 11:case 15:Tc(i),i.flags&2048&&Ir(9,i,i.return);break;case 3:Tc(i);break;case 12:Tc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Bh(i)):Tc(i);break;default:Tc(i)}}function Bh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];sn=u,kE(u,i)}VE(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ir(8,r,r.return),Bh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Bh(r));break;default:Bh(r)}i=i.sibling}}function kE(i,r){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:Ir(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:rc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=i;sn!==null;){u=sn;var f=u.sibling,p=u.return;if(IE(u),u===o){sn=null;break e}if(f!==null){f.return=p,sn=f;break e}sn=p}}}var dO={getCacheForType:function(i){var r=ln(Bt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return ln(Bt).controller.signal}},fO=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ut=null,je=null,Fe=0,it=0,ri=null,Rr=!1,Wo=!1,fp=!1,Fs=0,It=0,Nr=0,Ka=0,mp=0,ai=0,Jo=0,Ac=null,Kn=null,pp=!1,Fh=0,UE=0,zh=1/0,Hh=null,Cr=null,Xt=0,Or=null,Zo=null,zs=0,gp=0,yp=null,jE=null,Sc=0,_p=null;function oi(){return(Ze&2)!==0&&Fe!==0?Fe&-Fe:ee.T!==null?Sp():me()}function BE(){if(ai===0)if((Fe&536870912)===0||qe){var i=mi;mi<<=1,(mi&3932160)===0&&(mi=262144),ai=i}else ai=536870912;return i=ii.current,i!==null&&(i.flags|=32),ai}function $n(i,r,o){(i===ut&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(el(i,0),Dr(i,Fe,ai,!1)),Nn(i,o),((Ze&2)===0||i!==ut)&&(i===ut&&((Ze&2)===0&&(Ka|=o),It===4&&Dr(i,Fe,ai,!1)),is(i))}function FE(i,r,o){if((Ze&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||Ki(i,r),f=u?gO(i,r):Ep(i,r,!0),p=u;do{if(f===0){Wo&&!u&&Dr(i,r,0,!1);break}else{if(o=i.current.alternate,p&&!mO(o)){f=Ep(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var x=i;f=Ac;var P=x.current.memoizedState.isDehydrated;if(P&&(el(x,b).flags|=256),b=Ep(x,b,!1),b!==2){if(fp&&!P){x.errorRecoveryDisabledLanes|=p,Ka|=p,f=4;break e}p=Kn,Kn=f,p!==null&&(Kn===null?Kn=p:Kn.push.apply(Kn,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){el(i,0),Dr(i,r,0,!0);break}e:{switch(u=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Dr(u,r,ai,!Rr);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Fh+300-Jt(),10<f)){if(Dr(u,r,ai,!Rr),Fn(u,0,!0)!==0)break e;zs=r,u.timeoutHandle=_b(zE.bind(null,u,o,Kn,Hh,pp,r,ai,Ka,Jo,Rr,p,"Throttled",-0,0),f);break e}zE(u,o,Kn,Hh,pp,r,ai,Ka,Jo,Rr,p,null,-0,0)}}break}while(!0);is(i)}function zE(i,r,o,u,f,p,b,x,P,K,ie,oe,$,W){if(i.timeoutHandle=-1,oe=r.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:en},PE(r,p,oe);var _e=(p&62914560)===p?Fh-Jt():(p&4194048)===p?UE-Jt():0;if(_e=JO(oe,_e),_e!==null){zs=p,i.cancelPendingCommit=_e(QE.bind(null,i,r,p,o,u,f,b,x,P,ie,oe,null,$,W)),Dr(i,p,b,!K);return}}QE(i,r,p,o,u,f,b,x,P)}function mO(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!ti(p(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Dr(i,r,o,u){r&=~mp,r&=~Ka,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var p=31-Zt(f),b=1<<p;u[p]=-1,f&=~b}o!==0&&ba(i,o,r)}function Gh(){return(Ze&6)===0?(xc(0),!1):!0}function vp(){if(je!==null){if(it===0)var i=je.return;else i=je,Os=Ua=null,Vm(i),Go=null,oc=0,i=je;for(;i!==null;)vE(i.alternate,i),i=i.return;je=null}}function el(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,PO(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),zs=0,vp(),ut=i,je=o=Ns(i.current,null),Fe=r,it=0,ri=null,Rr=!1,Wo=Ki(i,r),fp=!1,Jo=ai=mp=Ka=Nr=It=0,Kn=Ac=null,pp=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-Zt(u),p=1<<f;r|=i[f],u&=~p}return Fs=r,hh(),o}function HE(i,r){Ve=null,ee.H=pc,r===Ho||r===vh?(r=r0(),it=3):r===Am?(r=r0(),it=4):it=r===Wm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ri=r,je===null&&(It=1,Mh(i,_i(r,i.current)))}function GE(){var i=ii.current;return i===null?!0:(Fe&4194048)===Fe?Ti===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?i===Ti:!1}function qE(){var i=ee.H;return ee.H=pc,i===null?pc:i}function YE(){var i=ee.A;return ee.A=dO,i}function qh(){It=4,Rr||(Fe&4194048)!==Fe&&ii.current!==null||(Wo=!0),(Nr&134217727)===0&&(Ka&134217727)===0||ut===null||Dr(ut,Fe,ai,!1)}function Ep(i,r,o){var u=Ze;Ze|=2;var f=qE(),p=YE();(ut!==i||Fe!==r)&&(Hh=null,el(i,r)),r=!1;var b=It;e:do try{if(it!==0&&je!==null){var x=je,P=ri;switch(it){case 8:vp(),b=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(r=!0);var K=it;if(it=0,ri=null,tl(i,x,P,K),o&&Wo){b=0;break e}break;default:K=it,it=0,ri=null,tl(i,x,P,K)}}pO(),b=It;break}catch(ie){HE(i,ie)}while(!0);return r&&i.shellSuspendCounter++,Os=Ua=null,Ze=u,ee.H=f,ee.A=p,je===null&&(ut=null,Fe=0,hh()),b}function pO(){for(;je!==null;)KE(je)}function gO(i,r){var o=Ze;Ze|=2;var u=qE(),f=YE();ut!==i||Fe!==r?(Hh=null,zh=Jt()+500,el(i,r)):Wo=Ki(i,r);e:do try{if(it!==0&&je!==null){r=je;var p=ri;t:switch(it){case 1:it=0,ri=null,tl(i,r,p,1);break;case 2:case 9:if(i0(p)){it=0,ri=null,$E(r);break}r=function(){it!==2&&it!==9||ut!==i||(it=7),is(i)},p.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:i0(p)?(it=0,ri=null,$E(r)):(it=0,ri=null,tl(i,r,p,7));break;case 5:var b=null;switch(je.tag){case 26:b=je.memoizedState;case 5:case 27:var x=je;if(b?Mb(b):x.stateNode.complete){it=0,ri=null;var P=x.sibling;if(P!==null)je=P;else{var K=x.return;K!==null?(je=K,Yh(K)):je=null}break t}}it=0,ri=null,tl(i,r,p,5);break;case 6:it=0,ri=null,tl(i,r,p,6);break;case 8:vp(),It=6;break e;default:throw Error(s(462))}}yO();break}catch(ie){HE(i,ie)}while(!0);return Os=Ua=null,ee.H=u,ee.A=f,Ze=o,je!==null?0:(ut=null,Fe=0,hh(),It)}function yO(){for(;je!==null&&!vo();)KE(je)}function KE(i){var r=yE(i.alternate,i,Fs);i.memoizedProps=i.pendingProps,r===null?Yh(i):je=r}function $E(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=hE(o,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=hE(o,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Vm(r);default:vE(o,r),r=je=Yv(r,Fs),r=yE(o,r,Fs)}i.memoizedProps=i.pendingProps,r===null?Yh(i):je=r}function tl(i,r,o,u){Os=Ua=null,Vm(r),Go=null,oc=0;var f=r.return;try{if(rO(i,f,r,o,Fe)){It=1,Mh(i,_i(o,i.current)),je=null;return}}catch(p){if(f!==null)throw je=f,p;It=1,Mh(i,_i(o,i.current)),je=null;return}r.flags&32768?(qe||u===1?i=!0:Wo||(Fe&536870912)!==0?i=!1:(Rr=i=!0,(u===2||u===9||u===3||u===6)&&(u=ii.current,u!==null&&u.tag===13&&(u.flags|=16384))),XE(r,i)):Yh(r)}function Yh(i){var r=i;do{if((r.flags&32768)!==0){XE(r,Rr);return}i=r.return;var o=lO(r.alternate,r,Fs);if(o!==null){je=o;return}if(r=r.sibling,r!==null){je=r;return}je=r=i}while(r!==null);It===0&&(It=5)}function XE(i,r){do{var o=cO(i.alternate,i);if(o!==null){o.flags&=32767,je=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){je=i;return}je=i=o}while(i!==null);It=6,je=null}function QE(i,r,o,u,f,p,b,x,P){i.cancelPendingCommit=null;do Kh();while(Xt!==0);if((Ze&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=lm,Ut(i,o,p,b,x,P),i===ut&&(je=ut=null,Fe=0),Zo=r,Or=i,zs=o,gp=p,yp=f,jE=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bO(di,function(){return tb(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null,f=L.p,L.p=2,b=Ze,Ze|=4;try{uO(i,r,o)}finally{Ze=b,L.p=f,ee.T=u}}Xt=1,WE(),JE(),ZE()}}function WE(){if(Xt===1){Xt=0;var i=Or,r=Zo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=ee.T,ee.T=null;var u=L.p;L.p=2;var f=Ze;Ze|=4;try{OE(r,i);var p=Dp,b=kv(i.containerInfo),x=p.focusedElem,P=p.selectionRange;if(b!==x&&x&&x.ownerDocument&&Lv(x.ownerDocument.documentElement,x)){if(P!==null&&im(x)){var K=P.start,ie=P.end;if(ie===void 0&&(ie=K),"selectionStart"in x)x.selectionStart=K,x.selectionEnd=Math.min(ie,x.value.length);else{var oe=x.ownerDocument||document,$=oe&&oe.defaultView||window;if($.getSelection){var W=$.getSelection(),_e=x.textContent.length,we=Math.min(P.start,_e),lt=P.end===void 0?we:Math.min(P.end,_e);!W.extend&&we>lt&&(b=lt,lt=we,we=b);var z=Vv(x,we),j=Vv(x,lt);if(z&&j&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var Y=oe.createRange();Y.setStart(z.node,z.offset),W.removeAllRanges(),we>lt?(W.addRange(Y),W.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),W.addRange(Y))}}}}for(oe=[],W=x;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<oe.length;x++){var se=oe[x];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}rd=!!Op,Dp=Op=null}finally{Ze=f,L.p=u,ee.T=o}}i.current=r,Xt=2}}function JE(){if(Xt===2){Xt=0;var i=Or,r=Zo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=ee.T,ee.T=null;var u=L.p;L.p=2;var f=Ze;Ze|=4;try{wE(i,r.alternate,r)}finally{Ze=f,L.p=u,ee.T=o}}Xt=3}}function ZE(){if(Xt===4||Xt===3){Xt=0,Eo();var i=Or,r=Zo,o=zs,u=jE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,Zo=Or=null,eb(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Cr=null),F(o),r=r.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ae,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=ee.T,f=L.p,L.p=2,ee.T=null;try{for(var p=i.onRecoverableError,b=0;b<u.length;b++){var x=u[b];p(x.value,{componentStack:x.stack})}}finally{ee.T=r,L.p=f}}(zs&3)!==0&&Kh(),is(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===_p?Sc++:(Sc=0,_p=i):Sc=0,xc(0)}}function eb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,rc(r)))}function Kh(){return WE(),JE(),ZE(),tb()}function tb(){if(Xt!==5)return!1;var i=Or,r=gp;gp=0;var o=F(zs),u=ee.T,f=L.p;try{L.p=32>o?32:o,ee.T=null,o=yp,yp=null;var p=Or,b=zs;if(Xt=0,Zo=Or=null,zs=0,(Ze&6)!==0)throw Error(s(331));var x=Ze;if(Ze|=4,LE(p.current),ME(p,p.current,b,o),Ze=x,xc(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ae,p)}catch{}return!0}finally{L.p=f,ee.T=u,eb(i,r)}}function nb(i,r,o){r=_i(o,r),r=Qm(i.stateNode,r,2),i=Sr(i,r,2),i!==null&&(Nn(i,2),is(i))}function st(i,r,o){if(i.tag===3)nb(i,i,o);else for(;r!==null;){if(r.tag===3){nb(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Cr===null||!Cr.has(u))){i=_i(o,i),o=iE(2),u=Sr(r,o,2),u!==null&&(sE(o,u,r,i),Nn(u,2),is(u));break}}r=r.return}}function bp(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new fO;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(fp=!0,f.add(o),i=_O.bind(null,i,r,o),r.then(i,i))}function _O(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ut===i&&(Fe&o)===o&&(It===4||It===3&&(Fe&62914560)===Fe&&300>Jt()-Fh?(Ze&2)===0&&el(i,0):mp|=o,Jo===Fe&&(Jo=0)),is(i)}function ib(i,r){r===0&&(r=Ea()),i=Va(i,r),i!==null&&(Nn(i,r),is(i))}function vO(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),ib(i,o)}function EO(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),ib(i,o)}function bO(i,r){return qi(i,r)}var $h=null,nl=null,Tp=!1,Xh=!1,Ap=!1,Mr=0;function is(i){i!==nl&&i.next===null&&(nl===null?$h=nl=i:nl=nl.next=i),Xh=!0,Tp||(Tp=!0,AO())}function xc(i,r){if(!Ap&&Xh){Ap=!0;do for(var o=!1,u=$h;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var b=u.suspendedLanes,x=u.pingedLanes;p=(1<<31-Zt(42|i)+1)-1,p&=f&~(b&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,ob(u,p))}else p=Fe,p=Fn(u,u===ut?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ki(u,p)||(o=!0,ob(u,p));u=u.next}while(o);Ap=!1}}function TO(){sb()}function sb(){Xh=Tp=!1;var i=0;Mr!==0&&MO()&&(i=Mr);for(var r=Jt(),o=null,u=$h;u!==null;){var f=u.next,p=rb(u,r);p===0?(u.next=null,o===null?$h=f:o.next=f,f===null&&(nl=o)):(o=u,(i!==0||(p&3)!==0)&&(Xh=!0)),u=f}Xt!==0&&Xt!==5||xc(i),Mr!==0&&(Mr=0)}function rb(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var b=31-Zt(p),x=1<<b,P=f[b];P===-1?((x&o)===0||(x&u)!==0)&&(f[b]=sr(x,r)):P<=r&&(i.expiredLanes|=x),p&=~x}if(r=ut,o=Fe,o=Fn(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(it===2||it===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&_s(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Ki(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&_s(u),F(o)){case 2:case 8:o=ct;break;case 32:o=di;break;case 268435456:o=vs;break;default:o=di}return u=ab.bind(null,i),o=qi(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&_s(u),i.callbackPriority=2,i.callbackNode=null,2}function ab(i,r){if(Xt!==0&&Xt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Kh()&&i.callbackNode!==o)return null;var u=Fe;return u=Fn(i,i===ut?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(FE(i,u,r),rb(i,Jt()),i.callbackNode!=null&&i.callbackNode===o?ab.bind(null,i):null)}function ob(i,r){if(Kh())return null;FE(i,r,!0)}function AO(){VO(function(){(Ze&6)!==0?qi(St,TO):sb()})}function Sp(){if(Mr===0){var i=Fo;i===0&&(i=Es,Es<<=1,(Es&261888)===0&&(Es=256)),Mr=i}return Mr}function lb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wi(""+i)}function cb(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function SO(i,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var p=lb((f[nt]||null).action),b=u.submitter;b&&(r=(r=b[nt]||null)?lb(r.formAction):b.getAttribute("formAction"),r!==null&&(p=r,b=null));var x=new Ra("action","action",null,u,f);i.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Mr!==0){var P=b?cb(f,b):new FormData(f);Gm(o,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(x.preventDefault(),P=b?cb(f,b):new FormData(f),Gm(o,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var xp=0;xp<om.length;xp++){var wp=om[xp],xO=wp.toLowerCase(),wO=wp[0].toUpperCase()+wp.slice(1);Pi(xO,"on"+wO)}Pi(Bv,"onAnimationEnd"),Pi(Fv,"onAnimationIteration"),Pi(zv,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(z1,"onTransitionRun"),Pi(H1,"onTransitionStart"),Pi(G1,"onTransitionCancel"),Pi(Hv,"onTransitionEnd"),Qi("onMouseEnter",["mouseout","mouseover"]),Qi("onMouseLeave",["mouseout","mouseover"]),Qi("onPointerEnter",["pointerout","pointerover"]),Qi("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function ub(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var b=u.length-1;0<=b;b--){var x=u[b],P=x.instance,K=x.currentTarget;if(x=x.listener,P!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=K;try{p(f)}catch(ie){uh(ie)}f.currentTarget=null,p=P}else for(b=0;b<u.length;b++){if(x=u[b],P=x.instance,K=x.currentTarget,x=x.listener,P!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=K;try{p(f)}catch(ie){uh(ie)}f.currentTarget=null,p=P}}}}function Be(i,r){var o=r[Xi];o===void 0&&(o=r[Xi]=new Set);var u=i+"__bubble";o.has(u)||(hb(r,i,2,!1),o.add(u))}function Ip(i,r,o){var u=0;r&&(u|=4),hb(o,i,u,r)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Rp(i){if(!i[Qh]){i[Qh]=!0,Ao.forEach(function(o){o!=="selectionchange"&&(IO.has(o)||Ip(o,!1,i),Ip(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Qh]||(r[Qh]=!0,Ip("selectionchange",!1,r))}}function hb(i,r,o,u){switch(Bb(r)){case 2:var f=tD;break;case 8:f=nD;break;default:f=Hp}o=f.bind(null,r,o,i),f=void 0,!$l||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function Np(i,r,o,u,f){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var x=u.stateNode.containerInfo;if(x===f)break;if(b===4)for(b=u.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;x!==null;){if(b=Ts(x),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){u=p=b;continue e}x=x.parentNode}}u=u.return}$u(function(){var K=p,ie=Ro(o),oe=[];e:{var $=Gv.get(i);if($!==void 0){var W=Ra,_e=i;switch(i){case"keypress":if(Ia(o)===0)break e;case"keydown":case"keyup":W=ih;break;case"focusin":_e="focus",W=mr;break;case"focusout":_e="blur",W=mr;break;case"beforeblur":case"afterblur":W=mr;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=rh;break;case Bv:case Fv:case zv:W=Oo;break;case Hv:W=Do;break;case"scroll":case"scrollend":W=Xu;break;case"wheel":W=oh;break;case"copy":case"cut":case"paste":W=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Zl;break;case"toggle":case"beforetoggle":W=gr}var we=(r&4)!==0,lt=!we&&(i==="scroll"||i==="scrollend"),z=we?$!==null?$+"Capture":null:$;we=[];for(var j=K,Y;j!==null;){var se=j;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||z===null||(se=zn(j,z),se!=null&&we.push(Ic(j,se,Y))),lt)break;j=j.return}0<we.length&&($=new W($,_e,null,o,ie),oe.push({event:$,listeners:we}))}}if((r&7)===0){e:{if($=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",$&&o!==Io&&(_e=o.relatedTarget||o.fromElement)&&(Ts(_e)||_e[_n]))break e;if((W||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,W?(_e=o.relatedTarget||o.toElement,W=K,_e=_e?Ts(_e):null,_e!==null&&(lt=l(_e),we=_e.tag,_e!==lt||we!==5&&we!==27&&we!==6)&&(_e=null)):(W=null,_e=K),W!==_e)){if(we=Qu,se="onMouseLeave",z="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(we=Zl,se="onPointerLeave",z="onPointerEnter",j="pointer"),lt=W==null?$:Sa(W),Y=_e==null?$:Sa(_e),$=new we(se,j+"leave",W,o,ie),$.target=lt,$.relatedTarget=Y,se=null,Ts(ie)===K&&(we=new we(z,j+"enter",_e,o,ie),we.target=Y,we.relatedTarget=lt,se=we),lt=se,W&&_e)t:{for(we=RO,z=W,j=_e,Y=0,se=z;se;se=we(se))Y++;se=0;for(var Se=j;Se;Se=we(Se))se++;for(;0<Y-se;)z=we(z),Y--;for(;0<se-Y;)j=we(j),se--;for(;Y--;){if(z===j||j!==null&&z===j.alternate){we=z;break t}z=we(z),j=we(j)}we=null}else we=null;W!==null&&db(oe,$,W,we,!1),_e!==null&&lt!==null&&db(oe,lt,_e,we,!0)}}e:{if($=K?Sa(K):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Qe=Nv;else if(Hn($))if(Cv)Qe=j1;else{Qe=k1;var be=L1}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Yl(K.elementType)&&(Qe=Nv):Qe=U1;if(Qe&&(Qe=Qe(i,K))){Da(oe,Qe,o,ie);break e}be&&be(i,$,K),i==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&wo($,"number",$.value)}switch(be=K?Sa(K):window,i){case"focusin":(Hn(be)||be.contentEditable==="true")&&(Mo=be,sm=K,nc=null);break;case"focusout":nc=sm=Mo=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,Uv(oe,o,ie);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":Uv(oe,o,ie)}var Le;if(v)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ke?et(i,o)&&(ze="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(ze="onCompositionStart");ze&&(q&&o.locale!=="ko"&&(ke||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ke&&(Le=ur()):(ei=ie,No="value"in ei?ei.value:ei.textContent,ke=!0)),be=Wh(K,ze),0<be.length&&(ze=new Ql(ze,i,null,o,ie),oe.push({event:ze,listeners:be}),Le?ze.data=Le:(Le=jt(o),Le!==null&&(ze.data=Le)))),(Le=w?tn(i,o):nn(i,o))&&(ze=Wh(K,"onBeforeInput"),0<ze.length&&(be=new Ql("onBeforeInput","beforeinput",null,o,ie),oe.push({event:be,listeners:ze}),be.data=Le)),SO(oe,i,K,o,ie)}ub(oe,r)})}function Ic(i,r,o){return{instance:i,listener:r,currentTarget:o}}function Wh(i,r){for(var o=r+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=zn(i,o),f!=null&&u.unshift(Ic(i,f,p)),f=zn(i,r),f!=null&&u.push(Ic(i,f,p))),i.tag===3)return u;i=i.return}return[]}function RO(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function db(i,r,o,u,f){for(var p=r._reactName,b=[];o!==null&&o!==u;){var x=o,P=x.alternate,K=x.stateNode;if(x=x.tag,P!==null&&P===u)break;x!==5&&x!==26&&x!==27||K===null||(P=K,f?(K=zn(o,p),K!=null&&b.unshift(Ic(o,K,P))):f||(K=zn(o,p),K!=null&&b.push(Ic(o,K,P)))),o=o.return}b.length!==0&&i.push({event:r,listeners:b})}var NO=/\r\n?/g,CO=/\u0000|\uFFFD/g;function fb(i){return(typeof i=="string"?i:""+i).replace(NO,`
`).replace(CO,"")}function mb(i,r){return r=fb(r),fb(i)===r}function ot(i,r,o,u,f,p){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||gi(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&gi(i,""+u);break;case"className":or(i,"class",u);break;case"tabIndex":or(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":or(i,o,u);break;case"style":Yu(i,u,p);break;case"data":if(r!=="object"){or(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Wi(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&ot(i,r,"name",f.name,f,null),ot(i,r,"formEncType",f.formEncType,f,null),ot(i,r,"formMethod",f.formMethod,f,null),ot(i,r,"formTarget",f.formTarget,f,null)):(ot(i,r,"encType",f.encType,f,null),ot(i,r,"method",f.method,f,null),ot(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Wi(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=en);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Wi(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Be("beforetoggle",i),Be("toggle",i),ar(i,"popover",u);break;case"xlinkActuate":pi(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":pi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":pi(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":pi(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":pi(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":pi(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":pi(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":pi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":pi(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ar(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jf.get(o)||o,ar(i,o,u))}}function Cp(i,r,o,u,f,p){switch(o){case"style":Yu(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?gi(i,u):(typeof u=="number"||typeof u=="bigint")&&gi(i,""+u);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"onClick":u!=null&&(i.onclick=en);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),p=i[nt]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):ar(i,o,u)}}}function un(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(i,r,p,b,o,null)}}f&&ot(i,r,"srcSet",o.srcSet,o,null),u&&ot(i,r,"src",o.src,o,null);return;case"input":Be("invalid",i);var x=p=b=f=null,P=null,K=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":f=ie;break;case"type":b=ie;break;case"checked":P=ie;break;case"defaultChecked":K=ie;break;case"value":p=ie;break;case"defaultValue":x=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:ot(i,r,u,ie,o,null)}}xa(i,p,x,P,K,b,f,!1);return;case"select":Be("invalid",i),u=b=p=null;for(f in o)if(o.hasOwnProperty(f)&&(x=o[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":b=x;break;case"multiple":u=x;default:ot(i,r,f,x,o,null)}r=p,o=b,i.multiple=!!u,r!=null?Xe(i,!!u,r,!1):o!=null&&Xe(i,!!u,o,!0);return;case"textarea":Be("invalid",i),p=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(x=o[b],x!=null))switch(b){case"value":u=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:ot(i,r,b,x,o,null)}cr(i,u,f,p);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(i,r,P,u,o,null)}return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(u=0;u<wc.length;u++)Be(wc[u],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(i,r,K,u,o,null)}return;default:if(Yl(r)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Cp(i,r,ie,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&ot(i,r,x,u,o,null))}function OO(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,x=null,P=null,K=null,ie=null;for(W in o){var oe=o[W];if(o.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":P=oe;default:u.hasOwnProperty(W)||ot(i,r,W,null,u,oe)}}for(var $ in u){var W=u[$];if(oe=o[$],u.hasOwnProperty($)&&(W!=null||oe!=null))switch($){case"type":p=W;break;case"name":f=W;break;case"checked":K=W;break;case"defaultChecked":ie=W;break;case"value":b=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==oe&&ot(i,r,$,W,u,oe)}}lr(i,b,x,P,K,ie,p,f);return;case"select":W=b=x=$=null;for(p in o)if(P=o[p],o.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":W=P;default:u.hasOwnProperty(p)||ot(i,r,p,null,u,P)}for(f in u)if(p=u[f],P=o[f],u.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":$=p;break;case"defaultValue":x=p;break;case"multiple":b=p;default:p!==P&&ot(i,r,f,p,u,P)}r=x,o=b,u=W,$!=null?Xe(i,!!o,$,!1):!!u!=!!o&&(r!=null?Xe(i,!!o,r,!0):Xe(i,!!o,o?[]:"",!1));return;case"textarea":W=$=null;for(x in o)if(f=o[x],o.hasOwnProperty(x)&&f!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ot(i,r,x,null,u,f)}for(b in u)if(f=u[b],p=o[b],u.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":$=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&ot(i,r,b,f,u,p)}wa(i,$,W);return;case"option":for(var _e in o)if($=o[_e],o.hasOwnProperty(_e)&&$!=null&&!u.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:ot(i,r,_e,null,u,$)}for(P in u)if($=u[P],W=o[P],u.hasOwnProperty(P)&&$!==W&&($!=null||W!=null))switch(P){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(i,r,P,$,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)$=o[we],o.hasOwnProperty(we)&&$!=null&&!u.hasOwnProperty(we)&&ot(i,r,we,null,u,$);for(K in u)if($=u[K],W=o[K],u.hasOwnProperty(K)&&$!==W&&($!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:ot(i,r,K,$,u,W)}return;default:if(Yl(r)){for(var lt in o)$=o[lt],o.hasOwnProperty(lt)&&$!==void 0&&!u.hasOwnProperty(lt)&&Cp(i,r,lt,void 0,u,$);for(ie in u)$=u[ie],W=o[ie],!u.hasOwnProperty(ie)||$===W||$===void 0&&W===void 0||Cp(i,r,ie,$,u,W);return}}for(var z in o)$=o[z],o.hasOwnProperty(z)&&$!=null&&!u.hasOwnProperty(z)&&ot(i,r,z,null,u,$);for(oe in u)$=u[oe],W=o[oe],!u.hasOwnProperty(oe)||$===W||$==null&&W==null||ot(i,r,oe,$,u,W)}function pb(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DO(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,b=f.initiatorType,x=f.duration;if(p&&x&&pb(b)){for(b=0,x=f.responseEnd,u+=1;u<o.length;u++){var P=o[u],K=P.startTime;if(K>x)break;var ie=P.transferSize,oe=P.initiatorType;ie&&pb(oe)&&(P=P.responseEnd,b+=ie*(P<x?1:(x-K)/(P-K)))}if(--u,r+=8*(p+b)/(f.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Op=null,Dp=null;function Jh(i){return i.nodeType===9?i:i.ownerDocument}function gb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yb(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Mp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pp=null;function MO(){var i=window.event;return i&&i.type==="popstate"?i===Pp?!1:(Pp=i,!0):(Pp=null,!1)}var _b=typeof setTimeout=="function"?setTimeout:void 0,PO=typeof clearTimeout=="function"?clearTimeout:void 0,vb=typeof Promise=="function"?Promise:void 0,VO=typeof queueMicrotask=="function"?queueMicrotask:typeof vb<"u"?function(i){return vb.resolve(null).then(i).catch(LO)}:_b;function LO(i){setTimeout(function(){throw i})}function Pr(i){return i==="head"}function Eb(i,r){var o=r,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),al(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Rc(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Rc(o);for(var p=o.firstChild;p;){var b=p.nextSibling,x=p.nodeName;p[bs]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&Rc(i.ownerDocument.body);o=f}while(o);al(r)}function bb(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Vp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Vp(o),Aa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function kO(i,r,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[bs])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ai(i.nextSibling),i===null)break}return null}function UO(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ai(i.nextSibling),i===null))return null;return i}function Tb(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ai(i.nextSibling),i===null))return null;return i}function Lp(i){return i.data==="$?"||i.data==="$~"}function kp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jO(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ai(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Up=null;function Ab(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return Ai(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function Sb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function xb(i,r,o){switch(r=Jh(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Rc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Aa(i)}var Si=new Map,wb=new Set;function Zh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Hs=L.d;L.d={f:BO,r:FO,D:zO,C:HO,L:GO,m:qO,X:KO,S:YO,M:$O};function BO(){var i=Hs.f(),r=Gh();return i||r}function FO(i){var r=As(i);r!==null&&r.tag===5&&r.type==="form"?H0(r):Hs.r(i)}var il=typeof document>"u"?null:document;function Ib(i,r,o){var u=il;if(u&&typeof r=="string"&&r){var f=xt(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),wb.has(f)||(wb.add(f),i={rel:i,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),un(r,"link",i),Ot(r),u.head.appendChild(r)))}}function zO(i){Hs.D(i),Ib("dns-prefetch",i,null)}function HO(i,r){Hs.C(i,r),Ib("preconnect",i,r)}function GO(i,r,o){Hs.L(i,r,o);var u=il;if(u&&i&&r){var f='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+xt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+xt(o.imageSizes)+'"]')):f+='[href="'+xt(i)+'"]';var p=f;switch(r){case"style":p=sl(i);break;case"script":p=rl(i)}Si.has(p)||(i=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),Si.set(p,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(Nc(p))||r==="script"&&u.querySelector(Cc(p))||(r=u.createElement("link"),un(r,"link",i),Ot(r),u.head.appendChild(r)))}}function qO(i,r){Hs.m(i,r);var o=il;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+xt(u)+'"][href="'+xt(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=rl(i)}if(!Si.has(p)&&(i=E({rel:"modulepreload",href:i},r),Si.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cc(p)))return}u=o.createElement("link"),un(u,"link",i),Ot(u),o.head.appendChild(u)}}}function YO(i,r,o){Hs.S(i,r,o);var u=il;if(u&&i){var f=Di(u).hoistableStyles,p=sl(i);r=r||"default";var b=f.get(p);if(!b){var x={loading:0,preload:null};if(b=u.querySelector(Nc(p)))x.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},o),(o=Si.get(p))&&jp(i,o);var P=b=u.createElement("link");Ot(P),un(P,"link",i),P._p=new Promise(function(K,ie){P.onload=K,P.onerror=ie}),P.addEventListener("load",function(){x.loading|=1}),P.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ed(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:x},f.set(p,b)}}}function KO(i,r){Hs.X(i,r);var o=il;if(o&&i){var u=Di(o).hoistableScripts,f=rl(i),p=u.get(f);p||(p=o.querySelector(Cc(f)),p||(i=E({src:i,async:!0},r),(r=Si.get(f))&&Bp(i,r),p=o.createElement("script"),Ot(p),un(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function $O(i,r){Hs.M(i,r);var o=il;if(o&&i){var u=Di(o).hoistableScripts,f=rl(i),p=u.get(f);p||(p=o.querySelector(Cc(f)),p||(i=E({src:i,async:!0,type:"module"},r),(r=Si.get(f))&&Bp(i,r),p=o.createElement("script"),Ot(p),un(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Rb(i,r,o,u){var f=(f=Ee.current)?Zh(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=sl(o.href),o=Di(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=sl(o.href);var p=Di(f).hoistableStyles,b=p.get(i);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,b),(p=f.querySelector(Nc(i)))&&!p._p&&(b.instance=p,b.state.loading=5),Si.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Si.set(i,o),p||XO(f,i,o,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=rl(o),o=Di(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function sl(i){return'href="'+xt(i)+'"'}function Nc(i){return'link[rel="stylesheet"]['+i+"]"}function Nb(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function XO(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),un(r,"link",o),Ot(r),i.head.appendChild(r))}function rl(i){return'[src="'+xt(i)+'"]'}function Cc(i){return"script[async]"+i}function Cb(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+xt(o.href)+'"]');if(u)return r.instance=u,Ot(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ot(u),un(u,"style",f),ed(u,o.precedence,i),r.instance=u;case"stylesheet":f=sl(o.href);var p=i.querySelector(Nc(f));if(p)return r.state.loading|=4,r.instance=p,Ot(p),p;u=Nb(o),(f=Si.get(f))&&jp(u,f),p=(i.ownerDocument||i).createElement("link"),Ot(p);var b=p;return b._p=new Promise(function(x,P){b.onload=x,b.onerror=P}),un(p,"link",u),r.state.loading|=4,ed(p,o.precedence,i),r.instance=p;case"script":return p=rl(o.src),(f=i.querySelector(Cc(p)))?(r.instance=f,Ot(f),f):(u=o,(f=Si.get(p))&&(u=E({},o),Bp(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ot(f),un(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,ed(u,o.precedence,i));return r.instance}function ed(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,b=0;b<u.length;b++){var x=u[b];if(x.dataset.precedence===r)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function jp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Bp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var td=null;function Ob(i,r,o){if(td===null){var u=new Map,f=td=new Map;f.set(o,u)}else f=td,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[bs]||p[De]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(r)||"";b=i+b;var x=u.get(b);x?x.push(p):u.set(b,[p])}}return u}function Db(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function QO(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Mb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function WO(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=sl(u.href),p=r.querySelector(Nc(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=nd.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=p,Ot(p);return}p=r.ownerDocument||r,u=Nb(u),(f=Si.get(f))&&jp(u,f),p=p.createElement("link"),Ot(p);var b=p;b._p=new Promise(function(x,P){b.onload=x,b.onerror=P}),un(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=nd.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var Fp=0;function JO(i,r){return i.stylesheets&&i.count===0&&sd(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&sd(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+r);0<i.imgBytes&&Fp===0&&(Fp=62500*DO());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&sd(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>Fp?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var id=null;function sd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,id=new Map,r.forEach(ZO,i),id=null,nd.call(i))}function ZO(i,r){if(!(r.state.loading&4)){var o=id.get(i);if(o)var u=o.get(null);else{o=new Map,id.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=r.instance,b=f.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,f),o.set(b,f),this.count++,u=nd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var Oc={$$typeof:H,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function eD(i,r,o,u,f,p,b,x,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Pb(i,r,o,u,f,p,b,x,P,K,ie,oe){return i=new eD(i,r,o,b,P,K,ie,oe,x),r=1,p===!0&&(r|=24),p=ni(3,null,null,r),i.current=p,p.stateNode=i,r=Em(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:r},Sm(p),i}function Vb(i){return i?(i=Lo,i):Lo}function Lb(i,r,o,u,f,p){f=Vb(f),u.context===null?u.context=f:u.pendingContext=f,u=Ar(r),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Sr(i,u,r),o!==null&&($n(o,i,r),cc(o,i,r))}function kb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function zp(i,r){kb(i,r),(i=i.alternate)&&kb(i,r)}function Ub(i){if(i.tag===13||i.tag===31){var r=Va(i,67108864);r!==null&&$n(r,i,67108864),zp(i,67108864)}}function jb(i){if(i.tag===13||i.tag===31){var r=oi();r=Ta(r);var o=Va(i,r);o!==null&&$n(o,i,r),zp(i,r)}}var rd=!0;function tD(i,r,o,u){var f=ee.T;ee.T=null;var p=L.p;try{L.p=2,Hp(i,r,o,u)}finally{L.p=p,ee.T=f}}function nD(i,r,o,u){var f=ee.T;ee.T=null;var p=L.p;try{L.p=8,Hp(i,r,o,u)}finally{L.p=p,ee.T=f}}function Hp(i,r,o,u){if(rd){var f=Gp(u);if(f===null)Np(i,r,u,ad,o),Fb(i,u);else if(sD(f,i,r,o,u))u.stopPropagation();else if(Fb(i,u),r&4&&-1<iD.indexOf(i)){for(;f!==null;){var p=As(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Wn(p.pendingLanes);if(b!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;b;){var P=1<<31-Zt(b);x.entanglements[1]|=P,b&=~P}is(p),(Ze&6)===0&&(zh=Jt()+500,xc(0))}}break;case 31:case 13:x=Va(p,2),x!==null&&$n(x,p,2),Gh(),zp(p,2)}if(p=Gp(u),p===null&&Np(i,r,u,ad,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Np(i,r,u,null,o)}}function Gp(i){return i=Ro(i),qp(i)}var ad=null;function qp(i){if(ad=null,i=Ts(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===31){if(i=d(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return ad=i,null}function Bb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_a()){case St:return 2;case ct:return 8;case di:case bo:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Yp=!1,Vr=null,Lr=null,kr=null,Dc=new Map,Mc=new Map,Ur=[],iD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fb(i,r){switch(i){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Dc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(r.pointerId)}}function Pc(i,r,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=As(r),r!==null&&Ub(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function sD(i,r,o,u,f){switch(r){case"focusin":return Vr=Pc(Vr,i,r,o,u,f),!0;case"dragenter":return Lr=Pc(Lr,i,r,o,u,f),!0;case"mouseover":return kr=Pc(kr,i,r,o,u,f),!0;case"pointerover":var p=f.pointerId;return Dc.set(p,Pc(Dc.get(p)||null,i,r,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Mc.set(p,Pc(Mc.get(p)||null,i,r,o,u,f)),!0}return!1}function zb(i){var r=Ts(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,rt(i.priority,function(){jb(o)});return}}else if(r===31){if(r=d(o),r!==null){i.blockedOn=r,rt(i.priority,function(){jb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function od(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Gp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Io=u,o.target.dispatchEvent(u),Io=null}else return r=As(o),r!==null&&Ub(r),i.blockedOn=o,!1;r.shift()}return!0}function Hb(i,r,o){od(i)&&o.delete(r)}function rD(){Yp=!1,Vr!==null&&od(Vr)&&(Vr=null),Lr!==null&&od(Lr)&&(Lr=null),kr!==null&&od(kr)&&(kr=null),Dc.forEach(Hb),Mc.forEach(Hb)}function ld(i,r){i.blockedOn===r&&(i.blockedOn=null,Yp||(Yp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rD)))}var cd=null;function Gb(i){cd!==i&&(cd=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cd===i&&(cd=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(qp(u||o)===null)continue;break}var p=As(o);p!==null&&(i.splice(r,3),r-=3,Gm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function al(i){function r(P){return ld(P,i)}Vr!==null&&ld(Vr,i),Lr!==null&&ld(Lr,i),kr!==null&&ld(kr,i),Dc.forEach(r),Mc.forEach(r);for(var o=0;o<Ur.length;o++){var u=Ur[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ur.length&&(o=Ur[0],o.blockedOn===null);)zb(o),o.blockedOn===null&&Ur.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],b=f[nt]||null;if(typeof p=="function")b||Gb(o);else if(b){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[nt]||null)x=b.formAction;else if(qp(f)!==null)continue}else x=b.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),Gb(o)}}}function qb(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Kp(i){this._internalRoot=i}ud.prototype.render=Kp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=oi();Lb(o,u,i,r,null,null)},ud.prototype.unmount=Kp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Lb(i.current,2,null,i,null,null),Gh(),r[_n]=null}};function ud(i){this._internalRoot=i}ud.prototype.unstable_scheduleHydration=function(i){if(i){var r=me();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Ur.length&&r!==0&&r<Ur[o].priority;o++);Ur.splice(o,0,i),o===0&&zb(i)}};var Yb=e.version;if(Yb!=="19.2.3")throw Error(s(527,Yb,"19.2.3"));L.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var aD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Ae=hd.inject(aD),ht=hd}catch{}}return Lc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",f=Z0,p=eE,b=tE;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=Pb(i,1,!1,null,null,o,u,null,f,p,b,qb),i[_n]=r.current,Rp(i),new Kp(r)},Lc.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,f="",p=Z0,b=eE,x=tE,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),r=Pb(i,1,!0,r,o??null,u,f,P,p,b,x,qb),r.context=Vb(null),o=r.current,u=oi(),u=Ta(u),f=Ar(u),f.callback=null,Sr(o,f,u),o=u,r.current.lanes=o,Nn(r,o),is(r),i[_n]=r.current,Rp(i),new ud(r)},Lc.version="19.2.3",Lc}var nT;function yD(){if(nT)return Qp.exports;nT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qp.exports=gD(),Qp.exports}var _D=yD();const vD=Mw(_D),ED=()=>{};var iT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},bD=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],c=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,m=a+2<t.length,g=m?t[a+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let T=(d&15)<<2|g>>6,S=g&63;m||(S=64,c||(T=64)),s.push(n[_],n[E],n[T],n[S])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const E=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new TD;const T=l<<2|d>>4;if(s.push(T),g!==64){const S=d<<4&240|g>>2;if(s.push(S),E!==64){const N=g<<6&192|E;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AD=function(t){const e=Pw(t);return Vw.encodeByteArray(e,!0)},Gd=function(t){return AD(t).replace(/\./g,"")},Lw=function(t){try{return Vw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=()=>SD().__FIREBASE_DEFAULTS__,wD=()=>{if(typeof process>"u"||typeof iT>"u")return;const t=iT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ID=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lw(t[1]);return e&&JSON.parse(e)},Ef=()=>{try{return ED()||xD()||wD()||ID()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kw=t=>{var e,n;return(n=(e=Ef())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Uw=t=>{const e=kw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},jw=()=>{var t;return(t=Ef())===null||t===void 0?void 0:t.config},Bw=t=>{var e;return(e=Ef())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ly(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gd(JSON.stringify(n)),Gd(JSON.stringify(c)),""].join(".")}const Qc={};function ND(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?t.emulator.push(e):t.prod.push(e);return t}function CD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sT=!1;function ky(t,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||Qc[t]===e||Qc[t]||sT)return;Qc[t]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=ND().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{sT=!0,c()},T}function _(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=CD(s),S=n("text"),N=document.getElementById(S)||document.createElement("span"),V=n("learnmore"),C=document.getElementById(V)||document.createElement("a"),G=n("preprendIcon"),Z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const H=T.element;d(H),_(C,V);const X=g();m(Z,G),H.append(Z,N,C,X),document.body.appendChild(H)}l?(N.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function DD(){var t;const e=(t=Ef())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LD(){const t=wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kD(){return!DD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UD(){try{return typeof indexedDB=="object"}catch{return!1}}function jD(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="FirebaseError";class gs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=BD,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?FD(l,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new gs(a,d,s)}}function FD(t,e){return t.replace(zD,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const zD=/\{\$([^}]+)}/g;function HD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ro(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const l=t[a],c=e[a];if(rT(l)&&rT(c)){if(!ro(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function rT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function zc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GD(t,e){const n=new qD(t,e);return n.subscribe.bind(n)}class qD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YD(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=eg),a.error===void 0&&(a.error=eg),a.complete===void 0&&(a.complete=eg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class na{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new RD;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XD(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$D(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $D(t){return t===Xa?void 0:t}function XD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const WD={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},JD=He.INFO,ZD={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},eM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=ZD[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=JD,this._logHandler=eM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const tM=(t,e)=>e.some(n=>t instanceof n);let aT,oT;function nM(){return aT||(aT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iM(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zw=new WeakMap,Og=new WeakMap,Hw=new WeakMap,tg=new WeakMap,jy=new WeakMap;function sM(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Qr(t.result)),a()},c=()=>{s(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&zw.set(n,t)}).catch(()=>{}),jy.set(e,t),e}function rM(t){if(Og.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});Og.set(t,e)}let Dg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aM(t){Dg=t(Dg)}function oM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ng(this),e,...n);return Hw.set(s,e.sort?e.sort():[e]),Qr(s)}:iM().includes(t)?function(...e){return t.apply(ng(this),e),Qr(zw.get(this))}:function(...e){return Qr(t.apply(ng(this),e))}}function lM(t){return typeof t=="function"?oM(t):(t instanceof IDBTransaction&&rM(t),tM(t,nM())?new Proxy(t,Dg):t)}function Qr(t){if(t instanceof IDBRequest)return sM(t);if(tg.has(t))return tg.get(t);const e=lM(t);return e!==t&&(tg.set(t,e),jy.set(e,t)),e}const ng=t=>jy.get(t);function cM(t,e,{blocked:n,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Qr(c);return s&&c.addEventListener("upgradeneeded",m=>{s(Qr(c.result),m.oldVersion,m.newVersion,Qr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const uM=["get","getKey","getAll","getAllKeys","count"],hM=["put","add","delete","clear"],ig=new Map;function lT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ig.get(e))return ig.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=hM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||uM.includes(n)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),a&&m.done]))[0]};return ig.set(e,l),l}aM(t=>({...t,get:(e,n,s)=>lT(e,n)||t.get(e,n,s),has:(e,n)=>!!lT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",cT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Uy("@firebase/app"),mM="@firebase/app-compat",pM="@firebase/analytics-compat",gM="@firebase/analytics",yM="@firebase/app-check-compat",_M="@firebase/app-check",vM="@firebase/auth",EM="@firebase/auth-compat",bM="@firebase/database",TM="@firebase/data-connect",AM="@firebase/database-compat",SM="@firebase/functions",xM="@firebase/functions-compat",wM="@firebase/installations",IM="@firebase/installations-compat",RM="@firebase/messaging",NM="@firebase/messaging-compat",CM="@firebase/performance",OM="@firebase/performance-compat",DM="@firebase/remote-config",MM="@firebase/remote-config-compat",PM="@firebase/storage",VM="@firebase/storage-compat",LM="@firebase/firestore",kM="@firebase/ai",UM="@firebase/firestore-compat",jM="firebase",BM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",FM={[Mg]:"fire-core",[mM]:"fire-core-compat",[gM]:"fire-analytics",[pM]:"fire-analytics-compat",[_M]:"fire-app-check",[yM]:"fire-app-check-compat",[vM]:"fire-auth",[EM]:"fire-auth-compat",[bM]:"fire-rtdb",[TM]:"fire-data-connect",[AM]:"fire-rtdb-compat",[SM]:"fire-fn",[xM]:"fire-fn-compat",[wM]:"fire-iid",[IM]:"fire-iid-compat",[RM]:"fire-fcm",[NM]:"fire-fcm-compat",[CM]:"fire-perf",[OM]:"fire-perf-compat",[DM]:"fire-rc",[MM]:"fire-rc-compat",[PM]:"fire-gcs",[VM]:"fire-gcs-compat",[LM]:"fire-fst",[UM]:"fire-fst-compat",[kM]:"fire-vertex","fire-js":"fire-js",[jM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,zM=new Map,Vg=new Map;function uT(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ao(t){const e=t.name;if(Vg.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,t);for(const n of qd.values())uT(n,t);for(const n of zM.values())uT(n,t);return!0}function bf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new wu("app","Firebase",HM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=BM;function Gw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Pg,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Wr.create("bad-app-name",{appName:String(a)});if(n||(n=jw()),!n)throw Wr.create("no-options");const l=qd.get(a);if(l){if(ro(n,l.options)&&ro(s,l.config))return l;throw Wr.create("duplicate-app",{appName:a})}const c=new QD(a);for(const m of Vg.values())c.addComponent(m);const d=new GM(n,s,c);return qd.set(a,d),d}function By(t=Pg){const e=qd.get(t);if(!e&&t===Pg&&jw())return Gw();if(!e)throw Wr.create("no-app",{appName:t});return e}function as(t,e,n){var s;let a=(s=FM[t])!==null&&s!==void 0?s:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(d.join(" "));return}ao(new na(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="firebase-heartbeat-database",YM=1,cu="firebase-heartbeat-store";let sg=null;function qw(){return sg||(sg=cM(qM,YM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),sg}async function KM(t){try{const n=(await qw()).transaction(cu),s=await n.objectStore(cu).get(Yw(t));return await n.done,s}catch(e){if(e instanceof gs)Xs.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function hT(t,e){try{const s=(await qw()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,Yw(t)),await s.done}catch(n){if(n instanceof gs)Xs.warn(n.message);else{const s=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(s.message)}}}function Yw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=1024,XM=30;class QM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=dT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>XM){const c=ZM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dT(),{heartbeatsToSend:s,unsentEntries:a}=WM(this._heartbeatsCache.heartbeats),l=Gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Xs.warn(n),""}}}function dT(){return new Date().toISOString().substring(0,10)}function WM(t,e=$M){const n=[];let s=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),fT(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),fT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class JM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UD()?jD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return hT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return hT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function fT(t){return Gd(JSON.stringify({version:2,heartbeats:t})).length}function ZM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){ao(new na("platform-logger",e=>new dM(e),"PRIVATE")),ao(new na("heartbeat",e=>new QM(e),"PRIVATE")),as(Mg,cT,t),as(Mg,cT,"esm2017"),as("fire-js","")}eP("");function Fy(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function Kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tP=Kw,$w=new wu("auth","Firebase",Kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Uy("@firebase/auth");function nP(t,...e){Yd.logLevel<=He.WARN&&Yd.warn(`Auth (${po}): ${t}`,...e)}function Nd(t,...e){Yd.logLevel<=He.ERROR&&Yd.error(`Auth (${po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,...e){throw zy(t,...e)}function os(t,...e){return zy(t,...e)}function Xw(t,e,n){const s=Object.assign(Object.assign({},tP()),{[e]:n});return new wu("auth","Firebase",s).create(e,{appName:t.name})}function Ks(t){return Xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zy(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return $w.create(t,...e)}function Re(t,e,...n){if(!t)throw zy(e,...n)}function Gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function Qs(t,e){t||Gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iP(){return mT()==="http:"||mT()==="https:"}function mT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iP()||PD()||"connection"in navigator)?navigator.onLine:!0}function rP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qs(n>e,"Short delay should be less than long delay!"),this.isMobile=OD()||VD()}get(){return sP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e){Qs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lP=new Ru(3e4,6e4);function fa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ma(t,e,n,s,a={}){return Ww(t,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Iu(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:m},l);return MD()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&da(t.emulatorConfig.host)&&(g.credentials="include"),Qw.fetch()(await Jw(t,t.config.apiHost,n,d),g)})}async function Ww(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},aP),e);try{const a=new uP(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw dd(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw dd(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw dd(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw dd(t,"user-disabled",c);const _=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Xw(t,_,g);zi(t,_)}}catch(a){if(a instanceof gs)throw a;zi(t,"network-request-failed",{message:String(a)})}}async function Nu(t,e,n,s,a={}){const l=await ma(t,e,n,s,a);return"mfaPendingCredential"in l&&zi(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function Jw(t,e,n,s){const a=`${e}${n}?${s}`,l=t,c=l.config.emulator?Hy(t.config,a):`${t.config.apiScheme}://${a}`;return oP.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function cP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(os(this.auth,"network-request-failed")),lP.get())})}}function dd(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=os(t,e,s);return a.customData._tokenResponse=n,a}function pT(t){return t!==void 0&&t.enterprise!==void 0}class hP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dP(t,e){return ma(t,"GET","/v2/recaptchaConfig",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,e){return ma(t,"POST","/v1/accounts:delete",e)}async function Kd(t,e){return ma(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mP(t,e=!1){const n=Tt(t),s=await n.getIdToken(e),a=Gy(s);Re(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Wc(rg(a.auth_time)),issuedAtTime:Wc(rg(a.iat)),expirationTime:Wc(rg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function rg(t){return Number(t)*1e3}function Gy(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Lw(n);return a?JSON.parse(a):(Nd("Failed to decode base64 JWT payload"),null)}catch(a){return Nd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function gT(t){const e=Gy(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gs&&pP(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function pP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t){var e;const n=t.auth,s=await t.getIdToken(),a=await uu(t,Kd(n,{idToken:s}));Re(a==null?void 0:a.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Zw(l.providerUserInfo):[],d=_P(t.providerData,c),m=t.isAnonymous,g=!(t.email&&l.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new kg(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(t,E)}async function yP(t){const e=Tt(t);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _P(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Zw(t){return t.map(e=>{var{providerId:n}=e,s=Fy(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){const n=await Ww(t,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await Jw(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:s};return t.emulatorConfig&&da(t.emulatorConfig.host)&&(m.credentials="include"),Qw.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EP(t,e){return ma(t,"POST","/v2/accounts:revokeToken",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=gT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:l}=await vP(e,n);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:l}=n,c=new vl;return s&&(Re(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Re(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return Gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ji{constructor(e){var{uid:n,auth:s,stsTokenManager:a}=e,l=Fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new kg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await uu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mP(this,e)}reload(){return yP(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await $d(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await uu(this,fP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,a,l,c,d,m,g,_;const E=(s=n.displayName)!==null&&s!==void 0?s:void 0,T=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,N=(c=n.photoURL)!==null&&c!==void 0?c:void 0,V=(d=n.tenantId)!==null&&d!==void 0?d:void 0,C=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,G=(g=n.createdAt)!==null&&g!==void 0?g:void 0,Z=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:H,emailVerified:X,isAnonymous:ce,providerData:he,stsTokenManager:O}=n;Re(H&&O,e,"internal-error");const I=vl.fromJSON(this.name,O);Re(typeof H=="string",e,"internal-error"),Br(E,e.name),Br(T,e.name),Re(typeof X=="boolean",e,"internal-error"),Re(typeof ce=="boolean",e,"internal-error"),Br(S,e.name),Br(N,e.name),Br(V,e.name),Br(C,e.name),Br(G,e.name),Br(Z,e.name);const R=new ji({uid:H,auth:e,email:T,emailVerified:X,displayName:E,isAnonymous:ce,photoURL:N,phoneNumber:S,tenantId:V,stsTokenManager:I,createdAt:G,lastLoginAt:Z});return he&&Array.isArray(he)&&(R.providerData=he.map(M=>Object.assign({},M))),C&&(R._redirectEventId=C),R}static async _fromIdTokenResponse(e,n,s=!1){const a=new vl;a.updateFromServerResponse(n);const l=new ji({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await $d(l),l}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Zw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new vl;d.updateFromIdToken(s);const m=new ji({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new kg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;function qs(t){Qs(t instanceof Function,"Expected a class definition");let e=yT.get(t);return e?(Qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eI.type="NONE";const _T=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e,n){return`firebase:${t}:${e}:${n}`}class El{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Cd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Cd("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kd(this.auth,{idToken:e}).catch(()=>{});return n?ji._fromGetAccountInfoResponse(this.auth,n,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new El(qs(_T),e,s);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||qs(_T);const c=Cd(s,e.config.apiKey,e.name);let d=null;for(const g of n)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const T=await Kd(e,{idToken:_}).catch(()=>{});if(!T)break;E=await ji._fromGetAccountInfoResponse(e,T,_)}else E=ji._fromJSON(e,_);g!==l&&(d=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new El(l,e,s):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new El(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aI(e))return"Blackberry";if(oI(e))return"Webos";if(nI(e))return"Safari";if((e.includes("chrome/")||iI(e))&&!e.includes("edge/"))return"Chrome";if(rI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tI(t=wn()){return/firefox\//i.test(t)}function nI(t=wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iI(t=wn()){return/crios\//i.test(t)}function sI(t=wn()){return/iemobile/i.test(t)}function rI(t=wn()){return/android/i.test(t)}function aI(t=wn()){return/blackberry/i.test(t)}function oI(t=wn()){return/webos/i.test(t)}function qy(t=wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bP(t=wn()){var e;return qy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TP(){return LD()&&document.documentMode===10}function lI(t=wn()){return qy(t)||rI(t)||oI(t)||aI(t)||/windows phone/i.test(t)||sI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e=[]){let n;switch(t){case"Browser":n=vT(wn());break;case"Worker":n=`${vT(wn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e={}){return ma(t,"GET","/v2/passwordPolicy",fa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=6;class wP{constructor(e){var n,s,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:xP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ET(this),this.idTokenSubscription=new ET(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qs(n)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kd(this,{idToken:e}),s=await ji._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(Ks(this));const n=e?Tt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SP(this),n=new wP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await EP(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qs(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,a);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function go(t){return Tt(t)}class ET{constructor(e){this.auth=e,this.observer=null,this.addObserver=GD(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RP(t){Tf=t}function uI(t){return Tf.loadJS(t)}function NP(){return Tf.recaptchaEnterpriseScript}function CP(){return Tf.gapiScript}function OP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class DP{constructor(){this.enterprise=new MP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PP="recaptcha-enterprise",hI="NO_RECAPTCHA";class VP{constructor(e){this.type=PP,this.auth=go(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{dP(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new hP(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;pT(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(hI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!n&&pT(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=NP();m.length!==0&&(m+=d),uI(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function bT(t,e,n,s=!1,a=!1){const l=new VP(t);let c;if(a)c=hI;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ug(t,e,n,s,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await bT(t,e,n,n==="getOobCode");return s(t,c)}else return s(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await bT(t,e,n,n==="getOobCode");return s(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){const n=bf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(ro(l,e??{}))return a;zi(a,"already-initialized")}return n.initialize({options:e})}function kP(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function UP(t,e,n){const s=go(t);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=dI(e),{host:c,port:d}=jP(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(ro(g,s.config.emulator)&&ro(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,da(c)?(Ly(`${l}//${c}${m}`),ky("Auth",!0)):BP()}function dI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jP(t){const e=dI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:TT(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:TT(c)}}}function TT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gs("not implemented")}_getIdTokenResponse(e){return Gs("not implemented")}_linkToIdToken(e,n){return Gs("not implemented")}_getReauthenticationResolver(e){return Gs("not implemented")}}async function FP(t,e){return ma(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){return Nu(t,"POST","/v1/accounts:signInWithPassword",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return Nu(t,"POST","/v1/accounts:signInWithEmailLink",fa(t,e))}async function GP(t,e){return Nu(t,"POST","/v1/accounts:signInWithEmailLink",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends Yy{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new hu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new hu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,n,"signInWithPassword",zP);case"emailLink":return HP(e,{email:this._email,oobCode:this._password});default:zi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,s,"signUpPassword",FP);case"emailLink":return GP(e,{idToken:n,email:this._email,oobCode:this._password});default:zi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Nu(t,"POST","/v1/accounts:signInWithIdp",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="http://localhost";class oo extends Yy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=n,l=Fy(n,["providerId","signInMethod"]);if(!s||!a)return null;const c=new oo(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,bl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:qP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KP(t){const e=Fc(zc(t)).link,n=e?Fc(zc(e)).deep_link_id:null,s=Fc(zc(t)).deep_link_id;return(s?Fc(zc(s)).link:null)||s||n||e||t}class Ky{constructor(e){var n,s,a,l,c,d;const m=Fc(zc(e)),g=(n=m.apiKey)!==null&&n!==void 0?n:null,_=(s=m.oobCode)!==null&&s!==void 0?s:null,E=YP((a=m.mode)!==null&&a!==void 0?a:null);Re(g&&_&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=_,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=KP(e);try{return new Ky(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ky.parseLink(n);return Re(s,"argument-error"),hu._fromEmailAndCode(e,s.code,s.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends fI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Cu{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Gr.credential(n,s)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Cu{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Cu{constructor(){super("twitter.com")}static credential(e,n){return oo._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Yr.credential(n,s)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(t,e){return Nu(t,"POST","/v1/accounts:signUp",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const l=await ji._fromIdTokenResponse(e,s,a),c=AT(s);return new lo({user:l,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=AT(s);return new lo({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function AT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends gs{constructor(e,n,s,a){var l;super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Xd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new Xd(e,n,s,a)}}function mI(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xd._fromErrorAndOperation(t,l,e,s):l})}async function XP(t,e,n=!1){const s=await uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e,n=!1){const{auth:s}=t;if(li(s.app))return Promise.reject(Ks(s));const a="reauthenticate";try{const l=await uu(t,mI(s,a,e,t),n);Re(l.idToken,s,"internal-error");const c=Gy(l.idToken);Re(c,s,"internal-error");const{sub:d}=c;return Re(t.uid===d,s,"user-mismatch"),lo._forOperation(t,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&zi(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(t,e,n=!1){if(li(t.app))return Promise.reject(Ks(t));const s="signIn",a=await mI(t,s,e),l=await lo._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(l.user),l}async function WP(t,e){return pI(go(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(t){const e=go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JP(t,e,n){if(li(t.app))return Promise.reject(Ks(t));const s=go(t),c=await Ug(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$P).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&gI(t),m}),d=await lo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function ZP(t,e,n){return li(t.app)?Promise.reject(Ks(t)):WP(Tt(t),Ol.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&gI(t),s})}function e2(t,e,n,s){return Tt(t).onIdTokenChanged(e,n,s)}function t2(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function n2(t,e,n,s){return Tt(t).onAuthStateChanged(e,n,s)}function i2(t){return Tt(t).signOut()}const Qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qd,"1"),this.storage.removeItem(Qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=1e3,r2=10;class _I extends yI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);TP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,r2):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},s2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_I.type="LOCAL";const a2=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends yI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vI.type="SESSION";const EI=vI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new Af(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async g=>g(n.origin,l)),m=await o2(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=$y("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function c2(t){ls().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function u2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function d2(){return bI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebaseLocalStorageDb",f2=1,Wd="firebaseLocalStorage",AI="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sf(t,e){return t.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function m2(){const t=indexedDB.deleteDatabase(TI);return new Ou(t).toPromise()}function jg(){const t=indexedDB.open(TI,f2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Wd,{keyPath:AI})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Wd)?e(s):(s.close(),await m2(),e(await jg()))})})}async function ST(t,e,n){const s=Sf(t,!0).put({[AI]:e,value:n});return new Ou(s).toPromise()}async function p2(t,e){const n=Sf(t,!1).get(e),s=await new Ou(n).toPromise();return s===void 0?null:s.value}function xT(t,e){const n=Sf(t,!0).delete(e);return new Ou(n).toPromise()}const g2=800,y2=3;class SI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>y2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Af._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await ST(e,Qd,"1"),await xT(e,Qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ST(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>p2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Sf(a,!1).getAll();return new Ou(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SI.type="LOCAL";const _2=SI;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){return e?qs(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends Yy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function E2(t){return pI(t.auth,new Xy(t),t.bypassAuthState)}function b2(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),QP(n,new Xy(t),t.bypassAuthState)}async function T2(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),XP(n,new Xy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E2;case"linkViaPopup":case"linkViaRedirect":return T2;case"reauthViaPopup":case"reauthViaRedirect":return b2;default:zi(this.auth,"internal-error")}}resolve(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Ru(2e3,1e4);class fl extends xI{constructor(e,n,s,a,l){super(e,n,a,l),this.provider=s,this.authWindow=null,this.pollId=null,fl.currentPopupAction&&fl.currentPopupAction.cancel(),fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(os(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(os(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(os(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A2.get())};e()}}fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="pendingRedirect",Od=new Map;class x2 extends xI{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const s=await w2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w2(t,e){const n=N2(e),s=R2(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function I2(t,e){Od.set(t._key(),e)}function R2(t){return qs(t._redirectPersistence)}function N2(t){return Cd(S2,t.config.apiKey,t.name)}async function C2(t,e,n=!1){if(li(t.app))return Promise.reject(Ks(t));const s=go(t),a=v2(s,e),c=await new x2(s,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=600*1e3;class D2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!wI(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(os(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O2&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e={}){return ma(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L2=/^https?/;async function k2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P2(t);for(const n of e)try{if(U2(n))return}catch{}zi(t,"unauthorized-domain")}function U2(t){const e=Lg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!L2.test(n))return!1;if(V2.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new Ru(3e4,6e4);function IT(){const t=ls().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B2(t){return new Promise((e,n)=>{var s,a,l;function c(){IT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IT(),n(os(t,"network-request-failed"))},timeout:j2.get()})}if(!((a=(s=ls().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=ls().gapi)===null||l===void 0)&&l.load)c();else{const d=OP("iframefcb");return ls()[d]=()=>{gapi.load?c():n(os(t,"network-request-failed"))},uI(`${CP()}?onload=${d}`).catch(m=>n(m))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function F2(t){return Dd=Dd||B2(t),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Ru(5e3,15e3),H2="__/auth/iframe",G2="emulator/auth/iframe",q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K2(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hy(e,G2):`https://${t.config.authDomain}/${H2}`,s={apiKey:e.apiKey,appName:t.name,v:po},a=Y2.get(t.config.apiHost);a&&(s.eid=a);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${Iu(s).slice(1)}`}async function $2(t){const e=await F2(t),n=ls().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:K2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q2,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=os(t,"network-request-failed"),d=ls().setTimeout(()=>{l(c)},z2.get());function m(){ls().clearTimeout(d),a(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q2=500,W2=600,J2="_blank",Z2="http://localhost";class RT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eV(t,e,n,s=Q2,a=W2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const m=Object.assign(Object.assign({},X2),{width:s.toString(),height:a.toString(),top:l,left:c}),g=wn().toLowerCase();n&&(d=iI(g)?J2:n),tI(g)&&(e=e||Z2,m.scrollbars="yes");const _=Object.entries(m).reduce((T,[S,N])=>`${T}${S}=${N},`,"");if(bP(g)&&d!=="_self")return tV(e||"",d),new RT(null);const E=window.open(e||"",d,_);Re(E,t,"popup-blocked");try{E.focus()}catch{}return new RT(E)}function tV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="__/auth/handler",iV="emulator/auth/handler",sV=encodeURIComponent("fac");async function NT(t,e,n,s,a,l){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:po,eventId:a};if(e instanceof fI){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",HD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Cu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await t._getAppCheckToken(),g=m?`#${sV}=${encodeURIComponent(m)}`:"";return`${rV(t)}?${Iu(d).slice(1)}${g}`}function rV({config:t}){return t.emulator?Hy(t,iV):`https://${t.authDomain}/${nV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="webStorageSupport";class aV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=C2,this._overrideRedirectResult=I2}async _openPopup(e,n,s,a){var l;Qs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await NT(e,n,s,Lg(),a);return eV(e,c,$y())}async _openRedirect(e,n,s,a){await this._originValidation(e);const l=await NT(e,n,s,Lg(),a);return c2(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Qs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await $2(e),s=new D2(e);return n.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ag,{type:ag},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[ag];c!==void 0&&n(!!c),zi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lI()||nI()||qy()}}const oV=aV;var CT="@firebase/auth",OT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uV(t){ao(new na("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cI(t)},g=new IP(s,a,l,m);return kP(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new na("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(s=>new lV(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(CT,OT,cV(t)),as(CT,OT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=300,dV=Bw("authIdTokenMaxAge")||hV;let DT=null;const fV=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>dV)return;const a=n==null?void 0:n.token;DT!==a&&(DT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mV(t=By()){const e=bf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LP(t,{popupRedirectResolver:oV,persistence:[_2,a2,EI]}),s=Bw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=fV(l.toString());t2(n,c,()=>c(n.currentUser)),e2(n,d=>c(d))}}const a=kw("auth");return a&&UP(n,`http://${a}`),n}function pV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RP({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const l=os("internal-error");l.customData=a,n(l)},s.type="text/javascript",s.charset="UTF-8",pV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uV("Browser");var gV="firebase",yV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(gV,yV,"app");var MT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,II;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function R(){}R.prototype=I.prototype,O.D=I.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(M,U,B){for(var D=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)D[Ye-2]=arguments[Ye];return I.prototype[U].apply(M,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,I,R){R||(R=0);var M=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)M[U]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(U=0;16>U;++U)M[U]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=O.g[0],R=O.g[1],U=O.g[2];var B=O.g[3],D=I+(B^R&(U^B))+M[0]+3614090360&4294967295;I=R+(D<<7&4294967295|D>>>25),D=B+(U^I&(R^U))+M[1]+3905402710&4294967295,B=I+(D<<12&4294967295|D>>>20),D=U+(R^B&(I^R))+M[2]+606105819&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(I^U&(B^I))+M[3]+3250441966&4294967295,R=U+(D<<22&4294967295|D>>>10),D=I+(B^R&(U^B))+M[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=B+(U^I&(R^U))+M[5]+1200080426&4294967295,B=I+(D<<12&4294967295|D>>>20),D=U+(R^B&(I^R))+M[6]+2821735955&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(I^U&(B^I))+M[7]+4249261313&4294967295,R=U+(D<<22&4294967295|D>>>10),D=I+(B^R&(U^B))+M[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=B+(U^I&(R^U))+M[9]+2336552879&4294967295,B=I+(D<<12&4294967295|D>>>20),D=U+(R^B&(I^R))+M[10]+4294925233&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(I^U&(B^I))+M[11]+2304563134&4294967295,R=U+(D<<22&4294967295|D>>>10),D=I+(B^R&(U^B))+M[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=B+(U^I&(R^U))+M[13]+4254626195&4294967295,B=I+(D<<12&4294967295|D>>>20),D=U+(R^B&(I^R))+M[14]+2792965006&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(I^U&(B^I))+M[15]+1236535329&4294967295,R=U+(D<<22&4294967295|D>>>10),D=I+(U^B&(R^U))+M[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(I^R))+M[6]+3225465664&4294967295,B=I+(D<<9&4294967295|D>>>23),D=U+(I^R&(B^I))+M[11]+643717713&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^I&(U^B))+M[0]+3921069994&4294967295,R=U+(D<<20&4294967295|D>>>12),D=I+(U^B&(R^U))+M[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(I^R))+M[10]+38016083&4294967295,B=I+(D<<9&4294967295|D>>>23),D=U+(I^R&(B^I))+M[15]+3634488961&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^I&(U^B))+M[4]+3889429448&4294967295,R=U+(D<<20&4294967295|D>>>12),D=I+(U^B&(R^U))+M[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(I^R))+M[14]+3275163606&4294967295,B=I+(D<<9&4294967295|D>>>23),D=U+(I^R&(B^I))+M[3]+4107603335&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^I&(U^B))+M[8]+1163531501&4294967295,R=U+(D<<20&4294967295|D>>>12),D=I+(U^B&(R^U))+M[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(I^R))+M[2]+4243563512&4294967295,B=I+(D<<9&4294967295|D>>>23),D=U+(I^R&(B^I))+M[7]+1735328473&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^I&(U^B))+M[12]+2368359562&4294967295,R=U+(D<<20&4294967295|D>>>12),D=I+(R^U^B)+M[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=B+(I^R^U)+M[8]+2272392833&4294967295,B=I+(D<<11&4294967295|D>>>21),D=U+(B^I^R)+M[11]+1839030562&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^I)+M[14]+4259657740&4294967295,R=U+(D<<23&4294967295|D>>>9),D=I+(R^U^B)+M[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=B+(I^R^U)+M[4]+1272893353&4294967295,B=I+(D<<11&4294967295|D>>>21),D=U+(B^I^R)+M[7]+4139469664&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^I)+M[10]+3200236656&4294967295,R=U+(D<<23&4294967295|D>>>9),D=I+(R^U^B)+M[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=B+(I^R^U)+M[0]+3936430074&4294967295,B=I+(D<<11&4294967295|D>>>21),D=U+(B^I^R)+M[3]+3572445317&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^I)+M[6]+76029189&4294967295,R=U+(D<<23&4294967295|D>>>9),D=I+(R^U^B)+M[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=B+(I^R^U)+M[12]+3873151461&4294967295,B=I+(D<<11&4294967295|D>>>21),D=U+(B^I^R)+M[15]+530742520&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^I)+M[2]+3299628645&4294967295,R=U+(D<<23&4294967295|D>>>9),D=I+(U^(R|~B))+M[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=B+(R^(I|~U))+M[7]+1126891415&4294967295,B=I+(D<<10&4294967295|D>>>22),D=U+(I^(B|~R))+M[14]+2878612391&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~I))+M[5]+4237533241&4294967295,R=U+(D<<21&4294967295|D>>>11),D=I+(U^(R|~B))+M[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=B+(R^(I|~U))+M[3]+2399980690&4294967295,B=I+(D<<10&4294967295|D>>>22),D=U+(I^(B|~R))+M[10]+4293915773&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~I))+M[1]+2240044497&4294967295,R=U+(D<<21&4294967295|D>>>11),D=I+(U^(R|~B))+M[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=B+(R^(I|~U))+M[15]+4264355552&4294967295,B=I+(D<<10&4294967295|D>>>22),D=U+(I^(B|~R))+M[6]+2734768916&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~I))+M[13]+1309151649&4294967295,R=U+(D<<21&4294967295|D>>>11),D=I+(U^(R|~B))+M[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=B+(R^(I|~U))+M[11]+3174756917&4294967295,B=I+(D<<10&4294967295|D>>>22),D=U+(I^(B|~R))+M[2]+718787259&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~I))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+B&4294967295}s.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var R=I-this.blockSize,M=this.B,U=this.h,B=0;B<I;){if(U==0)for(;B<=R;)a(this,O,B),B+=this.blockSize;if(typeof O=="string"){for(;B<I;)if(M[U++]=O.charCodeAt(B++),U==this.blockSize){a(this,M),U=0;break}}else for(;B<I;)if(M[U++]=O[B++],U==this.blockSize){a(this,M),U=0;break}}this.h=U,this.o+=I},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var R=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=R&255,R/=256;for(this.u(O),O=Array(16),I=R=0;4>I;++I)for(var M=0;32>M;M+=8)O[R++]=this.g[I]>>>M&255;return O};function l(O,I){var R=d;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=I(O)}function c(O,I){this.h=I;for(var R=[],M=!0,U=O.length-1;0<=U;U--){var B=O[U]|0;M&&B==I||(R[U]=B,M=!1)}this.g=R}var d={};function m(O){return-128<=O&&128>O?l(O,function(I){return new c([I|0],0>I?-1:0)}):new c([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return E;if(0>O)return C(g(-O));for(var I=[],R=1,M=0;O>=R;M++)I[M]=O/R|0,R*=4294967296;return new c(I,0)}function _(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return C(_(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(I,8)),M=E,U=0;U<O.length;U+=8){var B=Math.min(8,O.length-U),D=parseInt(O.substring(U,U+B),I);8>B?(B=g(Math.pow(I,B)),M=M.j(B).add(g(D))):(M=M.j(R),M=M.add(g(D)))}return M}var E=m(0),T=m(1),S=m(16777216);t=c.prototype,t.m=function(){if(V(this))return-C(this).m();for(var O=0,I=1,R=0;R<this.g.length;R++){var M=this.i(R);O+=(0<=M?M:4294967296+M)*I,I*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(V(this))return"-"+C(this).toString(O);for(var I=g(Math.pow(O,6)),R=this,M="";;){var U=X(R,I).g;R=G(R,U.j(I));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=U,N(R))return B+M;for(;6>B.length;)B="0"+B;M=B+M}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function V(O){return O.h==-1}t.l=function(O){return O=G(this,O),V(O)?-1:N(O)?0:1};function C(O){for(var I=O.g.length,R=[],M=0;M<I;M++)R[M]=~O.g[M];return new c(R,~O.h).add(T)}t.abs=function(){return V(this)?C(this):this},t.add=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],M=0,U=0;U<=I;U++){var B=M+(this.i(U)&65535)+(O.i(U)&65535),D=(B>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);M=D>>>16,B&=65535,D&=65535,R[U]=D<<16|B}return new c(R,R[R.length-1]&-2147483648?-1:0)};function G(O,I){return O.add(C(I))}t.j=function(O){if(N(this)||N(O))return E;if(V(this))return V(O)?C(this).j(C(O)):C(C(this).j(O));if(V(O))return C(this.j(C(O)));if(0>this.l(S)&&0>O.l(S))return g(this.m()*O.m());for(var I=this.g.length+O.g.length,R=[],M=0;M<2*I;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var U=0;U<O.g.length;U++){var B=this.i(M)>>>16,D=this.i(M)&65535,Ye=O.i(U)>>>16,Je=O.i(U)&65535;R[2*M+2*U]+=D*Je,Z(R,2*M+2*U),R[2*M+2*U+1]+=B*Je,Z(R,2*M+2*U+1),R[2*M+2*U+1]+=D*Ye,Z(R,2*M+2*U+1),R[2*M+2*U+2]+=B*Ye,Z(R,2*M+2*U+2)}for(M=0;M<I;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=I;M<2*I;M++)R[M]=0;return new c(R,0)};function Z(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function H(O,I){this.g=O,this.h=I}function X(O,I){if(N(I))throw Error("division by zero");if(N(O))return new H(E,E);if(V(O))return I=X(C(O),I),new H(C(I.g),C(I.h));if(V(I))return I=X(O,C(I)),new H(C(I.g),I.h);if(30<O.g.length){if(V(O)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var R=T,M=I;0>=M.l(O);)R=ce(R),M=ce(M);var U=he(R,1),B=he(M,1);for(M=he(M,2),R=he(R,2);!N(M);){var D=B.add(M);0>=D.l(O)&&(U=U.add(R),B=D),M=he(M,1),R=he(R,1)}return I=G(O,U.j(I)),new H(U,I)}for(U=E;0<=O.l(I);){for(R=Math.max(1,Math.floor(O.m()/I.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),B=g(R),D=B.j(I);V(D)||0<D.l(O);)R-=M,B=g(R),D=B.j(I);N(B)&&(B=T),U=U.add(B),O=G(O,D)}return new H(U,O)}t.A=function(O){return X(this,O).h},t.and=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)&O.i(M);return new c(R,this.h&O.h)},t.or=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)|O.i(M);return new c(R,this.h|O.h)},t.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)^O.i(M);return new c(R,this.h^O.h)};function ce(O){for(var I=O.g.length+1,R=[],M=0;M<I;M++)R[M]=O.i(M)<<1|O.i(M-1)>>>31;return new c(R,O.h)}function he(O,I){var R=I>>5;I%=32;for(var M=O.g.length-R,U=[],B=0;B<M;B++)U[B]=0<I?O.i(B+R)>>>I|O.i(B+R+1)<<32-I:O.i(B+R);return new c(U,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,II=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Jr=c}).apply(typeof MT<"u"?MT:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RI,Hc,NI,Md,Bg,CI,OI,DI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,A){return h==Array.prototype||h==Object.prototype||(h[v]=A.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var v=0;v<h.length;++v){var A=h[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=n(this);function a(h,v){if(v)e:{var A=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in A))break e;A=A[q]}h=h[h.length-1],w=A[h],v=v(w),v!=w&&v!=null&&e(A,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var A=0,w=!1,q={next:function(){if(!w&&A<h.length){var J=A++;return{value:v(J,h[J]),done:!1}}return w=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,A){return h.call.apply(h.bind,arguments)}function E(h,v,A){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,w),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function T(h,v,A){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,T.apply(null,arguments)}function S(h,v){var A=Array.prototype.slice.call(arguments,1);return function(){var w=A.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function N(h,v){function A(){}A.prototype=v.prototype,h.aa=v.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(w,q,J){for(var de=Array(arguments.length-2),et=2;et<arguments.length;et++)de[et-2]=arguments[et];return v.prototype[q].apply(w,de)}}function V(h){const v=h.length;if(0<v){const A=Array(v);for(let w=0;w<v;w++)A[w]=h[w];return A}return[]}function C(h,v){for(let A=1;A<arguments.length;A++){const w=arguments[A];if(m(w)){const q=h.length||0,J=w.length||0;h.length=q+J;for(let de=0;de<J;de++)h[q+de]=w[de]}else h.push(w)}}class G{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Z(h){return/^[\s\xa0]*$/.test(h)}function H(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function X(h){return X[" "](h),h}X[" "]=function(){};var ce=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function he(h,v,A){for(const w in h)v.call(A,h[w],w,h)}function O(h,v){for(const A in h)v.call(void 0,h[A],A,h)}function I(h){const v={};for(const A in h)v[A]=h[A];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,v){let A,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(A in w)h[A]=w[A];for(let J=0;J<R.length;J++)A=R[J],Object.prototype.hasOwnProperty.call(w,A)&&(h[A]=w[A])}}function U(h){var v=1;h=h.split(":");const A=[];for(;0<v&&h.length;)A.push(h.shift()),v--;return h.length&&A.push(h.join(":")),A}function B(h){d.setTimeout(()=>{throw h},0)}function D(){var h=ye;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ye{constructor(){this.h=this.g=null}add(v,A){const w=Je.get();w.set(v,A),this.h?this.h.next=w:this.g=w,this.h=w}}var Je=new G(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let L,te=!1,ye=new Ye,Te=()=>{const h=d.Promise.resolve(void 0);L=()=>{h.then(k)}};var k=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(A){B(A)}var v=Je;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}te=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var re=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};d.addEventListener("test",A,v),d.removeEventListener("test",A,v)}catch{}return h})();function fe(h,v){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(ce){e:{try{X(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else A=="mouseover"?v=h.fromElement:A=="mouseout"&&(v=h.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ee[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&fe.aa.h.call(this)}}N(fe,ue);var Ee={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),ft=0;function $e(h,v,A,w,q){this.listener=h,this.proxy=null,this.src=v,this.type=A,this.capture=!!w,this.ha=q,this.key=++ft,this.da=this.fa=!1}function gn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function In(h){this.src=h,this.g={},this.h=0}In.prototype.add=function(h,v,A,w,q){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var de=$t(h,v,w,q);return-1<de?(v=h[de],A||(v.fa=!1)):(v=new $e(v,this.src,J,!!w,q),v.fa=A,h.push(v)),v};function an(h,v){var A=v.type;if(A in h.g){var w=h.g[A],q=Array.prototype.indexOf.call(w,v,void 0),J;(J=0<=q)&&Array.prototype.splice.call(w,q,1),J&&(gn(v),h.g[A].length==0&&(delete h.g[A],h.h--))}}function $t(h,v,A,w){for(var q=0;q<h.length;++q){var J=h[q];if(!J.da&&J.listener==v&&J.capture==!!A&&J.ha==w)return q}return-1}var yn="closure_lm_"+(1e6*Math.random()|0),Bn={};function Rn(h,v,A,w,q){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Rn(h,v[J],A,w,q);return null}return A=_a(A),h&&h[Ie]?h.K(v,A,g(w)?!!w.capture:!1,q):Lt(h,v,A,!1,w,q)}function Lt(h,v,A,w,q,J){if(!v)throw Error("Invalid event type");var de=g(q)?!!q.capture:!!q,et=Eo(h);if(et||(h[yn]=et=new In(h)),A=et.add(v,A,w,de,J),A.proxy)return A;if(w=Gi(),A.proxy=w,w.src=h,w.listener=A,h.addEventListener)re||(q=de),q===void 0&&(q=!1),h.addEventListener(v.toString(),w,q);else if(h.attachEvent)h.attachEvent(_s(v.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Gi(){function h(A){return v.call(h.src,h.listener,A)}const v=vo;return h}function ys(h,v,A,w,q){if(Array.isArray(v))for(var J=0;J<v.length;J++)ys(h,v[J],A,w,q);else w=g(w)?!!w.capture:!!w,A=_a(A),h&&h[Ie]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],A=$t(J,A,w,q),-1<A&&(gn(J[A]),Array.prototype.splice.call(J,A,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Eo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=$t(v,A,w,q)),(A=-1<h?v[h]:null)&&qi(A))}function qi(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ie])an(v.i,h);else{var A=h.type,w=h.proxy;v.removeEventListener?v.removeEventListener(A,w,h.capture):v.detachEvent?v.detachEvent(_s(A),w):v.addListener&&v.removeListener&&v.removeListener(w),(A=Eo(v))?(an(A,h),A.h==0&&(A.src=null,v[yn]=null)):gn(h)}}}function _s(h){return h in Bn?Bn[h]:Bn[h]="on"+h}function vo(h,v){if(h.da)h=!0;else{v=new fe(v,this);var A=h.listener,w=h.ha||h.src;h.fa&&qi(h),h=A.call(w,v)}return h}function Eo(h){return h=h[yn],h instanceof In?h:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _a(h){return typeof h=="function"?h:(h[Jt]||(h[Jt]=function(v){return h.handleEvent(v)}),h[Jt])}function St(){ne.call(this),this.i=new In(this),this.M=this,this.F=null}N(St,ne),St.prototype[Ie]=!0,St.prototype.removeEventListener=function(h,v,A,w){ys(this,h,v,A,w)};function ct(h,v){var A,w=h.F;if(w)for(A=[];w;w=w.F)A.push(w);if(h=h.M,w=v.type||v,typeof v=="string")v=new ue(v,h);else if(v instanceof ue)v.target=v.target||h;else{var q=v;v=new ue(w,h),M(v,q)}if(q=!0,A)for(var J=A.length-1;0<=J;J--){var de=v.g=A[J];q=di(de,w,!0,v)&&q}if(de=v.g=h,q=di(de,w,!0,v)&&q,q=di(de,w,!1,v)&&q,A)for(J=0;J<A.length;J++)de=v.g=A[J],q=di(de,w,!1,v)&&q}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var A=h.g[v],w=0;w<A.length;w++)gn(A[w]);delete h.g[v],h.h--}}this.F=null},St.prototype.K=function(h,v,A,w){return this.i.add(String(h),v,!1,A,w)},St.prototype.L=function(h,v,A,w){return this.i.add(String(h),v,!0,A,w)};function di(h,v,A,w){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,J=0;J<v.length;++J){var de=v[J];if(de&&!de.da&&de.capture==A){var et=de.listener,jt=de.ha||de.src;de.fa&&an(h.i,de),q=et.call(jt,w)!==!1&&q}}return q&&!w.defaultPrevented}function bo(h,v,A){if(typeof h=="function")A&&(h=T(h,A));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(h,v||0)}function vs(h){h.g=bo(()=>{h.g=null,h.i&&(h.i=!1,vs(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nr extends ne{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:vs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(h){ne.call(this),this.h=h,this.g={}}N(fi,ne);var Ae=[];function ht(h){he(h.g,function(v,A){this.g.hasOwnProperty(A)&&qi(v)},h),h.g={}}fi.prototype.N=function(){fi.aa.N.call(this),ht(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=d.JSON.stringify,Zt=d.JSON.parse,Bl=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function va(){}va.prototype.h=null;function ir(h){return h.h||(h.h=h.i())}function Es(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yi(){ue.call(this,"d")}N(Yi,ue);function Wn(){ue.call(this,"c")}N(Wn,ue);var Fn={},Ki=null;function sr(){return Ki=Ki||new St}Fn.La="serverreachability";function Ea(h){ue.call(this,Fn.La,h)}N(Ea,ue);function Ci(h){const v=sr();ct(v,new Ea(v))}Fn.STAT_EVENT="statevent";function Nn(h,v){ue.call(this,Fn.STAT_EVENT,h),this.stat=v}N(Nn,ue);function Ut(h){const v=sr();ct(v,new Nn(v,h))}Fn.Ma="timingevent";function ba(h,v){ue.call(this,Fn.Ma,h),this.size=v}N(ba,ue);function $i(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Oi(){this.g=!0}Oi.prototype.xa=function(){this.g=!1};function Ta(h,v,A,w,q,J){h.info(function(){if(h.g)if(J)for(var de="",et=J.split("&"),jt=0;jt<et.length;jt++){var ke=et[jt].split("=");if(1<ke.length){var tn=ke[0];ke=ke[1];var nn=tn.split("_");de=2<=nn.length&&nn[1]=="type"?de+(tn+"="+ke+"&"):de+(tn+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+v+`
`+A+`
`+de})}function F(h,v,A,w,q,J,de){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+v+`
`+A+`
`+J+" "+de})}function me(h,v,A,w){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Oe(h,A)+(w?" "+w:"")})}function rt(h,v){h.info(function(){return"TIMEOUT: "+v})}Oi.prototype.info=function(){};function Oe(h,v){if(!h.g)return v;if(!v)return null;try{var A=JSON.parse(v);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var w=A[h];if(!(2>w.length)){var q=w[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<q.length;de++)q[de]=""}}}}return kt(A)}catch{return v}}var De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_n;function Xi(){}N(Xi,va),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},_n=new Xi;function Jn(h,v,A,w){this.j=h,this.i=v,this.l=A,this.R=w||1,this.U=new fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new To}function To(){this.i=null,this.g="",this.h=!1}var Fl={},bs={};function Aa(h,v,A){h.L=1,h.v=wa(xt(v)),h.m=A,h.P=!0,Ts(h,null)}function Ts(h,v){h.F=Date.now(),Di(h),h.A=xt(h.v);var A=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),xs(A.i,"t",w),h.C=0,A=h.j.J,h.h=new To,h.g=rh(h.j,A?v:null,!h.m),0<h.O&&(h.M=new nr(T(h.Y,h,h.g),h.O)),v=h.U,A=h.g,w=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ae[0]=q.toString()),q=Ae);for(var J=0;J<q.length;J++){var de=Rn(A,q[J],w||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Ci(),Ta(h.i,h.u,h.A,h.l,h.R,h.m)}Jn.prototype.ca=function(h){h=h.target;const v=this.M;v&&Dn(h)==3?v.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const nn=Dn(this.g);var v=this.g.Ba();const yr=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||Na(this.g)))){this.J||nn!=4||v==7||(v==8||0>=yr?Ci(3):Ci(2)),Ao(this);var A=this.g.Z();this.X=A;t:if(As(this)){var w=Na(this.g);h="";var q=w.length,J=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),rr(this);var de="";break t}this.h.i=new d.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(w[v],{stream:!(J&&v==q-1)});w.length=0,this.h.g+=h,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=A==200,F(this.i,this.u,this.A,this.l,this.R,nn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var et,jt=this.g;if((et=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(et)){var ke=et;break t}}ke=null}if(A=ke)me(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,A);else{this.o=!1,this.s=3,Ut(12),Cn(this),rr(this);break e}}if(this.P){A=!0;let Hn;for(;!this.J&&this.C<de.length;)if(Hn=Sa(this,de),Hn==bs){nn==4&&(this.s=4,Ut(14),A=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Fl){this.s=4,Ut(15),me(this.i,this.l,de,"[Invalid Chunk]"),A=!1;break}else me(this.i,this.l,Hn,null),Qi(this,Hn);if(As(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||de.length!=0||this.h.h||(this.s=1,Ut(16),A=!1),this.o=this.o&&A,!A)me(this.i,this.l,de,"[Invalid Chunked Response]"),Cn(this),rr(this);else if(0<de.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Jl(tn),tn.M=!0,Ut(11))}}else me(this.i,this.l,de,null),Qi(this,de);nn==4&&Cn(this),this.o&&!this.J&&(nn==4?nh(this.j,this):(this.o=!1,Di(this)))}else Qu(this.g),A==400&&0<de.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Cn(this),rr(this)}}}catch{}finally{}};function As(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Sa(h,v){var A=h.C,w=v.indexOf(`
`,A);return w==-1?bs:(A=Number(v.substring(A,w)),isNaN(A)?Fl:(w+=1,w+A>v.length?bs:(v=v.slice(w,w+A),h.C=w+A,v)))}Jn.prototype.cancel=function(){this.J=!0,Cn(this)};function Di(h){h.S=Date.now()+h.I,Ot(h,h.I)}function Ot(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=$i(T(h.ba,h),v)}function Ao(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Jn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(rt(this.i,this.A),this.L!=2&&(Ci(),Ut(17)),Cn(this),this.s=2,rr(this)):Ot(this,this.S-h)};function rr(h){h.j.G==0||h.J||nh(h.j,h)}function Cn(h){Ao(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,ht(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Qi(h,v){try{var A=h.j;if(A.G!=0&&(A.g==h||ar(A.h,h))){if(!h.K&&ar(A.h,h)&&A.G==3){try{var w=A.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)pr(A),mr(A);else break e;Wl(A),Ut(18)}}else A.za=q[1],0<A.za-A.T&&37500>q[2]&&A.F&&A.v==0&&!A.C&&(A.C=$i(T(A.Za,A),6e3));if(1>=Gu(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Is(A,11)}else if((h.K||A.g==h)&&pr(A),!Z(v))for(q=A.Da.g.parse(v),v=0;v<q.length;v++){let ke=q[v];if(A.T=ke[0],ke=ke[1],A.G==2)if(ke[0]=="c"){A.K=ke[1],A.ia=ke[2];const tn=ke[3];tn!=null&&(A.la=tn,A.j.info("VER="+A.la));const nn=ke[4];nn!=null&&(A.Aa=nn,A.j.info("SVER="+A.Aa));const yr=ke[5];yr!=null&&typeof yr=="number"&&0<yr&&(w=1.5*yr,A.L=w,A.j.info("backChannelRequestTimeoutMs_="+w)),w=A;const Hn=h.g;if(Hn){const Da=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var J=w.h;J.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(or(J,J.h),J.h=null))}if(w.D){const Rs=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rs&&(w.ya=Rs,Xe(w.I,w.D,Rs))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),w=A;var de=h;if(w.qa=sh(w,w.J?w.ia:null,w.W),de.K){pi(w.h,de);var et=de,jt=w.L;jt&&(et.I=jt),et.B&&(Ao(et),Di(et)),w.g=de}else eh(w);0<A.i.length&&Oo(A)}else ke[0]!="stop"&&ke[0]!="close"||Is(A,7);else A.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Is(A,7):Xl(A):ke[0]!="noop"&&A.l&&A.l.ta(ke),A.v=0)}}Ci(4)}catch{}}var Xf=class{constructor(h,v){this.g=h,this.map=v}};function zl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Gu(h){return h.h?1:h.g?h.g.size:0}function ar(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function or(h,v){h.g?h.g.add(v):h.h=v}function pi(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}zl.prototype.cancel=function(){if(this.i=On(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function On(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const A of h.g.values())v=v.concat(A.D);return v}return V(h.i)}function qu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var v=[],A=h.length,w=0;w<A;w++)v.push(h[w]);return v}v=[],A=0;for(w in h)v[A++]=h[w];return v}function Qf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var v=[];h=h.length;for(var A=0;A<h;A++)v.push(A);return v}v=[],A=0;for(const w in h)v[A++]=w;return v}}}function So(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var A=Qf(h),w=qu(h),q=w.length,J=0;J<q;J++)v.call(void 0,w[J],A&&A[J],h)}var Gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(h,v){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var w=h[A].indexOf("="),q=null;if(0<=w){var J=h[A].substring(0,w);q=h[A].substring(w+1)}else J=h[A];v(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ss(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ss){this.h=h.h,lr(this,h.j),this.o=h.o,this.g=h.g,xa(this,h.s),this.l=h.l;var v=h.i,A=new Wi;A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),wo(this,A),this.m=h.m}else h&&(v=String(h).match(Gl))?(this.h=!1,lr(this,v[1]||"",!0),this.o=cr(v[2]||""),this.g=cr(v[3]||"",!0),xa(this,v[4]),this.l=cr(v[5]||"",!0),wo(this,v[6]||"",!0),this.m=cr(v[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Ss.prototype.toString=function(){var h=[],v=this.j;v&&h.push(gi(v,ql,!0),":");var A=this.g;return(A||v=="file")&&(h.push("//"),(v=this.o)&&h.push(gi(v,ql,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(gi(A,A.charAt(0)=="/"?Yl:Yu,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",gi(A,Zf)),h.join("")};function xt(h){return new Ss(h)}function lr(h,v,A){h.j=A?cr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function xa(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function wo(h,v,A){v instanceof Wi?(h.i=v,Ku(h.i,h.h)):(A||(v=gi(v,Jf)),h.i=new Wi(v,h.h))}function Xe(h,v,A){h.i.set(v,A)}function wa(h){return Xe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function cr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function gi(h,v,A){return typeof h=="string"?(h=encodeURI(h).replace(v,Wf),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Wf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ql=/[#\/\?@]/g,Yu=/[#\?:]/g,Yl=/[#\?]/g,Jf=/[#\?@]/g,Zf=/#/g;function Wi(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function en(h){h.g||(h.g=new Map,h.h=0,h.i&&xo(h.i,function(v,A){h.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}t=Wi.prototype,t.add=function(h,v){en(this),this.i=null,h=Zn(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(v),this.h+=1,this};function Io(h,v){en(h),v=Zn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ro(h,v){return en(h),v=Zn(h,v),h.g.has(v)}t.forEach=function(h,v){en(this),this.g.forEach(function(A,w){A.forEach(function(q){h.call(v,q,w,this)},this)},this)},t.na=function(){en(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),A=[];for(let w=0;w<v.length;w++){const q=h[w];for(let J=0;J<q.length;J++)A.push(v[w])}return A},t.V=function(h){en(this);let v=[];if(typeof h=="string")Ro(this,h)&&(v=v.concat(this.g.get(Zn(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)v=v.concat(h[A])}return v},t.set=function(h,v){return en(this),this.i=null,h=Zn(this,h),Ro(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function xs(h,v,A){Io(h,v),0<A.length&&(h.i=null,h.g.set(Zn(h,v),V(A)),h.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var A=0;A<v.length;A++){var w=v[A];const J=encodeURIComponent(String(w)),de=this.V(w);for(w=0;w<de.length;w++){var q=J;de[w]!==""&&(q+="="+encodeURIComponent(String(de[w]))),h.push(q)}}return this.i=h.join("&")};function Zn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ku(h,v){v&&!h.j&&(en(h),h.i=null,h.g.forEach(function(A,w){var q=w.toLowerCase();w!=q&&(Io(this,w),xs(this,q,A))},h)),h.j=v}function Kl(h,v){const A=new Oi;if(d.Image){const w=new Image;w.onload=S(zn,A,"TestLoadImage: loaded",!0,v,w),w.onerror=S(zn,A,"TestLoadImage: error",!1,v,w),w.onabort=S(zn,A,"TestLoadImage: abort",!1,v,w),w.ontimeout=S(zn,A,"TestLoadImage: timeout",!1,v,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else v(!1)}function $u(h,v){const A=new Oi,w=new AbortController,q=setTimeout(()=>{w.abort(),zn(A,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:w.signal}).then(J=>{clearTimeout(q),J.ok?zn(A,"TestPingServer: ok",!0,v):zn(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),zn(A,"TestPingServer: error",!1,v)})}function zn(h,v,A,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(A)}catch{}}function Mi(){this.g=new Bl}function $l(h,v,A){const w=A||"";try{So(h,function(q,J){let de=q;g(q)&&(de=kt(q)),v.push(w+J+"="+encodeURIComponent(de))})}catch(q){throw v.push(w+"type="+encodeURIComponent("_badmap")),q}}function Ji(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Ji,va),Ji.prototype.g=function(){return new ei(this.l,this.j)},Ji.prototype.i=(function(h){return function(){return h}})({});function ei(h,v){St.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ei,St),t=ei.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ur(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Zi(this):ur(this),this.readyState==3&&No(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Zi(this))},t.Qa=function(h){this.g&&(this.response=h,Zi(this))},t.ga=function(){this.g&&Zi(this)};function Zi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ur(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=v.next();return h.join(`\r
`)};function ur(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ia(h){let v="";return he(h,function(A,w){v+=w,v+=":",v+=A,v+=`\r
`}),v}function hr(h,v,A){e:{for(w in A){var w=!1;break e}w=!0}w||(A=Ia(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):Xe(h,v,A))}function mt(h){St.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(mt,St);var vn=/^https?$/i,ws=["POST","PUT"];t=mt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,A,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_n.g(),this.v=this.o?ir(this.o):ir(_n),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Ra(this,J);return}if(h=A||"",A=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)A.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const J of w.keys())A.set(J,w.get(J));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(A.keys()).find(J=>J.toLowerCase()=="content-type"),q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ws,v,void 0))||w||q||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of A)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Co(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){Ra(this,J)}};function Ra(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,dr(h),fr(h)}function dr(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ct(this,"complete"),ct(this,"abort"),fr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fr(this,!0)),mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xu(this):this.bb())},t.bb=function(){Xu(this)};function Xu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Dn(h)!=4||h.Z()!=2)){if(h.u&&Dn(h)==4)bo(h.Ea,0,h);else if(ct(h,"readystatechange"),Dn(h)==4){h.h=!1;try{const de=h.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var w;if(w=de===0){var q=String(h.D).match(Gl)[1]||null;!q&&d.self&&d.self.location&&(q=d.self.location.protocol.slice(0,-1)),w=!vn.test(q?q.toLowerCase():"")}A=w}if(A)ct(h,"complete"),ct(h,"success");else{h.m=6;try{var J=2<Dn(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",dr(h)}}finally{fr(h)}}}}function fr(h,v){if(h.g){Co(h);const A=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||ct(h,"ready");try{A.onreadystatechange=w}catch{}}}function Co(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Dn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Zt(v)}};function Na(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(h){const v={};h=(h.g&&2<=Dn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(Z(h[w]))continue;var A=U(h[w]);const q=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const J=v[q]||[];v[q]=J,J.push(A)}O(v,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(h,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||v}function Wu(h){this.Aa=0,this.i=[],this.j=new Oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,h),this.cb=Ca("retryDelaySeedMs",1e4,h),this.Wa=Ca("forwardChannelMaxRetries",2,h),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new zl(h&&h.concurrentRequestLimit),this.Da=new Mi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wu.prototype,t.la=8,t.G=1,t.connect=function(h,v,A,w){Ut(0),this.W=h,this.H=v||{},A&&w!==void 0&&(this.H.OSID=A,this.H.OAID=w),this.F=this.X,this.I=sh(this,null,this.W),Oo(this)};function Xl(h){if(Ju(h),h.G==3){var v=h.U++,A=xt(h.I);if(Xe(A,"SID",h.K),Xe(A,"RID",v),Xe(A,"TYPE","terminate"),Oa(h,A),v=new Jn(h,h.j,v),v.L=2,v.v=wa(xt(A)),A=!1,d.navigator&&d.navigator.sendBeacon)try{A=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!A&&d.Image&&(new Image().src=v.v,A=!0),A||(v.g=rh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Di(v)}Zl(h)}function mr(h){h.g&&(Jl(h),h.g.cancel(),h.g=null)}function Ju(h){mr(h),h.u&&(d.clearTimeout(h.u),h.u=null),pr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Oo(h){if(!Hl(h.h)&&!h.s){h.s=!0;var v=h.Ga;L||Te(),te||(L(),te=!0),ye.add(v,h),h.B=0}}function em(h,v){return Gu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=$i(T(h.Ga,h,v),ih(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Jn(this,this.j,h);let J=this.o;if(this.S&&(J?(J=I(J),M(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var w=this.i[A];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=Ql(this,q,v),A=xt(this.I),Xe(A,"RID",h),Xe(A,"CVER",22),this.D&&Xe(A,"X-HTTP-Session-Id",this.D),Oa(this,A),J&&(this.O?v="headers="+encodeURIComponent(String(Ia(J)))+"&"+v:this.m&&hr(A,this.m,J)),or(this.h,q),this.Ua&&Xe(A,"TYPE","init"),this.P?(Xe(A,"$req",v),Xe(A,"SID","null"),q.T=!0,Aa(q,A,null)):Aa(q,A,v),this.G=2}}else this.G==3&&(h?Zu(this,h):this.i.length==0||Hl(this.h)||Zu(this))};function Zu(h,v){var A;v?A=v.l:A=h.U++;const w=xt(h.I);Xe(w,"SID",h.K),Xe(w,"RID",A),Xe(w,"AID",h.T),Oa(h,w),h.m&&h.o&&hr(w,h.m,h.o),A=new Jn(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Ql(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),or(h.h,A),Aa(A,w,v)}function Oa(h,v){h.H&&he(h.H,function(A,w){Xe(v,w,A)}),h.l&&So({},function(A,w){Xe(v,w,A)})}function Ql(h,v,A){A=Math.min(h.i.length,A);var w=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let J=-1;for(;;){const de=["count="+A];J==-1?0<A?(J=q[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let et=!0;for(let jt=0;jt<A;jt++){let ke=q[jt].g;const tn=q[jt].map;if(ke-=J,0>ke)J=Math.max(0,q[jt].g-100),et=!1;else try{$l(tn,de,"req"+ke+"_")}catch{w&&w(tn)}}if(et){w=de.join("&");break e}}}return h=h.i.splice(0,A),v.D=h,w}function eh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;L||Te(),te||(L(),te=!0),ye.add(v,h),h.v=0}}function Wl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=$i(T(h.Fa,h),ih(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=$i(T(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),mr(this),th(this))};function Jl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function th(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=xt(h.qa);Xe(v,"RID","rpc"),Xe(v,"SID",h.K),Xe(v,"AID",h.T),Xe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xe(v,"TO",h.ja),Xe(v,"TYPE","xmlhttp"),Oa(h,v),h.m&&h.o&&hr(v,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=wa(xt(v)),A.m=null,A.P=!0,Ts(A,h)}t.Za=function(){this.C!=null&&(this.C=null,mr(this),Wl(this),Ut(19))};function pr(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function nh(h,v){var A=null;if(h.g==v){pr(h),Jl(h),h.g=null;var w=2}else if(ar(h.h,v))A=v.D,pi(h.h,v),w=1;else return;if(h.G!=0){if(v.o)if(w==1){A=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;w=sr(),ct(w,new ba(w,A)),Oo(h)}else eh(h);else if(q=v.s,q==3||q==0&&0<v.X||!(w==1&&em(h,v)||w==2&&Wl(h)))switch(A&&0<A.length&&(v=h.h,v.i=v.i.concat(A)),q){case 1:Is(h,5);break;case 4:Is(h,10);break;case 3:Is(h,6);break;default:Is(h,2)}}}function ih(h,v){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*v}function Is(h,v){if(h.j.info("Error code "+v),v==2){var A=T(h.fb,h),w=h.Xa;const q=!w;w=new Ss(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||lr(w,"https"),wa(w),q?Kl(w.toString(),A):$u(w.toString(),A)}else Ut(2);h.G=0,h.l&&h.l.sa(v),Zl(h),Ju(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Zl(h){if(h.G=0,h.ka=[],h.l){const v=On(h.h);(v.length!=0||h.i.length!=0)&&(C(h.ka,v),C(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function sh(h,v,A){var w=A instanceof Ss?xt(A):new Ss(A);if(w.g!="")v&&(w.g=v+"."+w.g),xa(w,w.s);else{var q=d.location;w=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var J=new Ss(null);w&&lr(J,w),v&&(J.g=v),q&&xa(J,q),A&&(J.l=A),w=J}return A=h.D,v=h.ya,A&&v&&Xe(w,A,v),Xe(w,"VER",h.la),Oa(h,w),w}function rh(h,v,A){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new mt(new Ji({eb:A})):new mt(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}t=ah.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Do(){}Do.prototype.g=function(h,v){return new Mn(h,v)};function Mn(h,v){St.call(this),this.g=new Wu(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!Z(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Z(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new gr(this)}N(Mn,St),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Xl(this.g)},Mn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=kt(h),h=A);v.i.push(new Xf(v.Ya++,h)),v.G==3&&Oo(v)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,Mn.aa.N.call(this)};function oh(h){Yi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const A in v){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}N(oh,Yi);function lh(){Wn.call(this),this.status=1}N(lh,Wn);function gr(h){this.g=h}N(gr,ah),gr.prototype.ua=function(){ct(this.g,"a")},gr.prototype.ta=function(h){ct(this.g,new oh(h))},gr.prototype.sa=function(h){ct(this.g,new lh)},gr.prototype.ra=function(){ct(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,DI=function(){return new Do},OI=function(){return sr()},CI=Fn,Bg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Md=De,nt.COMPLETE="complete",NI=nt,Es.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",St.prototype.listen=St.prototype.K,Hc=Es,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,RI=mt}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const PT="@firebase/firestore",VT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new Uy("@firebase/firestore");function ll(){return co.logLevel}function ge(t,...e){if(co.logLevel<=He.DEBUG){const n=e.map(Qy);co.debug(`Firestore (${Dl}): ${t}`,...n)}}function Ws(t,...e){if(co.logLevel<=He.ERROR){const n=e.map(Qy);co.error(`Firestore (${Dl}): ${t}`,...n)}}function ia(t,...e){if(co.logLevel<=He.WARN){const n=e.map(Qy);co.warn(`Firestore (${Dl}): ${t}`,...n)}}function Qy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,MI(t,s,n)}function MI(t,e,n){let s=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ws(s),new Error(s)}function tt(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||MI(e,a,s)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class vV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EV{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let l=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zr)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string",31837,{l:s}),new PI(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class bV{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TV{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new bV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new LT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=SV(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<n&&(s+=e.charAt(a[l]%62))}return s}}function Ue(t,e){return t<e?-1:t>e?1:0}function Fg(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return Ue(s,a);{const l=VI(),c=xV(l.encode(kT(t,n)),l.encode(kT(e,n)));return c!==0?c:Ue(s,a)}}n+=s>65535?2:1}return Ue(t.length,e.length)}function kT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ue(t[n],e[n]);return Ue(t.length,e.length)}function xl(t,e,n){return t.length===e.length&&t.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__name__";class ss{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ne(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ss.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ss?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const l=ss.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Ue(e.length,n.length)}static compareSegments(e,n){const s=ss.isNumericId(e),a=ss.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?ss.extractNumericId(e).compare(ss.extractNumericId(n)):Fg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class dt extends ss{construct(e,n,s){return new dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const wV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends ss{construct(e,n,s){return new fn(e,n,s)}static isValidIdentifier(e){return wV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UT}static keyField(){return new fn([UT])}static fromServerFormat(e){const n=[];let s="",a=0;const l=()=>{if(s.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(l(),a++)}if(l(),c)throw new pe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(dt.fromString(e))}static fromName(e){return new xe(dt.fromString(e).popFirst(5))}static empty(){return new xe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e,n){if(!n)throw new pe(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IV(t,e,n,s){if(e===!0&&s===!0)throw new pe(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jT(t){if(!xe.isDocumentKey(t))throw new pe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BT(t){if(xe.isDocumentKey(t))throw new pe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xf(t);throw new pe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function RV(t,e){if(e<=0)throw new pe(ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Du(t,e){if(!kI(t))throw new pe(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const c=t[s];if(a&&typeof c!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${s}' field to equal '${l.value}'`;break}}if(n)throw new pe(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=-62135596800,zT=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*zT);return new yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<FT)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zT}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Kt("string",yt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new yt(0,0))}static max(){return new Ce(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function NV(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(s===1e9?new yt(n+1,0):new yt(n,s));return new sa(a,xe.empty(),e)}function CV(t){return new sa(t.readTime,t.key,du)}class sa{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new sa(Ce.min(),xe.empty(),du)}static max(){return new sa(Ce.max(),xe.empty(),du)}}function OV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==DV)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,s)=>{n(e)}))}static reject(e){return new le(((n,s)=>{s(e)}))}static waitFor(e){return new le(((n,s)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&n()}),(m=>s(m)))})),c=!0,l===a&&n()}))}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next((a=>a?le.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,l)=>{s.push(n.call(this,a,l))})),this.waitFor(s)}static mapArray(e,n){return new le(((s,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;n(e[g]).next((_=>{c[g]=_,++d,d===l&&s(c)}),(_=>a(_)))}}))}static doWhile(e,n){return new le(((s,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):s()};l()}))}}function PV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=-1;function If(t){return t==null}function Jd(t){return t===0&&1/t==-1/0}function VV(t){return typeof t=="number"&&Number.isInteger(t)&&!Jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="";function LV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=HT(e)),e=kV(t.get(n),e);return HT(e)}function kV(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case UI:n+="";break;default:n+=l}}return n}function HT(t){return t+UI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,s,a,l){this.key=e,this.value=n,this.color=s??dn.RED,this.left=a??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,l){return new dn(e??this.key,n??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,s),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,s,a,l){return this}insert(e,n,s){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qT(this.data.getIterator())}getIteratorFrom(e){return new qT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class qT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new ci([])}unionWith(e){let n=new Wt(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new BI("Invalid base64 string: "+l):l}})(e);return new mn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const UV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(t){if(tt(!!t,39018),typeof t=="string"){let e=0;const n=UV.exec(t);if(tt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function aa(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="server_timestamp",zI="__type__",HI="__previous_value__",GI="__local_write_time__";function Zy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zI])===null||n===void 0?void 0:n.stringValue)===FI}function Rf(t){const e=t.mapValue.fields[HI];return Zy(e)?Rf(e):e}function fu(t){const e=ra(t.mapValue.fields[GI].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n,s,a,l,c,d,m,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Zd="(default)";class mu{constructor(e,n){this.projectId=e,this.database=n||Zd}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===Zd}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="__type__",BV="__max__",pd={mapValue:{}},YI="__vector__",ef="value";function oa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zy(t)?4:zV(t)?9007199254740991:FV(t)?10:11:Ne(28295,{value:t})}function ms(t,e){if(t===e)return!0;const n=oa(t);if(n!==oa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fu(t).isEqual(fu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ra(a.timestampValue),d=ra(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return aa(a.bytesValue).isEqual(aa(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Pt(a.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(a.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Pt(a.integerValue)===Pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Pt(a.doubleValue),d=Pt(l.doubleValue);return c===d?Jd(c)===Jd(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(GT(c)!==GT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ms(c[m],d[m])))return!1;return!0})(t,e);default:return Ne(52216,{left:t})}}function pu(t,e){return(t.values||[]).find((n=>ms(n,e)))!==void 0}function wl(t,e){if(t===e)return 0;const n=oa(t),s=oa(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Pt(l.integerValue||l.doubleValue),m=Pt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(t,e);case 3:return YT(t.timestampValue,e.timestampValue);case 4:return YT(fu(t),fu(e));case 5:return Fg(t.stringValue,e.stringValue);case 6:return(function(l,c){const d=aa(l),m=aa(c);return d.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Ue(d[g],m[g]);if(_!==0)return _}return Ue(d.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ue(Pt(l.latitude),Pt(c.latitude));return d!==0?d:Ue(Pt(l.longitude),Pt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return KT(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,m,g,_;const E=l.fields||{},T=c.fields||{},S=(d=E[ef])===null||d===void 0?void 0:d.arrayValue,N=(m=T[ef])===null||m===void 0?void 0:m.arrayValue,V=Ue(((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0,((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:KT(S,N)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===pd.mapValue&&c===pd.mapValue)return 0;if(l===pd.mapValue)return 1;if(c===pd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const T=Fg(m[E],_[E]);if(T!==0)return T;const S=wl(d[m[E]],g[_[E]]);if(S!==0)return S}return Ue(m.length,_.length)})(t.mapValue,e.mapValue);default:throw Ne(23264,{le:n})}}function YT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=ra(t),s=ra(e),a=Ue(n.seconds,s.seconds);return a!==0?a:Ue(n.nanos,s.nanos)}function KT(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const l=wl(n[a],s[a]);if(l)return l}return Ue(n.length,s.length)}function Il(t){return zg(t)}function zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=ra(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return aa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return xe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=zg(l);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${zg(n.fields[c])}`;return a+"}"})(t.mapValue):Ne(61005,{value:t})}function Pd(t){switch(oa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(t);return e?16+Pd(e):16;case 5:return 2*t.stringValue.length;case 6:return aa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Pd(l)),0)})(t.arrayValue);case 10:case 11:return(function(s){let a=0;return pa(s.fields,((l,c)=>{a+=l.length+Pd(c)})),a})(t.mapValue);default:throw Ne(13486,{value:t})}}function $T(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hg(t){return!!t&&"integerValue"in t}function e_(t){return!!t&&"arrayValue"in t}function XT(t){return!!t&&"nullValue"in t}function QT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function FV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qI])===null||n===void 0?void 0:n.stringValue)===YI}function Jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pa(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Jc(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=fn.emptyPath(),s={},a=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const m=this.getFieldsMap(n);this.applyChanges(m,s,a),s={},a=[],n=d.popLast()}c?s[d.lastSegment()]=Jc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,a)}delete(e){const n=this.field(e.popLast());Vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Vd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){pa(n,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Qn(Jc(this.value))}}function KI(t){const e=[];return pa(t.fields,((n,s)=>{const a=new fn([n]);if(Vd(s)){const l=KI(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,s,a,l,c,d){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Ce.min(),Ce.min(),Ce.min(),Qn.empty(),0)}static newFoundDocument(e,n,s,a){return new An(e,1,n,Ce.min(),s,a,0)}static newNoDocument(e,n){return new An(e,2,n,Ce.min(),Ce.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Ce.min(),Ce.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.position=e,this.inclusive=n}}function WT(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),n.key):s=wl(c,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function JT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ms(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n="asc"){this.field=e,this.dir=n}}function HV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{}class Yt extends $I{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new qV(e,n,s):n==="array-contains"?new $V(e,s):n==="in"?new XV(e,s):n==="not-in"?new QV(e,s):n==="array-contains-any"?new WV(e,s):new Yt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new YV(e,s):new KV(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wl(n,this.value)):n!==null&&oa(this.value)===oa(n)&&this.matchesComparison(wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends $I{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Hi(e,n)}matches(e){return XI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function XI(t){return t.op==="and"}function QI(t){return GV(t)&&XI(t)}function GV(t){for(const e of t.filters)if(e instanceof Hi)return!1;return!0}function Gg(t){if(t instanceof Yt)return t.field.canonicalString()+t.op.toString()+Il(t.value);if(QI(t))return t.filters.map((e=>Gg(e))).join(",");{const e=t.filters.map((n=>Gg(n))).join(",");return`${t.op}(${e})`}}function WI(t,e){return t instanceof Yt?(function(s,a){return a instanceof Yt&&s.op===a.op&&s.field.isEqual(a.field)&&ms(s.value,a.value)})(t,e):t instanceof Hi?(function(s,a){return a instanceof Hi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,d)=>l&&WI(c,a.filters[d])),!0):!1})(t,e):void Ne(19439)}function JI(t){return t instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`})(t):t instanceof Hi?(function(n){return n.op.toString()+" {"+n.getFilters().map(JI).join(" ,")+"}"})(t):"Filter"}class qV extends Yt{constructor(e,n,s){super(e,n,s),this.key=xe.fromName(s.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class YV extends Yt{constructor(e,n){super(e,"in",n),this.keys=ZI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class KV extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=ZI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ZI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>xe.fromName(s.referenceValue)))}class $V extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return e_(n)&&pu(n.arrayValue,this.value)}}class XV extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class QV extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pu(this.value.arrayValue,n)}}class WV extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!e_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>pu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n=null,s=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function ZT(t,e=null,n=[],s=[],a=null,l=null,c=null){return new JV(t,e,n,s,a,l,c)}function t_(t){const e=Pe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Gg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Il(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Il(s))).join(",")),e.Pe=n}return e.Pe}function n_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JT(t.startAt,e.startAt)&&JT(t.endAt,e.endAt)}function qg(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n=null,s=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ZV(t,e,n,s,a,l,c,d){return new Vl(t,e,n,s,a,l,c,d)}function i_(t){return new Vl(t)}function eA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eR(t){return t.collectionGroup!==null}function Zc(t){const e=Pe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Wt(fn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Te.push(new gu(l,s))})),n.has(fn.keyField().canonicalString())||e.Te.push(new gu(fn.keyField(),s))}return e.Te}function cs(t){const e=Pe(t);return e.Ie||(e.Ie=eL(e,Zc(t))),e.Ie}function eL(t,e){if(t.limitType==="F")return ZT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new gu(a.field,l)}));const n=t.endAt?new tf(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new tf(t.startAt.position,t.startAt.inclusive):null;return ZT(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Yg(t,e){const n=t.filters.concat([e]);return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nf(t,e,n){return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nf(t,e){return n_(cs(t),cs(e))&&t.limitType===e.limitType}function tR(t){return`${t_(cs(t))}|lt:${t.limitType}`}function cl(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>JI(a))).join(", ")}]`),If(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>Il(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>Il(a))).join(",")),`Target(${s})`})(cs(t))}; limitType=${t.limitType})`}function Cf(t,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(t,e)&&(function(s,a){for(const l of Zc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(s,a){return!(s.startAt&&!(function(c,d,m){const g=WT(c,d,m);return c.inclusive?g<=0:g<0})(s.startAt,Zc(s),a)||s.endAt&&!(function(c,d,m){const g=WT(c,d,m);return c.inclusive?g>=0:g>0})(s.endAt,Zc(s),a))})(t,e)}function tL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nR(t){return(e,n)=>{let s=!1;for(const a of Zc(t)){const l=nL(a,e,n);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function nL(t,e,n){const s=t.field.isKeyField()?xe.comparator(e.key,n.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?wl(m,g):Ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,((n,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return jI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new At(xe.comparator);function Js(){return iL}const iR=new At(xe.comparator);function Gc(...t){let e=iR;for(const n of t)e=e.insert(n.key,n);return e}function sR(t){let e=iR;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ja(){return eu()}function rR(){return eu()}function eu(){return new yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const sL=new At(xe.comparator),rL=new Wt(xe.comparator);function Ge(...t){let e=rL;for(const n of t)e=e.add(n);return e}const aL=new Wt(Ue);function oL(){return aL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jd(e)?"-0":e}}function aR(t){return{integerValue:""+t}}function lL(t,e){return VV(e)?aR(e):s_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function cL(t,e,n){return t instanceof sf?(function(a,l){const c={fields:{[zI]:{stringValue:FI},[GI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Zy(l)&&(l=Rf(l)),l&&(c.fields[HI]=l),{mapValue:c}})(n,e):t instanceof yu?lR(t,e):t instanceof _u?cR(t,e):(function(a,l){const c=oR(a,l),d=tA(c)+tA(a.Ee);return Hg(c)&&Hg(a.Ee)?aR(d):s_(a.serializer,d)})(t,e)}function uL(t,e,n){return t instanceof yu?lR(t,e):t instanceof _u?cR(t,e):n}function oR(t,e){return t instanceof rf?(function(s){return Hg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class sf extends Of{}class yu extends Of{constructor(e){super(),this.elements=e}}function lR(t,e){const n=uR(e);for(const s of t.elements)n.some((a=>ms(a,s)))||n.push(s);return{arrayValue:{values:n}}}class _u extends Of{constructor(e){super(),this.elements=e}}function cR(t,e){let n=uR(e);for(const s of t.elements)n=n.filter((a=>!ms(a,s)));return{arrayValue:{values:n}}}class rf extends Of{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function tA(t){return Pt(t.integerValue||t.doubleValue)}function uR(t){return e_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function hL(t,e){return t.field.isEqual(e.field)&&(function(s,a){return s instanceof yu&&a instanceof yu||s instanceof _u&&a instanceof _u?xl(s.elements,a.elements,ms):s instanceof rf&&a instanceof rf?ms(s.Ee,a.Ee):s instanceof sf&&a instanceof sf})(t.transform,e.transform)}class dL{constructor(e,n){this.version=e,this.transformResults=n}}class Fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function hR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new r_(t.key,Fi.none()):new Mu(t.key,t.data,Fi.none());{const n=t.data,s=Qn.empty();let a=new Wt(fn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new ga(t.key,s,new ci(a.toArray()),Fi.none())}}function fL(t,e,n){t instanceof Mu?(function(a,l,c){const d=a.value.clone(),m=iA(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof ga?(function(a,l,c){if(!Ld(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=iA(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(dR(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function tu(t,e,n,s){return t instanceof Mu?(function(l,c,d,m){if(!Ld(l.precondition,c))return d;const g=l.value.clone(),_=sA(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(t,e,n,s):t instanceof ga?(function(l,c,d,m){if(!Ld(l.precondition,c))return d;const g=sA(l.fieldTransforms,m,c),_=c.data;return _.setAll(dR(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,s):(function(l,c,d){return Ld(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function mL(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),l=oR(s.transform,a||null);l!=null&&(n===null&&(n=Qn.empty()),n.set(s.field,l))}return n||null}function nA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&xl(s,a,((l,c)=>hL(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mu extends Df{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ga extends Df{constructor(e,n,s,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function iA(t,e,n){const s=new Map;tt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);s.set(l.field,uL(c,d,n[a]))}return s}function sA(t,e,n){const s=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);s.set(a.field,cL(l,c,e))}return s}class r_ extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pL extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&fL(l,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=tu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=tu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=rR();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const m=hR(c,d);m!==null&&s.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,((n,s)=>nA(n,s)))&&xl(this.baseMutations,e.baseMutations,((n,s)=>nA(n,s)))}}class a_{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){tt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return sL})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new a_(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,Ke;function vL(t){switch(t){case ae.OK:return Ne(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function fR(t){if(t===void 0)return Ws("GRPC error has no .code"),ae.UNKNOWN;switch(t){case Gt.OK:return ae.OK;case Gt.CANCELLED:return ae.CANCELLED;case Gt.UNKNOWN:return ae.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ae.INTERNAL;case Gt.UNAVAILABLE:return ae.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ae.NOT_FOUND;case Gt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gt.ABORTED:return ae.ABORTED;case Gt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gt.DATA_LOSS:return ae.DATA_LOSS;default:return Ne(39323,{code:t})}}(Ke=Gt||(Gt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Jr([4294967295,4294967295],0);function rA(t){const e=VI().encode(t),n=new II;return n.update(e),new Uint8Array(n.digest())}function aA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Jr([n,s],0),new Jr([a,l],0)]}class o_{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(s<0)throw new qc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,s){let a=e.add(n.multiply(Jr.fromNumber(s)));return a.compare(EL)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=rA(e),[s,a]=aA(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,a,l);if(!this.ye(c))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new o_(l,a,n);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const n=rA(e),[s,a]=aA(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,a,l);this.we(c)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,s,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Mf(Ce.min(),a,new At(Ue),Js(),Ge())}}class Pu{constructor(e,n,s,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Pu(s,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n,s,a){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=a}}class mR{constructor(e,n){this.targetId=e,this.De=n}}class pR{constructor(e,n,s=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class oA{constructor(){this.ve=0,this.Ce=lA(),this.Fe=mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),n=Ge(),s=Ge();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ne(38017,{changeType:l})}})),new Pu(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=lA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bL{constructor(e){this.We=e,this.Ge=new Map,this.ze=Js(),this.je=gd(),this.Je=gd(),this.He=new At(Ue)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((s,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,s=e.De.count,a=this.st(n);if(a){const l=a.target;if(qg(l))if(s===0){const c=new xe(l.path);this.Xe(n,c,An.newNoDocument(c,Ce.min()))}else tt(s===1,20013,{expectedCount:s});else{const c=this.ot(n);if(c!==s){const d=this._t(e),m=d?this.ut(d,e,c):1;if(m!==0){this.rt(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,g)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=aa(s).toUint8Array()}catch(m){if(m instanceof BI)return ia("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new o_(c,a,l)}catch(m){return ia(m instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let a=0;return s.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,l,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&qg(d.target)){const m=new xe(d.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,An.newNoDocument(m,e))}l.Ne&&(n.set(c,l.Le()),l.ke())}}));let s=Ge();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const a=new Mf(e,n,this.He,this.ze,s);return this.ze=Js(),this.je=gd(),this.Je=gd(),this.He=new At(Ue),a}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new oA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Wt(Ue),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Wt(Ue),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new oA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function gd(){return new At(xe.comparator)}function lA(){return new At(xe.comparator)}const TL={asc:"ASCENDING",desc:"DESCENDING"},AL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SL={and:"AND",or:"OR"};class xL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kg(t,e){return t.useProto3Json||If(e)?e:{value:e}}function af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wL(t,e){return af(t,e.toTimestamp())}function us(t){return tt(!!t,49232),Ce.fromTimestamp((function(n){const s=ra(n);return new yt(s.seconds,s.nanos)})(t))}function l_(t,e){return $g(t,e).canonicalString()}function $g(t,e){const n=(function(a){return new dt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){const e=dt.fromString(t);return tt(TR(e),10190,{key:e.toString()}),e}function Xg(t,e){return l_(t.databaseId,e.path)}function og(t,e){const n=yR(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(vR(n))}function _R(t,e){return l_(t.databaseId,e)}function IL(t){const e=yR(t);return e.length===4?dt.emptyPath():vR(e)}function Qg(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vR(t){return tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cA(t,e,n){return{name:Xg(t,e),fields:n.value.mapValue.fields}}function RL(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ne(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(tt(_===void 0||typeof _=="string",58123),mn.fromBase64String(_||"")):(tt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),mn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?ae.UNKNOWN:fR(g.code);return new pe(_,g.message||"")})(c);n=new pR(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=og(t,s.document.name),l=us(s.document.updateTime),c=s.document.createTime?us(s.document.createTime):Ce.min(),d=new Qn({mapValue:{fields:s.document.fields}}),m=An.newFoundDocument(a,l,c,d),g=s.targetIds||[],_=s.removedTargetIds||[];n=new kd(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=og(t,s.document),l=s.readTime?us(s.readTime):Ce.min(),c=An.newNoDocument(a,l),d=s.removedTargetIds||[];n=new kd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=og(t,s.document),l=s.removedTargetIds||[];n=new kd([],l,a,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new _L(a,l),d=s.targetId;n=new mR(d,c)}}return n}function NL(t,e){let n;if(e instanceof Mu)n={update:cA(t,e.key,e.value)};else if(e instanceof r_)n={delete:Xg(t,e.key)};else if(e instanceof ga)n={update:cA(t,e.key,e.data),updateMask:UL(e.fieldMask)};else{if(!(e instanceof pL))return Ne(16599,{Rt:e.type});n={verify:Xg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof sf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof yu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _u)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof rf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw Ne(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:wL(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(t,e.precondition)),n}function CL(t,e){return t&&t.length>0?(tt(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?us(a.updateTime):us(l);return c.isEqual(Ce.min())&&(c=us(l)),new dL(c,a.transformResults||[])})(n,e)))):[]}function OL(t,e){return{documents:[_R(t,e.path)]}}function DL(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=_R(t,a);const l=(function(g){if(g.length!==0)return bR(Hi.create(g,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(T){return{field:ul(T.field),direction:VL(T.dir)}})(_)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=Kg(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:n,parent:a}}function ML(t){let e=IL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){tt(s===1,65062);const _=n.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(E){const T=ER(E);return T instanceof Hi&&QI(T)?T.getFilters():[T]})(n.where));let c=[];n.orderBy&&(c=(function(E){return E.map((T=>(function(N){return new gu(hl(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,If(T)?null:T})(n.limit));let m=null;n.startAt&&(m=(function(E){const T=!!E.before,S=E.values||[];return new tf(S,T)})(n.startAt));let g=null;return n.endAt&&(g=(function(E){const T=!E.before,S=E.values||[];return new tf(S,T)})(n.endAt)),ZV(e,a,c,l,d,"F",m,g)}function PL(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ER(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=hl(n.unaryFilter.field);return Yt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=hl(n.unaryFilter.field);return Yt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=hl(n.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=hl(n.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Yt.create(hl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Hi.create(n.compositeFilter.filters.map((s=>ER(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(t):Ne(30097,{filter:t})}function VL(t){return TL[t]}function LL(t){return AL[t]}function kL(t){return SL[t]}function ul(t){return{fieldPath:t.canonicalString()}}function hl(t){return fn.fromServerFormat(t.fieldPath)}function bR(t){return t instanceof Yt?(function(n){if(n.op==="=="){if(QT(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(XT(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(QT(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(XT(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:LL(n.op),value:n.value}}})(t):t instanceof Hi?(function(n){const s=n.getFilters().map((a=>bR(a)));return s.length===1?s[0]:{compositeFilter:{op:kL(n.op),filters:s}}})(t):Ne(54877,{filter:t})}function UL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function TR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,s,a,l=Ce.min(),c=Ce.min(),d=mn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.gt=e}}function BL(t){const e=ML({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.Dn=new zL}addToCollectionParentIndex(e,n){return this.Dn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(sa.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class zL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Wt(dt.comparator),l=!a.has(s);return this.index[n]=a.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Wt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AR=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(AR,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Rl(0)}static ur(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="LruGarbageCollector",HL=1048576;function dA([t,e],[n,s]){const a=Ue(t,n);return a===0?Ue(e,s):a}class GL{constructor(e){this.Tr=e,this.buffer=new Wt(dA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();dA(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(hA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pl(n)?ge(hA,"Ignoring IndexedDB error during garbage collection: ",n):await Ml(n)}await this.Rr(3e5)}))}}class YL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(wf.ue);const s=new GL(n);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(uA)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,n)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),ll()<=He.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function KL(t,e){return new YL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(){this.changes=new yo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&tu(s.mutation,a,ci.empty(),yt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ge()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ge()){const a=Ja();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((l=>{let c=Gc();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const s=Ja();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ge())))}populateOverlays(e,n,s){const a=[];return s.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,s,a){let l=Js();const c=eu(),d=(function(){return eu()})();return n.forEach(((m,g)=>{const _=s.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof ga)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),tu(_.mutation,g,_.mutation.getFieldMask(),yt.now())):c.set(g.key,ci.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),n.forEach(((g,_)=>{var E;return d.set(g,new XL(_,(E=c.get(g))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const s=eu();let a=new At(((c,d)=>c-d)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=n.get(m);if(g===null)return;let _=s.get(m)||ci.empty();_=d.applyToLocalView(g,_),s.set(m,_);const E=(a.get(d.batchId)||Ge()).add(m);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,E=rR();_.forEach((T=>{if(!l.has(T)){const S=hR(n.get(T),s.get(T));S!==null&&E.set(T,S),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return le.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-l.size):le.resolve(Ja());let d=du,m=l;return c.next((g=>le.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{m=m.insert(_,T)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ge()))).next((_=>({batchId:d,changes:sR(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next((s=>{let a=Gc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const l=n.collectionGroup;let c=Gc();return this.indexManager.getCollectionParents(e,l).next((d=>le.forEach(d,(m=>{const g=(function(E,T){return new Vl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,An.newInvalidDocument(_)))}));let d=Gc();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&tu(_.mutation,g,ci.empty(),yt.now()),Cf(n,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return le.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:us(a.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:BL(a.bundledQuery),readTime:us(a.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.overlays=new At(xe.comparator),this.kr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ja();return le.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,l)=>{this.wt(e,n,l)})),le.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const a=Ja(),l=n.length+1,c=new xe(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return le.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let l=new At(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=l.get(g.largestBatchId);_===null&&(_=Ja(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ja(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return le.resolve(d)}wt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new yL(n,s));let l=this.kr.get(n);l===void 0&&(l=Ge(),this.kr.set(n,l)),this.kr.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.qr=new Wt(rn.Qr),this.$r=new Wt(rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new rn(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new rn(e,n))}Gr(e,n){e.forEach((s=>this.removeReference(s,n)))}zr(e){const n=new xe(new dt([])),s=new rn(n,e),a=new rn(n,e+1),l=[];return this.$r.forEachInRange([s,a],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new xe(new dt([])),s=new rn(n,e),a=new rn(n,e+1);let l=Ge();return this.$r.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new rn(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return xe.comparator(e.key,n.key)||Ue(e.Hr,n.Hr)}static Ur(e,n){return Ue(e.Hr,n.Hr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Wt(rn.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new gL(l,n,s,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Xr(s),l=a<0?0:a;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Jy:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rn(n,0),a=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Wt(Ue);return n.forEach((a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{s=s.add(d.Hr)}))})),le.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const c=new rn(new xe(l),0);let d=new Wt(Ue);return this.Yr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Hr)),!0)}),c),le.resolve(this.ei(d))}ei(e){const n=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return le.forEach(n.mutations,(a=>{const l=new rn(a.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,n){const s=new rn(n,0),a=this.Yr.firstAfterOrEqual(s);return le.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.ni=e,this.docs=(function(){return new At(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),l=a?a.size:0,c=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let s=Js();return n.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():An.newInvalidDocument(a))})),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let l=Js();const c=n.path,d=new xe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||OV(CV(_),s)<=0||(a.has(_.key)||Cf(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,n,s,a){Ne(9500)}ri(e,n){return le.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new nk(this)}getSize(e){return le.resolve(this.size)}}class nk extends $L{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),le.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.persistence=e,this.ii=new yo((n=>t_(n)),n_),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new c_,this.targetCount=0,this._i=Rl.ar()}forEachTarget(e,n){return this.ii.forEach(((s,a)=>n(a))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),le.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Rl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.hr(n),le.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let a=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),le.waitFor(l).next((()=>a))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.ai={},this.overlays={},this.ui=new wf(0),this.ci=!1,this.ci=!0,this.li=new ZL,this.referenceDelegate=e(this),this.hi=new ik(this),this.indexManager=new FL,this.remoteDocumentCache=(function(a){return new tk(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new jL(n),this.Ti=new WL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new ek(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const a=new sk(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,n){return le.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,n))))}}class sk extends MV{constructor(e){super(),this.currentSequenceNumber=e}}class u_{constructor(e){this.persistence=e,this.Ai=new c_,this.Ri=null}static Vi(e){return new u_(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,(s=>{const a=xe.fromPath(s);return this.fi(e,a).next((l=>{l||n.removeEntry(a,Ce.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return le.or([()=>le.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class of{constructor(e,n){this.persistence=e,this.gi=new yo((s=>LV(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=KL(this,n)}static Vi(e,n){return new of(e,n)}Ii(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}yr(e){let n=0;return this.gr(e,(s=>{n++})).next((()=>n))}gr(e,n){return le.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((l=>l?le.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(c=>this.Sr(e,c,n).next((d=>{d||(s++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pd(e.data.value)),n}Sr(e,n,s){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return le.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=a}static Es(e,n){let s=Ge(),a=Ge();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new h_(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return kD()?8:PV(wn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,a){const l={result:null};return this.ps(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,n,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new rk;return this.ws(e,n,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,n,c,d.size)}))})).next((()=>l.result))}Ss(e,n,s,a){return s.documentReadCount<this.Vs?(ll()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(ll()<=He.DEBUG&&ge("QueryEngine","Query:",cl(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(ll()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(n))):le.resolve())}ps(e,n){if(eA(n))return le.resolve(null);let s=cs(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=nf(n,null,"F"),s=cs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ge(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.bs(n,d);return this.Ds(n,g,c,m.readTime)?this.ps(e,nf(n,null,"F")):this.vs(e,g,n,m)}))))})))))}ys(e,n,s,a){return eA(n)||a.isEqual(Ce.min())?le.resolve(null):this.gs.getDocuments(e,s).next((l=>{const c=this.bs(n,l);return this.Ds(n,c,s,a)?le.resolve(null):(ll()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),cl(n)),this.vs(e,c,n,NV(a,du)).next((d=>d)))}))}bs(e,n){let s=new Wt(nR(e));return n.forEach(((a,l)=>{Cf(e,l)&&(s=s.add(l))})),s}Ds(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,n,s){return ll()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",cl(n)),this.gs.getDocumentsMatchingQuery(e,n,sa.min(),s)}vs(e,n,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="LocalStore",ok=3e8;class lk{constructor(e,n,s,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new At(Ue),this.Ms=new yo((l=>t_(l)),n_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function ck(t,e,n,s){return new lk(t,e,n,s)}async function xR(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,n.Ns(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let m=Ge();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return n.localDocuments.getDocuments(s,m).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function uk(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=n.Os.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const E=g.batch,T=E.keys();let S=le.resolve();return T.forEach((N=>{S=S.next((()=>_.getEntry(m,N))).next((V=>{const C=g.docVersions.get(N);tt(C!==null,48541),V.version.compareTo(C)<0&&(E.applyToRemoteDocument(V,g),V.isValidDocument()&&(V.setReadTime(g.commitVersion),_.addEntry(V)))}))})),S.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let m=Ge();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function wR(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function hk(t,e){const n=Pe(t),s=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const T=a.get(E);if(!T)return;d.push(n.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>n.hi.addMatchingKeys(l,_.addedDocuments,E))));let S=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(mn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,s)),a=a.insert(E,S),(function(V,C,G){return V.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=ok?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,S,_)&&d.push(n.hi.updateTargetData(l,S))}));let m=Js(),g=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(dk(l,c,e.documentUpdates).next((_=>{m=_.Ls,g=_.ks}))),!s.isEqual(Ce.min())){const _=n.hi.getLastRemoteSnapshotVersion(l).next((E=>n.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(_)}return le.waitFor(d).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(n.Fs=a,l)))}function dk(t,e,n){let s=Ge(),a=Ge();return n.forEach((l=>s=s.add(l))),e.getEntries(t,s).next((l=>{let c=Js();return n.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ge(d_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Ls:c,ks:a}}))}function fk(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Jy),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function mk(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.hi.getTargetData(s,e).next((l=>l?(a=l,le.resolve(a)):n.hi.allocateTargetId(s).next((c=>(a=new $r(e,c,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s}))}async function Wg(t,e,n){const s=Pe(t),a=s.Fs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Pl(c))throw c;ge(d_,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function fA(t,e,n){const s=Pe(t);let a=Ce.min(),l=Ge();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=Pe(m),T=E.Ms.get(_);return T!==void 0?le.resolve(E.Fs.get(T)):E.hi.getTargetData(g,_)})(s,c,cs(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,n?a:Ce.min(),n?l:Ge()))).next((d=>(pk(s,tL(e),d),{documents:d,qs:l})))))}function pk(t,e,n){let s=t.xs.get(e)||Ce.min();n.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),t.xs.set(e,s)}class mA{constructor(){this.activeTargetIds=oL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gk{constructor(){this.Fo=new mA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new mA,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="ConnectivityMonitor";class gA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(pA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(pA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function Jg(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="RestConnection",_k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Zd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,n,s,a,l){const c=Jg(),d=this.Go(e,n.toUriEncodedString());ge(lg,`Sending RPC '${e}' ${c}:`,d,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:g}=new URL(d),_=da(g);return this.jo(e,d,m,s,_).then((E=>(ge(lg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw ia(lg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Jo(e,n,s,a,l,c){return this.Wo(e,n,s,a,l)}zo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Go(e,n){const s=_k[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class bk extends vk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,a,l){const c=Jg();return new Promise(((d,m)=>{const g=new RI;g.setWithCredentials(!0),g.listenOnce(NI.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Md.NO_ERROR:const E=g.getResponseJson();ge(bn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Md.TIMEOUT:ge(bn,`RPC '${e}' ${c} timed out`),m(new pe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:const T=g.getStatus();if(ge(bn,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S==null?void 0:S.error;if(N&&N.status&&N.message){const V=(function(G){const Z=G.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Z)>=0?Z:ae.UNKNOWN})(N.status);m(new pe(V,N.message))}else m(new pe(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new pe(ae.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ge(bn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ge(bn,`RPC '${e}' ${c} sending request:`,a),g.send(n,"POST",_,s,15)}))}P_(e,n,s){const a=Jg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=DI(),d=OI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const _=l.join("");ge(bn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const E=c.createWebChannel(_,m);this.T_(E);let T=!1,S=!1;const N=new Ek({Ho:C=>{S?ge(bn,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(T||(ge(bn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),T=!0),ge(bn,`RPC '${e}' stream ${a} sending:`,C),E.send(C))},Yo:()=>E.close()}),V=(C,G,Z)=>{C.listen(G,(H=>{try{Z(H)}catch(X){setTimeout((()=>{throw X}),0)}}))};return V(E,Hc.EventType.OPEN,(()=>{S||(ge(bn,`RPC '${e}' stream ${a} transport opened.`),N.s_())})),V(E,Hc.EventType.CLOSE,(()=>{S||(S=!0,ge(bn,`RPC '${e}' stream ${a} transport closed`),N.__(),this.I_(E))})),V(E,Hc.EventType.ERROR,(C=>{S||(S=!0,ia(bn,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),N.__(new pe(ae.UNAVAILABLE,"The operation could not be completed")))})),V(E,Hc.EventType.MESSAGE,(C=>{var G;if(!S){const Z=C.data[0];tt(!!Z,16349);const H=Z,X=(H==null?void 0:H.error)||((G=H[0])===null||G===void 0?void 0:G.error);if(X){ge(bn,`RPC '${e}' stream ${a} received error:`,X);const ce=X.status;let he=(function(R){const M=Gt[R];if(M!==void 0)return fR(M)})(ce),O=X.message;he===void 0&&(he=ae.INTERNAL,O="Unknown error status: "+ce+" with message "+X.message),S=!0,N.__(new pe(he,O)),E.close()}else ge(bn,`RPC '${e}' stream ${a} received:`,Z),N.a_(Z)}})),V(d,CI.STAT_EVENT,(C=>{C.stat===Bg.PROXY?ge(bn,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===Bg.NOPROXY&&ge(bn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function cg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){return new xL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,s=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-s);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="PersistentStream";class RR{constructor(e,n,s,a,l,c,d,m){this.Fi=e,this.w_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new IR(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Ws(n.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===n&&this.W_(s,a)}),(s=>{e((()=>{const a=new pe(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ge(yA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ge(yA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tk extends RR{constructor(e,n,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,c),this.serializer=l}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=RL(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?us(c.readTime):Ce.min()})(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=Qg(this.serializer),n.addTarget=(function(l,c){let d;const m=c.target;if(d=qg(m)?{documents:OL(l,m)}:{query:DL(l,m).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=gR(l,c.resumeToken);const g=Kg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=af(l,c.snapshotVersion.toTimestamp());const g=Kg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=PL(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=Qg(this.serializer),n.removeTarget=e,this.k_(n)}}class Ak extends RR{constructor(e,n,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=CL(e.writeResults,e.commitTime),s=us(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=Qg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>NL(this.serializer,s)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{}class xk extends Sk{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,$g(n,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ae.UNKNOWN,l.toString())}))}Jo(e,n,s,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,$g(n,s),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ae.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class wk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ws(n),this._a=!1):ge("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="RemoteStore";class Ik{constructor(e,n,s,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{s.enqueueAndForget((async()=>{_o(this)&&(ge(uo,"Restarting streams for network reachability change."),await(async function(m){const g=Pe(m);g.Ia.add(4),await Vu(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Vf(g)})(this))}))})),this.Aa=new wk(s,a)}}async function Vf(t){if(_o(t))for(const e of t.da)await e(!0)}async function Vu(t){for(const e of t.da)await e(!1)}function NR(t,e){const n=Pe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),g_(n)?p_(n):Ll(n).x_()&&m_(n,e))}function f_(t,e){const n=Pe(t),s=Ll(n);n.Ta.delete(e),s.x_()&&CR(n,e),n.Ta.size===0&&(s.x_()?s.B_():_o(n)&&n.Aa.set("Unknown"))}function m_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).H_(e)}function CR(t,e){t.Ra.$e(e),Ll(t).Y_(e)}function p_(t){t.Ra=new bL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.Aa.aa()}function g_(t){return _o(t)&&!Ll(t).M_()&&t.Ta.size>0}function _o(t){return Pe(t).Ia.size===0}function OR(t){t.Ra=void 0}async function Rk(t){t.Aa.set("Online")}async function Nk(t){t.Ta.forEach(((e,n)=>{m_(t,e)}))}async function Ck(t,e){OR(t),g_(t)?(t.Aa.la(e),p_(t)):t.Aa.set("Unknown")}async function Ok(t,e,n){if(t.Aa.set("Online"),e instanceof pR&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))})(t,e)}catch(s){ge(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await lf(t,s)}else if(e instanceof kd?t.Ra.Ye(e):e instanceof mR?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ce.min()))try{const s=await wR(t.localStore);n.compareTo(s)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ta.get(g);_&&l.Ta.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=l.Ta.get(m);if(!_)return;l.Ta.set(m,_.withResumeToken(mn.EMPTY_BYTE_STRING,_.snapshotVersion)),CR(l,m);const E=new $r(_.target,m,g,_.sequenceNumber);m_(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(s){ge(uo,"Failed to raise snapshot:",s),await lf(t,s)}}async function lf(t,e,n){if(!Pl(e))throw e;t.Ia.add(1),await Vu(t),t.Aa.set("Offline"),n||(n=()=>wR(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(uo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Vf(t)}))}function DR(t,e){return e().catch((n=>lf(t,n,e)))}async function Lf(t){const e=Pe(t),n=la(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Jy;for(;Dk(e);)try{const a=await fk(e.localStore,s);if(a===null){e.Pa.length===0&&n.B_();break}s=a.batchId,Mk(e,a)}catch(a){await lf(e,a)}MR(e)&&PR(e)}function Dk(t){return _o(t)&&t.Pa.length<10}function Mk(t,e){t.Pa.push(e);const n=la(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function MR(t){return _o(t)&&!la(t).M_()&&t.Pa.length>0}function PR(t){la(t).start()}async function Pk(t){la(t).na()}async function Vk(t){const e=la(t);for(const n of t.Pa)e.X_(n.mutations)}async function Lk(t,e,n){const s=t.Pa.shift(),a=a_.from(s,e,n);await DR(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Lf(t)}async function kk(t,e){e&&la(t).Z_&&await(async function(s,a){if((function(c){return vL(c)&&c!==ae.ABORTED})(a.code)){const l=s.Pa.shift();la(s).N_(),await DR(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Lf(s)}})(t,e),MR(t)&&PR(t)}async function _A(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ge(uo,"RemoteStore received new credentials");const s=_o(n);n.Ia.add(3),await Vu(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Vf(n)}async function Uk(t,e){const n=Pe(t);e?(n.Ia.delete(2),await Vf(n)):e||(n.Ia.add(2),await Vu(n),n.Aa.set("Unknown"))}function Ll(t){return t.Va||(t.Va=(function(n,s,a){const l=Pe(n);return l.ia(),new Tk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:Rk.bind(null,t),e_:Nk.bind(null,t),n_:Ck.bind(null,t),J_:Ok.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),g_(t)?p_(t):t.Aa.set("Unknown")):(await t.Va.stop(),OR(t))}))),t.Va}function la(t){return t.ma||(t.ma=(function(n,s,a){const l=Pe(n);return l.ia(),new Ak(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Pk.bind(null,t),n_:kk.bind(null,t),ea:Vk.bind(null,t),ta:Lk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Lf(t)):(await t.ma.stop(),t.Pa.length>0&&(ge(uo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,s,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,l){const c=Date.now()+s,d=new y_(e,n,c,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(t,e){if(Ws("AsyncQueue",`${e}: ${t}`),Pl(t))return new pe(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||xe.comparator(n.key,s.key):(n,s)=>xe.comparator(n.key,s.key),this.keyedMap=Gc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Tl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.fa=new At(xe.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Nl{constructor(e,n,s,a,l,c,d,m,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,a,l){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Nl(e,n,Tl.emptySet(n),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Bk{constructor(){this.queries=EA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const a=Pe(n),l=a.queries;a.queries=EA(),l.forEach(((c,d)=>{for(const m of d.wa)m.onError(s)}))})(this,new pe(ae.ABORTED,"Firestore shutting down"))}}function EA(){return new yo((t=>tR(t)),Nf)}async function VR(t,e){const n=Pe(t);let s=3;const a=e.query;let l=n.queries.get(a);l?!l.Sa()&&e.ba()&&(s=2):(l=new jk,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await n.onListen(a,!0);break;case 1:l.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=__(c,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.wa.push(e),e.va(n.onlineState),l.ya&&e.Ca(l.ya)&&v_(n)}async function LR(t,e){const n=Pe(t),s=e.query;let a=3;const l=n.queries.get(s);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Fk(t,e){const n=Pe(t);let s=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(s=!0);c.ya=a}}s&&v_(n)}function zk(t,e,n){const s=Pe(t),a=s.queries.get(e);if(a)for(const l of a.wa)l.onError(n);s.queries.delete(e)}function v_(t){t.Da.forEach((e=>{e.next()}))}var Zg,bA;(bA=Zg||(Zg={})).Fa="default",bA.Cache="cache";class kR{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.key=e}}class jR{constructor(e){this.key=e}}class Hk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=nR(e),this.eu=new Tl(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new vA,a=n?n.eu:this.eu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const T=a.get(_),S=Cf(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;T&&S?T.data.isEqual(S.data)?N!==V&&(s.track({type:3,doc:S}),C=!0):this.iu(T,S)||(s.track({type:2,doc:S}),C=!0,(m&&this.Xa(S,m)>0||g&&this.Xa(S,g)<0)&&(d=!0)):!T&&S?(s.track({type:0,doc:S}),C=!0):T&&!S&&(s.track({type:1,doc:T}),C=!0,(m||g)&&(d=!0)),C&&(S?(c=c.add(S),l=V?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{eu:c,ru:s,Ds:d,mutatedKeys:l}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,E)=>(function(S,N){const V=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:C})}};return V(S)-V(N)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(s),a=a!=null&&a;const d=n&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,g=m!==this.Ya;return this.Ya=m,c.length!==0||g?{snapshot:new Nl(this.query,e.eu,l,c,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const n=[];return e.forEach((s=>{this.Za.has(s)||n.push(new jR(s))})),this.Za.forEach((s=>{e.has(s)||n.push(new UR(s))})),n}uu(e){this.Ha=e.qs,this.Za=Ge();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Nl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const E_="SyncEngine";class Gk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class qk{constructor(e){this.key=e,this.lu=!1}}class Yk{constructor(e,n,s,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new yo((d=>tR(d)),Nf),this.Tu=new Map,this.Iu=new Set,this.du=new At(xe.comparator),this.Eu=new Map,this.Au=new c_,this.Ru={},this.Vu=new Map,this.mu=Rl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Kk(t,e,n=!0){const s=qR(t);let a;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await BR(s,e,n,!0),a}async function $k(t,e){const n=qR(t);await BR(n,e,!0,!1)}async function BR(t,e,n,s){const a=await mk(t.localStore,cs(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return s&&(d=await Xk(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&NR(t.remoteStore,a),d}async function Xk(t,e,n,s,a){t.gu=(E,T,S)=>(async function(V,C,G,Z){let H=C.view.nu(G);H.Ds&&(H=await fA(V.localStore,C.query,!1).then((({documents:O})=>C.view.nu(O,H))));const X=Z&&Z.targetChanges.get(C.targetId),ce=Z&&Z.targetMismatches.get(C.targetId)!=null,he=C.view.applyChanges(H,V.isPrimaryClient,X,ce);return AA(V,C.targetId,he._u),he.snapshot})(t,E,T,S);const l=await fA(t.localStore,e,!0),c=new Hk(e,l.qs),d=c.nu(l.documents),m=Pu.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),g=c.applyChanges(d,t.isPrimaryClient,m);AA(t,n,g._u);const _=new Gk(e,n,c);return t.Pu.set(e,_),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),g.snapshot}async function Qk(t,e,n){const s=Pe(t),a=s.Pu.get(e),l=s.Tu.get(a.targetId);if(l.length>1)return s.Tu.set(a.targetId,l.filter((c=>!Nf(c,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Wg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&f_(s.remoteStore,a.targetId),ey(s,a.targetId)})).catch(Ml)):(ey(s,a.targetId),await Wg(s.localStore,a.targetId,!0))}async function Wk(t,e){const n=Pe(t),s=n.Pu.get(e),a=n.Tu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),f_(n.remoteStore,s.targetId))}async function Jk(t,e,n){const s=rU(t);try{const a=await(function(c,d){const m=Pe(c),g=yt.now(),_=d.reduce(((S,N)=>S.add(N.key)),Ge());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=Js(),V=Ge();return m.Os.getEntries(S,_).next((C=>{N=C,N.forEach(((G,Z)=>{Z.isValidDocument()||(V=V.add(G))}))})).next((()=>m.localDocuments.getOverlayedDocuments(S,N))).next((C=>{E=C;const G=[];for(const Z of d){const H=mL(Z,E.get(Z.key).overlayedDocument);H!=null&&G.push(new ga(Z.key,H,KI(H.value.mapValue),Fi.exists(!0)))}return m.mutationQueue.addMutationBatch(S,g,G,d)})).next((C=>{T=C;const G=C.applyToLocalDocumentSet(E,V);return m.documentOverlayCache.saveOverlays(S,C.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:sR(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Ru[c.currentUser.toKey()];g||(g=new At(Ue)),g=g.insert(d,m),c.Ru[c.currentUser.toKey()]=g})(s,a.batchId,n),await Lu(s,a.changes),await Lf(s.remoteStore)}catch(a){const l=__(a,"Failed to persist write");n.reject(l)}}async function FR(t,e){const n=Pe(t);try{const s=await hk(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Eu.get(l);c&&(tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?tt(c.lu,14607):a.removedDocuments.size>0&&(tt(c.lu,42227),c.lu=!1))})),await Lu(n,s,e)}catch(s){await Ml(s)}}function TA(t,e,n){const s=Pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Pe(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,E)=>{for(const T of E.wa)T.va(d)&&(g=!0)})),g&&v_(m)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Zk(t,e,n){const s=Pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),l=a&&a.key;if(l){let c=new At(xe.comparator);c=c.insert(l,An.newNoDocument(l,Ce.min()));const d=Ge().add(l),m=new Mf(Ce.min(),new Map,new At(Ue),c,d);await FR(s,m),s.du=s.du.remove(l),s.Eu.delete(e),b_(s)}else await Wg(s.localStore,e,!1).then((()=>ey(s,e,n))).catch(Ml)}async function eU(t,e){const n=Pe(t),s=e.batch.batchId;try{const a=await uk(n.localStore,e);HR(n,s,null),zR(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(n,a)}catch(a){await Ml(a)}}async function tU(t,e,n){const s=Pe(t);try{const a=await(function(c,d){const m=Pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(tt(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);HR(s,e,n),zR(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Lu(s,a)}catch(a){await Ml(a)}}function zR(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function HR(t,e,n){const s=Pe(t);let a=s.Ru[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function ey(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Tu.get(e))t.Pu.delete(s),n&&t.hu.pu(s,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((s=>{t.Au.containsKey(s)||GR(t,s)}))}function GR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(f_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),b_(t))}function AA(t,e,n){for(const s of n)s instanceof UR?(t.Au.addReference(s.key,e),nU(t,s)):s instanceof jR?(ge(E_,"Document no longer in limbo: "+s.key),t.Au.removeReference(s.key,e),t.Au.containsKey(s.key)||GR(t,s.key)):Ne(19791,{yu:s})}function nU(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Iu.has(s)||(ge(E_,"New document in limbo: "+n),t.Iu.add(s),b_(t))}function b_(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new xe(dt.fromString(e)),s=t.mu.next();t.Eu.set(s,new qk(n)),t.du=t.du.insert(n,s),NR(t.remoteStore,new $r(cs(i_(n.path)),s,"TargetPurposeLimboResolution",wf.ue))}}async function Lu(t,e,n){const s=Pe(t),a=[],l=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach(((d,m)=>{c.push(s.gu(m,e,n).then((g=>{var _;if((g||n)&&s.isPrimaryClient){const E=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){a.push(g);const E=h_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),s.hu.J_(a),await(async function(m,g){const _=Pe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>le.forEach(g,(T=>le.forEach(T.Is,(S=>_.persistence.referenceDelegate.addReference(E,T.targetId,S))).next((()=>le.forEach(T.ds,(S=>_.persistence.referenceDelegate.removeReference(E,T.targetId,S)))))))))}catch(E){if(!Pl(E))throw E;ge(d_,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const S=_.Fs.get(T),N=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(N);_.Fs=_.Fs.insert(T,V)}}})(s.localStore,l))}async function iU(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ge(E_,"User change. New user:",e.toKey());const s=await xR(n.localStore,e);n.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((m=>{m.reject(new pe(ae.CANCELLED,c))}))})),l.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lu(n,s.Bs)}}function sU(t,e){const n=Pe(t),s=n.Eu.get(e);if(s&&s.lu)return Ge().add(s.key);{let a=Ge();const l=n.Tu.get(e);if(!l)return a;for(const c of l){const d=n.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}function qR(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zk.bind(null,e),e.hu.J_=Fk.bind(null,e.eventManager),e.hu.pu=zk.bind(null,e.eventManager),e}function rU(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tU.bind(null,e),e}class cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return ck(this.persistence,new ak,e.initialUser,this.serializer)}Du(e){return new SR(u_.Vi,this.serializer)}bu(e){return new gk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cf.provider={build:()=>new cf};class aU extends cf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){tt(this.persistence.referenceDelegate instanceof of,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qL(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new SR((s=>of.Vi(s,n)),this.serializer)}}class ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>TA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iU.bind(null,this.syncEngine),await Uk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bk})()}createDatastore(e){const n=Pf(e.databaseInfo.databaseId),s=(function(l){return new bk(l)})(e.databaseInfo);return(function(l,c,d,m){return new xk(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,l,c,d){return new Ik(s,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>TA(this.syncEngine,n,0)),(function(){return gA.C()?new gA:new yk})())}createSyncEngine(e,n){return(function(a,l,c,d,m,g,_){const E=new Yk(a,l,c,d,m,g);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const l=Pe(a);ge(uo,"RemoteStore shutting down."),l.Ia.add(5),await Vu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class oU{constructor(e,n,s,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Tn.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ge(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ge(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=__(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ug(t,e){t.asyncQueue.verifyOperationInProgress(),ge(ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async a=>{s.isEqual(a)||(await xR(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{ia("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{ia("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),t._offlineComponents=e}async function SA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lU(t);ge(ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>_A(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,a)=>_A(e.remoteStore,a))),t._onlineComponents=e}async function lU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(ca,"Using user provided OfflineComponentProvider");try{await ug(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ae.FAILED_PRECONDITION||a.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ia("Error using user provided cache. Falling back to memory cache: "+n),await ug(t,new cf)}}else ge(ca,"Using default OfflineComponentProvider"),await ug(t,new aU(void 0));return t._offlineComponents}async function KR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(ca,"Using user provided OnlineComponentProvider"),await SA(t,t._uninitializedComponentsProvider._online)):(ge(ca,"Using default OnlineComponentProvider"),await SA(t,new ty))),t._onlineComponents}function cU(t){return KR(t).then((e=>e.syncEngine))}async function ny(t){const e=await KR(t),n=e.eventManager;return n.onListen=Kk.bind(null,e.syncEngine),n.onUnlisten=Qk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$k.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wk.bind(null,e.syncEngine),n}function uU(t,e,n={}){const s=new Zr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new YR({next:T=>{_.Ou(),c.enqueueAndForget((()=>LR(l,E))),T.fromCache&&m.source==="server"?g.reject(new pe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new kR(d,_,{includeMetadataChanges:!0,ka:!0});return VR(l,E)})(await ny(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="firestore.googleapis.com",wA=!0;class IA{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XR,this.ssl=wA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HL)throw new pe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$R((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new _V;switch(s.type){case"firstParty":return new TV(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=xA.get(n);s&&(ge("ComponentProvider","Removing Datastore"),xA.delete(n),s.terminate())})(this),Promise.resolve()}}function hU(t,e,n,s={}){var a;t=Bi(t,kf);const l=da(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),m=`${e}:${n}`;l&&(Ly(`https://${m}`),ky("Firestore",!0)),c.host!==XR&&c.host!==m&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:s});if(!ro(g,d)&&(t._setSettings(g),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=Tn.MOCK_USER;else{_=Fw(s.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Tn(T)}t._authCredentials=new vV(new PI(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new er(this.firestore,e,this._query)}}class Vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Du(n,Vt._jsonSchema))return new Vt(e,s||null,new xe(dt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Kt("string",Vt._jsonSchemaVersion),referencePath:Kt("string")};class ea extends er{constructor(e,n,s){super(e,n,i_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new xe(e))}withConverter(e){return new ea(this.firestore,e,this._path)}}function ku(t,e,...n){if(t=Tt(t),LI("collection","path",e),t instanceof kf){const s=dt.fromString(e,...n);return BT(s),new ea(t,null,s)}{if(!(t instanceof Vt||t instanceof ea))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return BT(s),new ea(t.firestore,null,s)}}function tr(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Wy.newId()),LI("doc","path",e),t instanceof kf){const s=dt.fromString(e,...n);return jT(s),new Vt(t,null,new xe(s))}{if(!(t instanceof Vt||t instanceof ea))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return jT(s),new Vt(t.firestore,t instanceof ea?t.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="AsyncQueue";class NA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new IR(this,"async_queue_retry"),this.oc=()=>{const s=cg();s&&ge(RA,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=cg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=cg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Pl(e))throw e;ge(RA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Ws("INTERNAL UNHANDLED ERROR: ",CA(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=y_.createAndSchedule(this,e,n,s,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&Ne(47125,{hc:CA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function CA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class ho extends kf{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new NA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NA(e),this._firestoreClient=void 0,await e}}}function dU(t,e){const n=typeof t=="object"?t:By(),s=typeof t=="string"?t:Zd,a=bf(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=Uw("firestore");l&&hU(a,...l)}return a}function T_(t){if(t._terminated)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fU(t),t._firestoreClient}function fU(t){var e,n,s;const a=t._freezeSettings(),l=(function(d,m,g,_){return new jV(d,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,$R(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new oU(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(mn.fromBase64String(e))}catch(n){throw new pe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,wi._jsonSchema))return wi.fromBase64String(e.bytes)}}wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:Kt("string",wi._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hs._jsonSchemaVersion}}static fromJSON(e){if(Du(e,hs._jsonSchema))return new hs(e.latitude,e.longitude)}}hs._jsonSchemaVersion="firestore/geoPoint/1.0",hs._jsonSchema={type:Kt("string",hs._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ds._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,ds._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ds(e.vectorValues);throw new pe(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ds._jsonSchemaVersion="firestore/vectorValue/1.0",ds._jsonSchema={type:Kt("string",ds._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=/^__.*__$/;class pU{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ga(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mu(e,this.data,n,this.fieldTransforms)}}class QR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ga(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:t})}}class S_{constructor(e,n,s,a,l,c){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new S_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return uf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(WR(this.Ec)&&mU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class gU{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Pf(e)}Dc(e,n,s,a=!1){return new S_({Ec:e,methodName:n,bc:s,path:fn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x_(t){const e=t._freezeSettings(),n=Pf(t._databaseId);return new gU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yU(t,e,n,s,a,l={}){const c=t.Dc(l.merge||l.mergeFields?2:0,e,n,a);w_("Data must be an object, but it was:",c,s);const d=JR(s,c);let m,g;if(l.merge)m=new ci(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=iy(e,E,n);if(!c.contains(T))throw new pe(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);eN(_,T)||_.push(T)}m=new ci(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new pU(new Qn(d),m,g)}class jf extends A_{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function _U(t,e,n,s){const a=t.Dc(1,e,n);w_("Data must be an object, but it was:",a,s);const l=[],c=Qn.empty();pa(s,((m,g)=>{const _=I_(e,m,n);g=Tt(g);const E=a.gc(_);if(g instanceof jf)l.push(_);else{const T=Uu(g,E);T!=null&&(l.push(_),c.set(_,T))}}));const d=new ci(l);return new QR(c,d,a.fieldTransforms)}function vU(t,e,n,s,a,l){const c=t.Dc(1,e,n),d=[iy(e,s,n)],m=[a];if(l.length%2!=0)throw new pe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(iy(e,l[T])),m.push(l[T+1]);const g=[],_=Qn.empty();for(let T=d.length-1;T>=0;--T)if(!eN(g,d[T])){const S=d[T];let N=m[T];N=Tt(N);const V=c.gc(S);if(N instanceof jf)g.push(S);else{const C=Uu(N,V);C!=null&&(g.push(S),_.set(S,C))}}const E=new ci(g);return new QR(_,E,c.fieldTransforms)}function EU(t,e,n,s=!1){return Uu(n,t.Dc(s?4:3,e))}function Uu(t,e){if(ZR(t=Tt(t)))return w_("Unsupported field value:",e,t),JR(t,e);if(t instanceof A_)return(function(s,a){if(!WR(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const d of s){let m=Uu(d,a.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(t,e)}return(function(s,a){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lL(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:af(a.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:af(a.serializer,l)}}if(s instanceof hs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wi)return{bytesValue:gR(a.serializer,s._byteString)};if(s instanceof Vt){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:l_(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ds)return(function(c,d){return{mapValue:{fields:{[qI]:{stringValue:YI},[ef]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return s_(d.serializer,g)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${xf(s)}`)})(t,e)}function JR(t,e){const n={};return jI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(t,((s,a)=>{const l=Uu(a,e.Vc(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function ZR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof hs||t instanceof wi||t instanceof Vt||t instanceof A_||t instanceof ds)}function w_(t,e,n){if(!ZR(n)||!kI(n)){const s=xf(n);throw s==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+s)}}function iy(t,e,n){if((e=Tt(e))instanceof Uf)return e._internalPath;if(typeof e=="string")return I_(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}const bU=new RegExp("[~\\*/\\[\\]]");function I_(t,e,n){if(e.search(bU)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uf(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${a}`),m+=")"),new pe(ae.INVALID_ARGUMENT,d+t+m)}function eN(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,s,a,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(R_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TU extends tN{data(){return super.data()}}function R_(t,e){return typeof e=="string"?I_(t,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N_{}class C_ extends N_{}function AU(t,e,...n){let s=[];e instanceof N_&&s.push(e),s=s.concat(n),(function(l){const c=l.filter((m=>m instanceof D_)).length,d=l.filter((m=>m instanceof O_)).length;if(c>1||c>0&&d>0)throw new pe(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)t=a._apply(t);return t}class O_ extends C_{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new O_(e,n,s)}_apply(e){const n=this._parse(e);return iN(e._query,n),new er(e.firestore,e.converter,Yg(e._query,n))}_parse(e){const n=x_(e.firestore);return(function(l,c,d,m,g,_,E){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){MA(E,_);const N=[];for(const V of E)N.push(DA(m,l,V));T={arrayValue:{values:N}}}else T=DA(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||MA(E,_),T=EU(d,c,E,_==="in"||_==="not-in");return Yt.create(g,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class D_ extends N_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new D_(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)iN(c,m),c=Yg(c,m)})(e._query,n),new er(e.firestore,e.converter,Yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class M_ extends C_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new M_(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new pe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gu(l,c)})(e._query,this._field,this._direction);return new er(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Vl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function SU(t,e="asc"){const n=e,s=R_("orderBy",t);return M_._create(s,n)}class P_ extends C_{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new P_(e,n,s)}_apply(e){return new er(e.firestore,e.converter,nf(e._query,this._limit,this._limitType))}}function xU(t){return RV("limit",t),P_._create("limit",t,"F")}function DA(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new pe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eR(e)&&n.indexOf("/")!==-1)throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(dt.fromString(n));if(!xe.isDocumentKey(s))throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $T(t,new xe(s))}if(n instanceof Vt)return $T(t,n._key);throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(n)}.`)}function MA(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(t,e){const n=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wU{convertValue(e,n="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return pa(e,((a,l)=>{s[a]=this.convertValue(l,n)})),s}convertVectorValue(e){var n,s,a;const l=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[ef].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((c=>Pt(c.doubleValue)));return new ds(l)}convertGeoPoint(e){return new hs(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const n=ra(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=dt.fromString(e);tt(TR(s),9688,{name:e});const a=new mu(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return a.isEqual(n)||Ws(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends tN{constructor(e,n,s,a,l,c){super(e,n,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(R_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Kt("string",to._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Ud extends to{data(e={}){return super.data(e)}}class no{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Yc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ud(this._firestore,this._userDataWriter,s.key,s,new Yc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Ud(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Yc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Ud(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Yc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:RU(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=no._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}no._jsonSchemaVersion="firestore/querySnapshot/1.0",no._jsonSchema={type:Kt("string",no._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class V_ extends wU{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function sN(t){t=Bi(t,er);const e=Bi(t.firestore,ho),n=T_(e),s=new V_(e);return nN(t._query),uU(n,t._query).then((a=>new no(e,s,t,a)))}function L_(t,e,n){t=Bi(t,Vt);const s=Bi(t.firestore,ho),a=IU(t.converter,e);return U_(s,[yU(x_(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,Fi.none())])}function Bf(t,e,n,...s){t=Bi(t,Vt);const a=Bi(t.firestore,ho),l=x_(a);let c;return c=typeof(e=Tt(e))=="string"||e instanceof Uf?vU(l,"updateDoc",t._key,e,n,s):_U(l,"updateDoc",t._key,e),U_(a,[c.toMutation(t._key,Fi.exists(!0))])}function rN(t){return U_(Bi(t.firestore,ho),[new r_(t._key,Fi.none())])}function k_(t,...e){var n,s,a;t=Tt(t);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||OA(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(OA(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(s=E.error)===null||s===void 0?void 0:s.bind(E),e[c+2]=(a=E.complete)===null||a===void 0?void 0:a.bind(E)}let m,g,_;if(t instanceof Vt)g=Bi(t.firestore,ho),_=i_(t._key.path),m={next:E=>{e[c]&&e[c](NU(g,t,E))},error:e[c+1],complete:e[c+2]};else{const E=Bi(t,er);g=Bi(E.firestore,ho),_=E._query;const T=new V_(g);m={next:S=>{e[c]&&e[c](new no(g,T,E,S))},error:e[c+1],complete:e[c+2]},nN(t._query)}return(function(T,S,N,V){const C=new YR(V),G=new kR(S,C,N);return T.asyncQueue.enqueueAndForget((async()=>VR(await ny(T),G))),()=>{C.Ou(),T.asyncQueue.enqueueAndForget((async()=>LR(await ny(T),G)))}})(T_(g),_,d,m)}function U_(t,e){return(function(s,a){const l=new Zr;return s.asyncQueue.enqueueAndForget((async()=>Jk(await cU(s),a,l))),l.promise})(T_(t),e)}function NU(t,e,n){const s=n.docs.get(e._key),a=new V_(t);return new to(t,a,e._key,s,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){Dl=a})(po),ao(new na("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new ho(new EV(s.getProvider("auth-internal")),new AV(c,s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(g.options.projectId,_)})(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),as(PT,VT,e),as(PT,VT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebasestorage.googleapis.com",oN="storageBucket",CU=120*1e3,OU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends gs{constructor(e,n,s=0){super(hg(e),`Firebase Storage: ${n} (${hg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function hg(t){return"storage/"+t}function j_(){const t="An unknown error occurred, please check the error payload for server response.";return new Ct(Nt.UNKNOWN,t)}function DU(t){return new Ct(Nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MU(t){return new Ct(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(Nt.UNAUTHENTICATED,t)}function VU(){return new Ct(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LU(t){return new Ct(Nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function kU(){return new Ct(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UU(){return new Ct(Nt.CANCELED,"User canceled the upload/download.")}function jU(t){return new Ct(Nt.INVALID_URL,"Invalid URL '"+t+"'.")}function BU(t){return new Ct(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function FU(){return new Ct(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oN+"' property when initializing the app?")}function zU(){return new Ct(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function HU(){return new Ct(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GU(t){return new Ct(Nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sy(t){return new Ct(Nt.INVALID_ARGUMENT,t)}function lN(){return new Ct(Nt.APP_DELETED,"The Firebase app was deleted.")}function qU(t){return new Ct(Nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(t,e){return new Ct(Nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function kc(t){throw new Ct(Nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ui.makeFromUrl(e,n)}catch{return new ui(e,"")}if(s.path==="")return s;throw BU(e)}static makeFromUrl(e,n){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(X){X.path_=decodeURIComponent(X.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${E}/${_}/b/${a}/o${T}`,"i"),N={bucket:1,path:3},V=n===aN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",G=new RegExp(`^https?://${V}/${a}/${C}`,"i"),H=[{regex:d,indices:m,postModify:l},{regex:S,indices:N,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let X=0;X<H.length;X++){const ce=H[X],he=ce.regex.exec(e);if(he){const O=he[ce.indices.bucket];let I=he[ce.indices.path];I||(I=""),s=new ui(O,I),ce.postModify(s);break}}if(s==null)throw jU(e);return s}}class YU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e,n){let s=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function _(...C){g||(g=!0,e.apply(null,C))}function E(C){a=setTimeout(()=>{a=null,t(S,m())},C)}function T(){l&&clearTimeout(l)}function S(C,...G){if(g){T();return}if(C){T(),_.call(null,C,...G);return}if(m()||c){T(),_.call(null,C,...G);return}s<64&&(s*=2);let H;d===1?(d=2,H=0):H=(s+Math.random())*1e3,E(H)}let N=!1;function V(C){N||(N=!0,T(),!g&&(a!==null?(C||(d=2),clearTimeout(a),E(0)):C||(d=1)))}return E(0),l=setTimeout(()=>{c=!0,V(!0)},n),V}function $U(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){return t!==void 0}function QU(t){return typeof t=="object"&&!Array.isArray(t)}function B_(t){return typeof t=="string"||t instanceof String}function PA(t){return F_()&&t instanceof Blob}function F_(){return typeof Blob<"u"}function VA(t,e,n,s){if(s<e)throw sy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw sy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function cN(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const a=e(s)+"="+e(t[s]);n=n+a+"&"}return n=n.slice(0,-1),n}var io;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(io||(io={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,n,s,a,l,c,d,m,g,_,E,T=!0,S=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new _d(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===io.NO_ERROR,m=l.getStatus();if(!d||WU(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===io.ABORT;s(!1,new _d(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;s(!0,new _d(g,l))})},n=(s,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());XU(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=j_();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?lN():UU();c(m)}else{const m=kU();c(m)}};this.canceled_?n(!1,new _d(!1,null,!0)):this.backoffId_=KU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$U(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _d{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function ZU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ej(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ij(t,e,n,s,a,l,c=!0,d=!1){const m=cN(t.urlParams),g=t.url+m,_=Object.assign({},t.headers);return tj(_,e),ZU(_,n),ej(_,l),nj(_,s),new JU(g,t.method,_,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rj(...t){const e=sj();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(F_())return new Blob(t);throw new Ct(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){if(typeof atob>"u")throw GU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dg{constructor(e,n){this.data=e,this.contentType=n||null}}function lj(t,e){switch(t){case rs.RAW:return new dg(uN(e));case rs.BASE64:case rs.BASE64URL:return new dg(hN(t,e));case rs.DATA_URL:return new dg(uj(e),hj(e))}throw j_()}function uN(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=t.charCodeAt(++n);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function cj(t){let e;try{e=decodeURIComponent(t)}catch{throw nu(rs.DATA_URL,"Malformed data URL.")}return uN(e)}function hN(t,e){switch(t){case rs.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw nu(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw nu(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oj(e)}catch(a){throw a.message.includes("polyfill")?a:nu(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}class dN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=dj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function uj(t){const e=new dN(t);return e.base64?hN(rs.BASE64,e.rest):cj(e.rest)}function hj(t){return new dN(t).contentType}function dj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){let s=0,a="";PA(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(PA(this.data_)){const s=this.data_,a=aj(s,e,n);return a===null?null:new Kr(a)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Kr(s,!0)}}static getBlob(...e){if(F_()){const n=e.map(s=>s instanceof Kr?s.data_:s);return new Kr(rj.apply(null,n))}else{const n=e.map(c=>B_(c)?lj(rs.RAW,c).data:c.data_);let s=0;n.forEach(c=>{s+=c.byteLength});const a=new Uint8Array(s);let l=0;return n.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new Kr(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){let e;try{e=JSON.parse(t)}catch{return null}return QU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mj(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function mN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t,e){return e}class Vn{constructor(e,n,s,a){this.server=e,this.local=n||e,this.writable=!!s,this.xform=a||pj}}let vd=null;function gj(t){return!B_(t)||t.length<2?t:mN(t)}function pN(){if(vd)return vd;const t=[];t.push(new Vn("bucket")),t.push(new Vn("generation")),t.push(new Vn("metageneration")),t.push(new Vn("name","fullPath",!0));function e(l,c){return gj(c)}const n=new Vn("name");n.xform=e,t.push(n);function s(l,c){return c!==void 0?Number(c):c}const a=new Vn("size");return a.xform=s,t.push(a),t.push(new Vn("timeCreated")),t.push(new Vn("updated")),t.push(new Vn("md5Hash",null,!0)),t.push(new Vn("cacheControl",null,!0)),t.push(new Vn("contentDisposition",null,!0)),t.push(new Vn("contentEncoding",null,!0)),t.push(new Vn("contentLanguage",null,!0)),t.push(new Vn("contentType",null,!0)),t.push(new Vn("metadata","customMetadata",!0)),vd=t,vd}function yj(t,e){function n(){const s=t.bucket,a=t.fullPath,l=new ui(s,a);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function _j(t,e,n){const s={};s.type="file";const a=n.length;for(let l=0;l<a;l++){const c=n[l];s[c.local]=c.xform(s,e[c.server])}return yj(s,t),s}function gN(t,e,n){const s=fN(e);return s===null?null:_j(t,s,n)}function vj(t,e,n,s){const a=fN(e);if(a===null||!B_(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const _=t.bucket,E=t.fullPath,T="/b/"+c(_)+"/o/"+c(E),S=z_(T,n,s),N=cN({alt:"media",token:g});return S+N})[0]}function Ej(t,e){const n={},s=e.length;for(let a=0;a<s;a++){const l=e[a];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class yN{constructor(e,n,s,a){this.url=e,this.method=n,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){if(!t)throw j_()}function bj(t,e){function n(s,a){const l=gN(t,a,e);return _N(l!==null),l}return n}function Tj(t,e){function n(s,a){const l=gN(t,a,e);return _N(l!==null),vj(l,a,t.host,t._protocol)}return n}function vN(t){function e(n,s){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=VU():a=PU():n.getStatus()===402?a=MU(t.bucket):n.getStatus()===403?a=LU(t.path):a=s,a.status=n.getStatus(),a.serverResponse=s.serverResponse,a}return e}function Aj(t){const e=vN(t);function n(s,a){let l=e(s,a);return s.getStatus()===404&&(l=DU(t.path)),l.serverResponse=a.serverResponse,l}return n}function Sj(t,e,n){const s=e.fullServerUrl(),a=z_(s,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,d=new yN(a,l,Tj(t,n),c);return d.errorHandler=Aj(e),d}function xj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wj(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=xj(null,e)),s}function Ij(t,e,n,s,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let H="";for(let X=0;X<2;X++)H=H+Math.random().toString().slice(2);return H}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const g=wj(e,s,a),_=Ej(g,n),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,T=`\r
--`+m+"--",S=Kr.getBlob(E,s,T);if(S===null)throw zU();const N={name:g.fullPath},V=z_(l,t.host,t._protocol),C="POST",G=t.maxUploadRetryTime,Z=new yN(V,C,bj(t,n),G);return Z.urlParams=N,Z.headers=c,Z.body=S.uploadData(),Z.errorHandler=vN(e),Z}class Rj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,a,l){if(this.sent_)throw kc("cannot .send() more than once");if(da(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Nj extends Rj{initXhr(){this.xhr_.responseType="text"}}function EN(){return new Nj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this._service=e,n instanceof ui?this._location=n:this._location=ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fo(e,n)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mN(this._location.path)}get storage(){return this._service}get parent(){const e=fj(this._location.path);if(e===null)return null;const n=new ui(this._location.bucket,e);return new fo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qU(e)}}function Cj(t,e,n){t._throwIfRoot("uploadBytes");const s=Ij(t.storage,t._location,pN(),new Kr(e,!0),n);return t.storage.makeRequestWithTokens(s,EN).then(a=>({metadata:a,ref:t}))}function Oj(t){t._throwIfRoot("getDownloadURL");const e=Sj(t.storage,t._location,pN());return t.storage.makeRequestWithTokens(e,EN).then(n=>{if(n===null)throw HU();return n})}function Dj(t,e){const n=mj(t._location.path,e),s=new ui(t._location.bucket,n);return new fo(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){return/^[A-Za-z]+:\/\//.test(t)}function Pj(t,e){return new fo(t,e)}function bN(t,e){if(t instanceof H_){const n=t;if(n._bucket==null)throw FU();const s=new fo(n,n._bucket);return e!=null?bN(s,e):s}else return e!==void 0?Dj(t,e):t}function Vj(t,e){if(e&&Mj(e)){if(t instanceof H_)return Pj(t,e);throw sy("To use ref(service, url), the first argument must be a Storage instance.")}else return bN(t,e)}function LA(t,e){const n=e==null?void 0:e[oN];return n==null?null:ui.makeFromBucketSpec(n,t)}function Lj(t,e,n,s={}){t.host=`${e}:${n}`;const a=da(e);a&&(Ly(`https://${t.host}/b`),ky("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(t._overrideAuthToken=typeof l=="string"?l:Fw(l,t.app.options.projectId))}class H_{constructor(e,n,s,a,l,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=aN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CU,this._maxUploadRetryTime=OU,this._requests=new Set,a!=null?this._bucket=ui.makeFromBucketSpec(a,this._host):this._bucket=LA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=LA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fo(this,e)}_makeRequest(e,n,s,a,l=!0){if(this._deleted)return new YU(lN());{const c=ij(e,this._appId,s,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,a).getPromise()}}const kA="@firebase/storage",UA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="storage";function kj(t,e,n){return t=Tt(t),Cj(t,e,n)}function ry(t){return t=Tt(t),Oj(t)}function ay(t,e){return t=Tt(t),Vj(t,e)}function AN(t=By(),e){t=Tt(t);const s=bf(t,TN).getImmediate({identifier:e}),a=Uw("storage");return a&&Uj(s,...a),s}function Uj(t,e,n,s={}){Lj(t,e,n,s)}function jj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new H_(n,s,a,e,po)}function Bj(){ao(new na(TN,jj,"PUBLIC").setMultipleInstances(!0)),as(kA,UA,""),as(kA,UA,"esm2017")}Bj();const Fj={apiKey:"AIzaSyBpr3e4YRWozkPE2Lk49NeoXm84FSrfEZA",authDomain:"blade-bourbon-studio.firebaseapp.com",projectId:"blade-bourbon-studio",storageBucket:"blade-bourbon-studio.firebasestorage.app",messagingSenderId:"627479765301",appId:"1:627479765301:web:5cc51b21f5da70ddba2c7c"},G_=Gw(Fj),hi=dU(G_),Ff=mV(G_),jA=AN(G_),zj=async(t,e)=>(await ZP(Ff,t,e)).user,Hj=async(t,e)=>(await JP(Ff,t,e)).user,Gj=async()=>{await i2(Ff)},qj=t=>n2(Ff,t),Yj=({onLoginSuccess:t,onCancel:e})=>{const[n,s]=Q.useState(""),[a,l]=Q.useState(""),[c,d]=Q.useState(null),[m,g]=Q.useState(!1),[_,E]=Q.useState(!1),T=async S=>{S.preventDefault(),g(!0),d(null);try{_?(await Hj(n,a),t()):(await zj(n,a),t())}catch(N){console.error("Auth failed:",N),d(N.message||"Authentication failed.")}finally{g(!1)}};return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-dark-900 border border-gold-500/30 p-8 rounded-xl w-full max-w-md shadow-2xl animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-6 text-center",children:_?"Create Admin Account":"Authorized Access Only"}),c&&y.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 p-3 rounded mb-4 text-center text-sm",children:c}),y.jsxs("form",{onSubmit:T,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Email"}),y.jsx("input",{type:"email",value:n,onChange:S=>s(S.target.value),className:"w-full bg-dark-800 border border-gray-700 rounded p-3 text-white focus:border-gold-500 outline-none transition",placeholder:"admin@bladebourbon.com",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Password"}),y.jsx("input",{type:"password",value:a,onChange:S=>l(S.target.value),className:"w-full bg-dark-800 border border-gray-700 rounded p-3 text-white focus:border-gold-500 outline-none transition",placeholder:"",required:!0})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 rounded text-gray-400 hover:text-white transition",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-gold-500 text-black font-bold py-3 rounded hover:bg-gold-400 transition disabled:opacity-50",children:m?"Processing...":_?"Register":"Login"})]}),y.jsx("div",{className:"text-center pt-2",children:y.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-gold-500 hover:text-gold-400 underline",children:_?"Back to Login":"Register new Admin"})})]})]})})},q_=["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],Ys={en:{nav:{home:"Home",services:"Services",barbers:"Barbers",book:"Book Appointment",bookShort:"Book",admin:"Admin",staffLogin:"Staff Login",backToWeb:"Back to Website"},hero:{est:"Est. 2024  Sofia",title1:"Define Your",title2:"Unique Style",subtitle:"Professional grooming at Nalby Style. Where precision meets personality.",ctaBook:"Book Now",ctaServices:"Services"},features:{barbersTitle:"Pro Team",barbersDesc:"Expert styling for the modern man.",premiumTitle:"Premium Cuts",premiumDesc:"Quality service in a relaxed atmosphere.",aiTitle:"Style Advisor",aiDesc:"Ask our AI for the perfect look recommendation."},contact:{title:"Find The Studio",subtitle:"Conveniently located in Slavia district.",addressTitle:"Location",address:"ul. Zhitnitsa 21, Slavia, 1612 Sofia",phoneTitle:"Contact",phone:"0895 222 269",email:"info@nalbystyle.com",hoursTitle:"Opening Hours",hours:"Mon - Sat: 10:00 - 20:00",sunday:"Sunday: Closed",getDirections:"Get Directions"},booking:{step1:"Select Service",step2:"Choose Professional",step3:"Date & Time",step4:"Your Details",back:"Back",next:"Next Step",confirm:"Confirm Booking",selectDate:"Select Date",availableSlots:"Available Slots",plsSelectDate:"Please select a date first.",showingAvailability:"Showing availability for",fullName:"Full Name",email:"Email Address",phone:"Phone Number",summary:"Booking Summary",service:"Service",barber:"Barber",time:"Time",alertSent:"Appointment Request Sent!",findNextSlot:"Find First Available",noSlotsFound:"No available slots found in the next 30 days."},services:{menu:"Our Menu",title:"Signature Services",subtitle:"Each service at Blade & Bourbon is an experience designed to relax, refine, and rejuvenate.",bookBtn:"Book This Service",minutes:"Minutes"},barbers:{team:"The Team",title:"Master Barbers",subtitle:"Our artisans are chosen for their skill, style, and dedication to the craft.",bookBtn:"Book Appointment with"},staff:{portal:"Staff Portal",selectProfile:"Select your profile to access your schedule",logout:"Logout",schedule:"Schedule",addBooking:"Add Booking",cancelConfirm:"Cancel this appointment?",newBooking:"New Booking",clientName:"Client Name",confirmBooking:"Confirm Booking",myStats:"My Stats",totalRevenue:"Total Revenue",totalAppts:"Appointments",topService:"Top Service"},admin:{title:"Salon Management",tabs:{appointments:"Appointments",barbers:"Staff",services:"Services",analytics:"Analytics"},table:{date:"Date & Time",customer:"Customer",barber:"Barber",service:"Service",status:"Status",actions:"Actions",noApts:"No active appointments found."},addBarber:{title:"Add New Barber",editTitle:"Edit Staff Member",name:"Full Name",spec:"Specialty",bio:"Biography",btn:"Add Staff Member",updateBtn:"Update Staff Member",createBtn:"Create & Generate ID",upload:"Upload",aiPolish:"AI Polish"},placeholders:{name:"e.g. John Doe",spec:"Select Specialty",bio:"Write rough notes (e.g. '10 years exp, loves beards')..."},addService:{title:"Add New Service",nameEn:"Name (EN)",nameBg:"Name (BG)",price:"Price ()",duration:"Duration (min)",descEn:"Description (EN)",descBg:"Description (BG)",btn:"Add Service",aiGen:"AI Describe"},currentStaff:"Current Staff",filters:{allBarbers:"All Barbers",filterByBarber:"Filter by Barber"},analytics:{revenue:"Total Revenue",totalAppts:"Total Appointments",avgValue:"Avg. Value",clients:"Unique Clients",staffPerformance:"Staff Performance",clientBase:"Client Database",colName:"Name",colRevenue:"Revenue",colAppts:"Appts",colVisits:"Visits",colSpent:"Total Spent",colFavBarber:"Favorite Barber"}}},bg:{nav:{home:"",services:"",barbers:"",book:" ",bookShort:"",admin:"",staffLogin:" ",backToWeb:" "},hero:{est:". 2024  ",title1:" ",title2:" ",subtitle:"   Nalby Style.    .",ctaBook:" ",ctaServices:""},features:{barbersTitle:"",barbersDesc:"    .",premiumTitle:" ",premiumDesc:"    .",aiTitle:"AI ",aiDesc:"  AI   ."},contact:{title:" ",subtitle:"   . .",addressTitle:"",address:".  21, , 1612 ",phoneTitle:"",phone:"0895 222 269",email:"info@nalbystyle.com",hoursTitle:" ",hours:" - : 10:00 - 20:00",sunday:":  ",getDirections:""},booking:{step1:" ",step2:" ",step3:"  ",step4:" ",back:"",next:"",confirm:" ",selectDate:" ",availableSlots:" ",plsSelectDate:",   .",showingAvailability:"  ",fullName:"  ",email:" ",phone:"",summary:"",service:"",barber:"",time:"",alertSent:"    !",findNextSlot:"  ",noSlotsFound:"     30 ."},services:{menu:" ",title:" ",subtitle:"   Blade & Bourbon  ,     .",bookBtn:"  ",minutes:""},barbers:{team:"",title:" ",subtitle:"      ,   .",bookBtn:"  "},staff:{portal:" ",selectProfile:"     ",logout:"",schedule:"",addBooking:" ",cancelConfirm:"    ?",newBooking:" ",clientName:"  ",confirmBooking:"",myStats:" ",totalRevenue:" ()",totalAppts:"",topService:" "},admin:{title:"  ",tabs:{appointments:"",barbers:"",services:"",analytics:""},table:{date:"  ",customer:"",barber:"",service:"",status:"",actions:"",noApts:"  ."},addBarber:{title:"  ",editTitle:"  ",name:"",spec:"",bio:"",btn:" ",updateBtn:" ",createBtn:" &  ID",upload:"",aiPolish:"AI "},placeholders:{name:".  ",spec:" ",bio:"  (. '10 . ,  ')..."},addService:{title:"  ",nameEn:" (EN)",nameBg:" (BG)",price:" ()",duration:" ()",descEn:" (EN)",descBg:" (BG)",btn:" ",aiGen:"AI "},currentStaff:" ",filters:{allBarbers:" ",filterByBarber:"  "},analytics:{revenue:" ",totalAppts:" ",avgValue:". ",clients:" ",staffPerformance:"  ",clientBase:" ",colName:"",colRevenue:"",colAppts:"",colVisits:"",colSpent:" ",colFavBarber:" "}}}},Y_=({isOpen:t,title:e,message:n,onConfirm:s,onCancel:a,confirmText:l="OK",cancelText:c="Cancel",type:d="confirm"})=>t?y.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:y.jsxs("div",{className:"bg-dark-800 border border-gold-500/30 rounded-xl shadow-2xl max-w-sm w-full overflow-hidden transform transition-all scale-100",children:[y.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-dark-800 via-gold-500 to-dark-800"}),y.jsxs("div",{className:"p-8 text-center",children:[d==="confirm"&&y.jsx("div",{className:"mb-4 w-12 h-12 rounded-full bg-gold-500/10 flex items-center justify-center mx-auto text-gold-500",children:y.jsx("i",{className:"fa-solid fa-question text-xl"})}),d==="alert"&&y.jsx("div",{className:"mb-4 w-12 h-12 rounded-full bg-gold-500/10 flex items-center justify-center mx-auto text-gold-500",children:y.jsx("i",{className:"fa-solid fa-info text-xl"})}),y.jsx("h3",{className:"text-xl font-display font-bold text-white mb-3",children:e}),y.jsx("p",{className:"text-gray-400 mb-8 text-sm leading-relaxed",children:n}),y.jsxs("div",{className:"flex gap-3 justify-center",children:[d==="confirm"&&a&&y.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 rounded-lg border border-gray-600 text-gray-300 hover:bg-dark-700 hover:text-white transition-colors text-xs font-bold uppercase tracking-wider",children:c}),y.jsx("button",{onClick:s,className:`px-4 py-3 rounded-lg bg-gold-500 text-black hover:bg-gold-400 transition-colors text-xs font-bold uppercase tracking-wider shadow-lg shadow-gold-500/20 ${d==="confirm"?"flex-1":"w-full"}`,children:l})]})]})]})}):null;ku(hi,"appointments");const SN=(t,e,n,s)=>{if(!e||!n)return!0;const a=new Date(`${e}T${t}`);return!s.some(c=>{if(c.barberId!==n||c.status==="cancelled")return!1;const d=new Date(c.date);return d.getDate()===a.getDate()&&d.getMonth()===a.getMonth()&&d.getFullYear()===a.getFullYear()?d.getHours()===a.getHours()&&d.getMinutes()===a.getMinutes():!1})},Kj=(t,e,n,s=new Date)=>{if(n)return BA(n,t,s);let a=null;for(const l of e){const c=BA(l.id,t,s);c&&(!a||new Date(`${c.date}T${c.time}`)<new Date(`${a.date}T${a.time}`))&&(a=c)}return a},BA=(t,e,n)=>{const s=new Date,a=s.toLocaleDateString("en-CA",{timeZone:"Europe/Sofia"}),l=parseInt(s.toLocaleString("en-US",{timeZone:"Europe/Sofia",hour:"numeric",hour12:!1}));for(let c=0;c<30;c++){const d=new Date(n);d.setDate(n.getDate()+c);const m=d.toLocaleDateString("en-CA",{timeZone:"Europe/Sofia"});for(const g of q_){if(m===a){const[_]=g.split(":").map(Number);if(_<=l)continue}if(SN(g,m,t,e))return{date:m,time:g,barberId:t}}}return null},$j=({state:t,onBook:e,lang:n})=>{var U,B,D,Ye,Je,ee;const[s,a]=Q.useState(1),[l,c]=Q.useState(null),[d,m]=Q.useState(null),[g,_]=Q.useState(""),[E,T]=Q.useState(null),[S,N]=Q.useState(""),[V,C]=Q.useState(""),[G,Z]=Q.useState({isOpen:!1,title:"",message:"",type:"alert"}),H=Ys[n].booking,X=()=>a(L=>L+1),ce=()=>a(L=>L-1),he=(L,te)=>{Z({isOpen:!0,title:L,message:te,type:"alert"})},O=()=>{if(!l||!d||!g||!E||!S)return;const L=new Date(`${g}T${E}`),te={id:`apt-${Date.now()}`,serviceId:l,barberId:d,date:L.toISOString(),customerName:S,customerEmail:`+359${V}`,status:"pending"};e(te),he("Success",H.alertSent)},I=()=>{switch(s){case 1:return H.step1;case 2:return H.step2;case 3:return H.step3;case 4:return H.step4;default:return""}},R=(L,te)=>SN(L,te,d,t.appointments),M=()=>{if(!d)return;const L=Kj(t.appointments,t.barbers,d);L?(_(L.date),T(L.time)):he("Info",H.noSlotsFound)};return y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx(Y_,{isOpen:G.isOpen,title:G.title,message:G.message,onConfirm:()=>Z(L=>({...L,isOpen:!1})),type:G.type}),y.jsxs("div",{className:"flex justify-between items-center mb-10 relative",children:[y.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-dark-700 -z-10"}),[1,2,3,4].map(L=>y.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 transition-colors duration-300 ${s>=L?"bg-gold-500 border-gold-500 text-black":"bg-dark-900 border-gray-600 text-gray-500"}`,children:L},L))]}),y.jsxs("div",{className:"bg-dark-800 p-8 rounded-xl border border-gold-500/20 shadow-2xl min-h-[400px] flex flex-col",children:[y.jsx("h2",{className:"text-3xl font-display text-white mb-6 text-center",children:I()}),y.jsxs("div",{className:"flex-1",children:[s===1&&y.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.services.map(L=>y.jsxs("button",{onClick:()=>c(L.id),className:`p-4 rounded-lg border text-left transition-all flex items-center gap-4 ${l===L.id?"border-gold-500 bg-gold-500/10":"border-gray-700 bg-dark-700 hover:bg-dark-600"}`,children:[y.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl shrink-0 overflow-hidden ${l===L.id?"bg-gold-500 text-black":"bg-black text-gold-500 border border-gold-500/30"}`,children:L.imageUrl?y.jsx("img",{src:L.imageUrl,alt:"",className:"w-full h-full object-cover"}):y.jsx("i",{className:L.icon})}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between mb-1",children:[y.jsx("span",{className:"font-bold text-white text-lg",children:n==="bg"?L.nameBg:L.name}),y.jsx("span",{className:"text-gold-400 font-bold",children:typeof L.price=="number"?`${L.price}`:L.price})]}),y.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:n==="bg"?L.descriptionBg:L.description})]})]},L.id))}),s===2&&y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.barbers.map(L=>y.jsxs("button",{onClick:()=>m(L.id),className:`p-4 rounded-lg border transition-all flex flex-col items-center gap-4 ${d===L.id?"border-gold-500 bg-gold-500/10 scale-105":"border-gray-700 bg-dark-700 hover:bg-dark-600"}`,children:[y.jsx("img",{src:L.avatar,alt:L.name,className:"w-20 h-20 rounded-full object-cover border-2 border-gold-500/50"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"font-bold text-white text-base",children:n==="bg"?L.nameBg:L.name}),y.jsx("p",{className:"text-gold-400 text-xs uppercase tracking-wide mt-1",children:n==="bg"?L.specialtyBg:L.specialty})]})]},L.id))}),s===3&&y.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block text-gray-300 mb-2",children:H.selectDate}),y.jsx("input",{type:"date",className:"w-full bg-dark-700 border border-gray-600 rounded p-3 text-white focus:border-gold-500 focus:outline-none mb-2",onChange:L=>{_(L.target.value),T(null)},value:g,min:new Date().toISOString().split("T")[0]}),y.jsxs("button",{onClick:M,className:"w-full py-3 bg-dark-800 border border-gold-500/30 text-gold-500 hover:bg-gold-500 hover:text-black font-bold rounded transition-colors flex items-center justify-center gap-2",children:[y.jsx("i",{className:"fa-solid fa-calendar-check"}),H.findNextSlot]})]})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-gray-300 mb-2",children:H.availableSlots}),g?y.jsx("div",{className:"grid grid-cols-3 gap-2",children:q_.map(L=>{const te=R(L,g);return y.jsx("button",{onClick:()=>te&&T(L),disabled:!te,className:`py-2 rounded text-sm font-bold border transition-colors ${E===L?"bg-gold-500 text-black border-gold-500":te?"bg-dark-700 text-white border-gray-600 hover:border-gray-400":"bg-dark-900 text-gray-600 border-dark-800 cursor-not-allowed opacity-50 decoration-dashed line-through"}`,children:L},L)})}):y.jsx("p",{className:"text-gray-500 text-sm italic",children:H.plsSelectDate}),g&&y.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:[H.showingAvailability," ",y.jsx("span",{className:"text-gold-400",children:n==="bg"?(U=t.barbers.find(L=>L.id===d))==null?void 0:U.nameBg:(B=t.barbers.find(L=>L.id===d))==null?void 0:B.name})]})]})]}),s===4&&y.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 mb-1 text-sm",children:H.fullName}),y.jsx("input",{type:"text",value:S,onChange:L=>N(L.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded p-3 text-white focus:border-gold-500 focus:outline-none",placeholder:"John Doe"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 mb-1 text-sm",children:H.phone||"Phone"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"bg-dark-800 border border-r-0 border-gray-700 rounded-l p-3 text-gray-400 font-mono",children:"+359"}),y.jsx("input",{type:"tel",value:V,onChange:L=>{const te=L.target.value.replace(/\D/g,"");te.length<=9&&C(te)},className:"flex-1 bg-dark-900 border border-gray-700 rounded-r p-3 text-white focus:border-gold-500 focus:outline-none",placeholder:"87 123 4567",maxLength:9})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" 9   +359"})]}),y.jsxs("div",{className:"bg-dark-900/50 p-4 rounded border border-gray-700 mt-6",children:[y.jsx("h4",{className:"text-gold-500 font-bold mb-2 uppercase text-xs tracking-wider",children:H.summary}),y.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-1",children:[y.jsxs("span",{children:[H.service,":"]}),y.jsx("span",{className:"text-white",children:n==="bg"?(D=t.services.find(L=>L.id===l))==null?void 0:D.nameBg:(Ye=t.services.find(L=>L.id===l))==null?void 0:Ye.name})]}),y.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-1",children:[y.jsxs("span",{children:[H.barber,":"]}),y.jsx("span",{className:"text-white",children:n==="bg"?(Je=t.barbers.find(L=>L.id===d))==null?void 0:Je.nameBg:(ee=t.barbers.find(L=>L.id===d))==null?void 0:ee.name})]}),y.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[y.jsxs("span",{children:[H.time,":"]}),y.jsxs("span",{className:"text-white",children:[g," @ ",E]})]})]})]})]}),y.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-700",children:[y.jsx("button",{onClick:ce,disabled:s===1,className:`px-6 py-2 rounded font-bold text-gray-400 hover:text-white transition ${s===1?"opacity-0":""}`,children:H.back}),s<4?y.jsx("button",{onClick:X,disabled:s===1&&!l||s===2&&!d||s===3&&(!g||!E),className:"px-8 py-2 bg-white text-black font-bold rounded hover:bg-gray-200 transition disabled:opacity-50 disabled:cursor-not-allowed",children:H.next}):y.jsx("button",{onClick:O,disabled:!S||V.length!==9,className:"px-8 py-2 bg-gold-500 text-black font-bold rounded hover:bg-gold-400 transition shadow-[0_0_15px_rgba(212,175,55,0.4)] disabled:opacity-50",children:H.confirm})]})]})]})};var FA;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(FA||(FA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zA;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(zA||(zA={}));var HA;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(HA||(HA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=["user","model","function","system"];var qA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(qA||(qA={}));var YA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(YA||(YA={}));var KA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(KA||(KA={}));var $A;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})($A||($A={}));var iu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(iu||(iu={}));var XA;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(XA||(XA={}));var QA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(QA||(QA={}));var WA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(WA||(WA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ol extends Sn{constructor(e,n){super(e),this.response=n}}class xN extends Sn{constructor(e,n,s,a){super(e),this.status=n,this.statusText=s,this.errorDetails=a}}class ta extends Sn{}class wN extends Sn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="https://generativelanguage.googleapis.com",Qj="v1beta",Wj="0.24.1",Jj="genai-js";var mo;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(mo||(mo={}));class Zj{constructor(e,n,s,a,l){this.model=e,this.task=n,this.apiKey=s,this.stream=a,this.requestOptions=l}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Qj;let l=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Xj}/${s}/${this.model}:${this.task}`;return this.stream&&(l+="?alt=sse"),l}}function e4(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${Jj}/${Wj}`),e.join(" ")}async function t4(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",e4(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let s=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(a){throw new ta(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${a.message}`)}for(const[a,l]of s.entries()){if(a==="x-goog-api-key")throw new ta(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new ta(`Header name ${a} can only be set using the apiClient field`);n.append(a,l)}}return n}async function n4(t,e,n,s,a,l){const c=new Zj(t,e,n,s,l);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},a4(l)),{method:"POST",headers:await t4(c),body:a})}}async function ju(t,e,n,s,a,l={},c=fetch){const{url:d,fetchOptions:m}=await n4(t,e,n,s,a,l);return i4(d,m,c)}async function i4(t,e,n=fetch){let s;try{s=await n(t,e)}catch(a){s4(a,t)}return s.ok||await r4(s,t),s}function s4(t,e){let n=t;throw n.name==="AbortError"?(n=new wN(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof xN||t instanceof ta||(n=new Sn(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function r4(t,e){let n="",s;try{const a=await t.json();n=a.error.message,a.error.details&&(n+=` ${JSON.stringify(a.error.details)}`,s=a.error.details)}catch{}throw new xN(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,s)}function a4(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),jd(t.candidates[0]))throw new ol(`${zr(t)}`,t);return o4(t)}else if(t.promptFeedback)throw new ol(`Text not available. ${zr(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jd(t.candidates[0]))throw new ol(`${zr(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),JA(t)[0]}else if(t.promptFeedback)throw new ol(`Function call not available. ${zr(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jd(t.candidates[0]))throw new ol(`${zr(t)}`,t);return JA(t)}else if(t.promptFeedback)throw new ol(`Function call not available. ${zr(t)}`,t)},t}function o4(t){var e,n,s,a;const l=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const c of(a=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0?void 0:a.parts)c.text&&l.push(c.text),c.executableCode&&l.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&l.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return l.length>0?l.join(""):""}function JA(t){var e,n,s,a;const l=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const c of(a=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0?void 0:a.parts)c.functionCall&&l.push(c.functionCall);if(l.length>0)return l}const l4=[iu.RECITATION,iu.SAFETY,iu.LANGUAGE];function jd(t){return!!t.finishReason&&l4.includes(t.finishReason)}function zr(t){var e,n,s;let a="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)a+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(a+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(a+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((s=t.candidates)===null||s===void 0)&&s[0]){const l=t.candidates[0];jd(l)&&(a+=`Candidate was blocked due to ${l.finishReason}`,l.finishMessage&&(a+=`: ${l.finishMessage}`))}return a}function vu(t){return this instanceof vu?(this.v=t,this):new vu(t)}function c4(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(T){s[T]&&(a[T]=function(S){return new Promise(function(N,V){l.push([T,S,N,V])>1||d(T,S)})})}function d(T,S){try{m(s[T](S))}catch(N){E(l[0][3],N)}}function m(T){T.value instanceof vu?Promise.resolve(T.value.v).then(g,_):E(l[0][2],T)}function g(T){d("next",T)}function _(T){d("throw",T)}function E(T,S){T(S),l.shift(),l.length&&d(l[0][0],l[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function u4(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=f4(e),[s,a]=n.tee();return{stream:d4(s),response:h4(a)}}async function h4(t){const e=[],n=t.getReader();for(;;){const{done:s,value:a}=await n.read();if(s)return K_(m4(e));e.push(a)}}function d4(t){return c4(this,arguments,function*(){const n=t.getReader();for(;;){const{value:s,done:a}=yield vu(n.read());if(a)break;yield yield vu(K_(s))}})}function f4(t){const e=t.getReader();return new ReadableStream({start(s){let a="";return l();function l(){return e.read().then(({value:c,done:d})=>{if(d){if(a.trim()){s.error(new Sn("Failed to parse stream"));return}s.close();return}a+=c;let m=a.match(ZA),g;for(;m;){try{g=JSON.parse(m[1])}catch{s.error(new Sn(`Error parsing JSON response: "${m[1]}"`));return}s.enqueue(g),a=a.substring(m[0].length),m=a.match(ZA)}return l()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new wN("Request aborted when reading from the stream"):d=new Sn("Error reading from the stream"),d})}}})}function m4(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of t){if(s.candidates){let a=0;for(const l of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[a]||(n.candidates[a]={index:a}),n.candidates[a].citationMetadata=l.citationMetadata,n.candidates[a].groundingMetadata=l.groundingMetadata,n.candidates[a].finishReason=l.finishReason,n.candidates[a].finishMessage=l.finishMessage,n.candidates[a].safetyRatings=l.safetyRatings,l.content&&l.content.parts){n.candidates[a].content||(n.candidates[a].content={role:l.content.role||"user",parts:[]});const c={};for(const d of l.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),n.candidates[a].content.parts.push(c)}a++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e,n,s){const a=await ju(e,mo.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),s);return u4(a)}async function RN(t,e,n,s){const l=await(await ju(e,mo.GENERATE_CONTENT,t,!1,JSON.stringify(n),s)).json();return{response:K_(l)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Eu(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return p4(e)}function p4(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,a=!1;for(const l of t)"functionResponse"in l?(n.parts.push(l),a=!0):(e.parts.push(l),s=!0);if(s&&a)throw new Sn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!a)throw new Sn("No content is provided for sending chat message.");return s?e:n}function g4(t,e){var n;let s={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const a=t.generateContentRequest!=null;if(t.contents){if(a)throw new ta("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=t.contents}else if(a)s=Object.assign(Object.assign({},s),t.generateContentRequest);else{const l=Eu(t);s.contents=[l]}return{generateContentRequest:s}}function eS(t){let e;return t.contents?e=t:e={contents:[Eu(t)]},t.systemInstruction&&(e.systemInstruction=NN(t.systemInstruction)),e}function y4(t){return typeof t=="string"||Array.isArray(t)?{content:Eu(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],_4={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function v4(t){let e=!1;for(const n of t){const{role:s,parts:a}=n;if(!e&&s!=="user")throw new Sn(`First content should be with role 'user', got ${s}`);if(!GA.includes(s))throw new Sn(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(GA)}`);if(!Array.isArray(a))throw new Sn("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Sn("Each Content should have at least one part");const l={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of a)for(const m of tS)m in d&&(l[m]+=1);const c=_4[s];for(const d of tS)if(!c.includes(d)&&l[d]>0)throw new Sn(`Content with role '${s}' can't contain '${d}' part`);e=!0}}function nS(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="SILENT_ERROR";class E4{constructor(e,n,s,a={}){this.model=n,this.params=s,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(v4(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,a,l,c,d,m;await this._sendPromise;const g=Eu(e),_={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,g]},E=Object.assign(Object.assign({},this._requestOptions),n);let T;return this._sendPromise=this._sendPromise.then(()=>RN(this._apiKey,this.model,_,E)).then(S=>{var N;if(nS(S.response)){this._history.push(g);const V=Object.assign({parts:[],role:"model"},(N=S.response.candidates)===null||N===void 0?void 0:N[0].content);this._history.push(V)}else{const V=zr(S.response);V&&console.warn(`sendMessage() was unsuccessful. ${V}. Inspect response object for details.`)}T=S}).catch(S=>{throw this._sendPromise=Promise.resolve(),S}),await this._sendPromise,T}async sendMessageStream(e,n={}){var s,a,l,c,d,m;await this._sendPromise;const g=Eu(e),_={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,g]},E=Object.assign(Object.assign({},this._requestOptions),n),T=IN(this._apiKey,this.model,_,E);return this._sendPromise=this._sendPromise.then(()=>T).catch(S=>{throw new Error(iS)}).then(S=>S.response).then(S=>{if(nS(S)){this._history.push(g);const N=Object.assign({},S.candidates[0].content);N.role||(N.role="model"),this._history.push(N)}else{const N=zr(S);N&&console.warn(`sendMessageStream() was unsuccessful. ${N}. Inspect response object for details.`)}}).catch(S=>{S.message!==iS&&console.error(S)}),T}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,e,n,s){return(await ju(e,mo.COUNT_TOKENS,t,!1,JSON.stringify(n),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e,n,s){return(await ju(e,mo.EMBED_CONTENT,t,!1,JSON.stringify(n),s)).json()}async function A4(t,e,n,s){const a=n.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await ju(e,mo.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:a}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=NN(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const a=eS(e),l=Object.assign(Object.assign({},this._requestOptions),n);return RN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},a),l)}async generateContentStream(e,n={}){var s;const a=eS(e),l=Object.assign(Object.assign({},this._requestOptions),n);return IN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},a),l)}startChat(e){var n;return new E4(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=g4(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),n);return b4(this.apiKey,this.model,s,a)}async embedContent(e,n={}){const s=y4(e),a=Object.assign(Object.assign({},this._requestOptions),n);return T4(this.apiKey,this.model,s,a)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return A4(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Sn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new sS(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new ta("Cached content must contain a `name` field.");if(!e.model)throw new ta("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const c of a)if(n!=null&&n[c]&&e[c]&&(n==null?void 0:n[c])!==e[c]){if(c==="model"){const d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,m=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===m)continue}throw new ta(`Different value for "${c}" specified in modelParams (${n[c]}) and cachedContent (${e[c]})`)}const l=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new sS(this.apiKey,l,s)}}const $_=new S4("AIzaSyAyLZxJeDAeStVZ7Ta41COgz6wEL6dio9k"),x4=async t=>{var e,n;try{const s=$_.getGenerativeModel({model:"gemini-2.5-flash-image"}),a=`
      You are a professional icon designer for a luxury barbershop called "Blade & Bourbon".
      Create a premium icon representing this service: "${t}".
      
      ANALYSIS: Understand what this service is about:
      - If it involves haircuts, clippers, scissors  show those tools
      - If it involves beard, shaving, razors  show razor or beard shape
      - If it involves facial treatments, skincare, massage  show spa elements (lotus, hands, water drops, facial silhouette)
      - If it involves combos  combine relevant elements
      - For ANY other service  interpret the name intelligently and create an appropriate icon
      
      STYLE REQUIREMENTS (CRITICAL):
      - Color: Solid metallic gold (#D4AF37) ONLY
      - Background: Pure black (#000000)
      - Design: Bold, modern, minimalist silhouette
      - Aesthetic: Premium, expensive, "Gazarski" (cool/stylish)
      - Composition: Centered, clean edges, high contrast
      - NO text, NO thin outlines, NO other colors
      
      OUTPUT: 512x512px PNG image, professional quality.
    `,c=(await s.generateContent(a)).response;if(c.candidates&&((n=(e=c.candidates[0])==null?void 0:e.content)!=null&&n.parts)){for(const d of c.candidates[0].content.parts)if(d.inlineData&&d.inlineData.data)return`data:${d.inlineData.mimeType||"image/png"};base64,${d.inlineData.data}`}return null}catch(s){return console.error("Icon generation failed",s),null}},w4=async t=>{try{const e=$_.getGenerativeModel({model:"gemini-2.0-flash-exp",generationConfig:{responseMimeType:"application/json"}}),n=`
      You are an expert copywriter for a high-end luxury barbershop called "Blade & Bourbon".
      Write a short, sophisticated, and inviting description for a service named: "${t}".
      
      Requirements:
      1. Tone: Elegant, masculine, professional, concise.
      2. Length: Maximum 1 sentence (approx 10-15 words).
      3. Return valid JSON only with keys "en" (English) and "bg" (Bulgarian).
      
      Example Output:
      {
        "en": "Precision haircut tailored to your unique face shape and style.",
        "bg": " ,         ."
      }
    `,a=(await e.generateContent(n)).response.text();return a?JSON.parse(a):null}catch(e){return console.error("Description generation failed",e),null}},I4=async(t,e,n)=>{var s;try{const a=$_.getGenerativeModel({model:"gemini-2.0-flash-exp"}),l=`
      You are an expert copywriter for "Blade & Bourbon", a luxury barbershop.
      Transform the following rough notes about a barber named "${e}" into a sophisticated, super-short, professional biography (max 2 sentences).
      
      Tone: Elegant, masculine, high-end.
      Example Style: "The visionary behind the chair. Nalby combines years of international experience with a passion for perfection."
      
      Rough Notes: "${t}"
      
      Language: ${n==="bg"?"Bulgarian":"English"}
      
      Return ONLY the bio text string. Do not include quotes or labels.
    `;return((s=(await a.generateContent(l)).response.text())==null?void 0:s.trim())||null}catch(a){return console.error("Bio generation failed",a),null}},R4=AN(),N4=async(t,e)=>{try{const n=ay(R4,e),s=await kj(n,t);return await ry(s.ref)}catch(n){throw console.error("Error uploading image:",n),n}},C4=ku(hi,"services"),CN=ku(hi,"barbers"),O4=ku(hi,"appointments"),D4=t=>k_(C4,e=>{const n=e.docs.map(s=>({id:s.id,...s.data()}));t(n)}),M4=t=>k_(CN,e=>{const n=e.docs.map(s=>({id:s.id,...s.data()}));t(n)}),P4=t=>k_(O4,e=>{const n=e.docs.map(s=>({id:s.id,...s.data()}));t(n)}),V4=async t=>{const e=tr(hi,"services",t.id);await L_(e,t)},L4=async t=>{const e=tr(hi,"services",t.id);await Bf(e,{...t})},k4=async()=>(await sN(CN)).docs.map(e=>({id:e.id,...e.data()})),U4=async t=>{const e=tr(hi,"barbers",t.id);await L_(e,t)},j4=async t=>{const e=tr(hi,"barbers",t.id);await Bf(e,{...t})},B4=async t=>{await rN(tr(hi,"barbers",t))},F4=async t=>{const e=tr(hi,"appointments",t.id);await L_(e,t)},z4=async t=>{const e=tr(hi,"appointments",t.id);await Bf(e,{...t})},rS=async t=>{const e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=`${t}:${e}`,s=tr(hi,"barbers",t);return await Bf(s,{authToken:n}),n},H4=async t=>{try{const e=t.split(":")[0];return e&&(await k4()).find(a=>a.id===e&&a.authToken===t)||null}catch(e){return console.error("Token validation failed:",e),null}},ON=ku(hi,"conversationLogs"),G4=async(t=50)=>{try{const e=AU(ON,SU("startTime","desc"),xU(t));return(await sN(e)).docs.map(s=>s.data())}catch(e){return console.error("[ConversationLog] Error getting logs:",e),[]}},q4=async t=>{try{const e=tr(ON,t);await rN(e),console.log("[ConversationLog] Deleted log:",t)}catch(e){throw console.error("[ConversationLog] Error deleting log:",e),new Error("   ")}},aS=[{val:"Head Barber & Stylist",en:"Head Barber & Stylist",bg:"  & "},{val:"Master Barber",en:"Master Barber",bg:" "},{val:"Senior Stylist",en:"Senior Stylist",bg:" "},{val:"Fades & Trends",en:"Fades & Trends",bg:" &  "},{val:"Classic Cuts",en:"Classic Cuts",bg:" "},{val:"Beard Specialist",en:"Beard Specialist",bg:" "},{val:"Grooming Expert",en:"Grooming Expert",bg:" "},{val:"Colorist",en:"Colorist",bg:""},{val:"Junior Barber",en:"Junior Barber",bg:" "},{val:"Shop Manager",en:"Shop Manager",bg:" "}],Y4=({state:t,onAddBarber:e,onUpdateBarber:n,onDeleteBarber:s,onAddService:a,onDeleteAppointment:l,onUpdateService:c,lang:d})=>{const[m,g]=Q.useState("appointments"),[_,E]=Q.useState("all"),[T,S]=Q.useState(!1),[N,V]=Q.useState(null),[C,G]=Q.useState(!1),[Z,H]=Q.useState(!1),[X,ce]=Q.useState(""),[he,O]=Q.useState(""),[I,R]=Q.useState(""),[M,U]=Q.useState(""),[B,D]=Q.useState(""),[Ye,Je]=Q.useState(null),ee=Q.useRef(null),[L,te]=Q.useState(null),[ye,Te]=Q.useState(null),[k,ne]=Q.useState(""),[ue,re]=Q.useState(null),[fe,Ee]=Q.useState(""),[Ie,ft]=Q.useState(""),[$e,gn]=Q.useState(""),[In,an]=Q.useState(""),[$t,yn]=Q.useState(""),[Bn,Rn]=Q.useState(""),[Lt,Gi]=Q.useState(null),[ys,qi]=Q.useState(null),[_s,vo]=Q.useState(!1),[Eo,Jt]=Q.useState(!1),[_a,St]=Q.useState([]),[ct,di]=Q.useState(null),[bo,vs]=Q.useState(!1),[nr,fi]=Q.useState({isOpen:!1,title:"",message:"",type:"alert"}),Ae=Ys[d].admin,ht=(F,me="Notice")=>{fi({isOpen:!0,title:me,message:F,type:"alert"})};Q.useEffect(()=>{m==="conversations"&&(vs(!0),G4(50).then(F=>{St(F),vs(!1)}).catch(F=>{console.error("Failed to load conversation logs:",F),vs(!1)}))},[m]);const kt=Q.useMemo(()=>{let F=0;const me={},rt={};return t.barbers.forEach(Oe=>{me[Oe.id]={revenue:0,appointments:0,name:d==="bg"?Oe.nameBg:Oe.name}}),t.appointments.forEach(Oe=>{const De=t.services.find(_n=>_n.id===Oe.serviceId),nt=De&&typeof De.price=="number"?De.price:0;F+=nt,me[Oe.barberId]&&(me[Oe.barberId].revenue+=nt,me[Oe.barberId].appointments+=1),rt[Oe.customerEmail]||(rt[Oe.customerEmail]={name:Oe.customerName,visits:0,spent:0,barbers:{}}),rt[Oe.customerEmail].visits+=1,rt[Oe.customerEmail].spent+=nt,rt[Oe.customerEmail].barbers[Oe.barberId]||(rt[Oe.customerEmail].barbers[Oe.barberId]=0),rt[Oe.customerEmail].barbers[Oe.barberId]+=1}),{totalRevenue:F,totalAppointments:t.appointments.length,avgValue:t.appointments.length>0?(F/t.appointments.length).toFixed(2):0,uniqueClients:Object.keys(rt).length,staffStats:Object.values(me),clientStats:Object.values(rt).sort((Oe,De)=>De.spent-Oe.spent)}},[t.appointments,t.barbers,t.services,d]),Zt=Q.useMemo(()=>_==="all"?t.appointments:t.appointments.filter(F=>F.barberId===_),[t.appointments,_]),Bl=Q.useMemo(()=>{if(!X)return t.barbers;const F=X.toLowerCase();return t.barbers.filter(me=>me.name.toLowerCase().includes(F)||me.specialty.toLowerCase().includes(F))},[t.barbers,X]),va=F=>{var rt;const me=(rt=F.target.files)==null?void 0:rt[0];if(me){Je(me);const Oe=new FileReader;Oe.onloadend=()=>{D(Oe.result)},Oe.readAsDataURL(me)}},ir=()=>{O(""),R(""),U(""),D(""),Je(null),V(null),S(!1)},Es=async()=>{if(!he||!I){ht("Please enter at least a Name and Specialty.","Missing Info");return}H(!0);try{const F=aS.find(De=>De.val===I),me=F?F.en:I,rt=F?F.bg:I;let Oe=B;if(Ye)try{const nt=`barbers/${N||`new_${Date.now()}`}_${Ye.name}`;Oe=await N4(Ye,nt)}catch(De){console.error(De),ht("Failed to upload image. Please try again.","Upload Error");return}if(N){const De=t.barbers.find(nt=>nt.id===N);if(De){const nt={...De,name:he,nameBg:he,specialty:me,specialtyBg:rt,bio:M||De.bio,bioBg:M||De.bioBg,avatar:Oe||De.avatar};n(nt),ir()}}else{const De=he.toLowerCase().replace(/\s/g,".")+Math.floor(Math.random()*100),nt=Math.random().toString(36).slice(-8),_n={id:`b${Date.now()}`,name:he,nameBg:he,specialty:me,specialtyBg:rt,bio:M||"Expert barber dedicated to precision and style.",bioBg:M||" .",avatar:Oe||`https://picsum.photos/150/150?random=${Date.now()}`,rating:5,username:De,password:nt};e(_n);const Xi=await rS(_n.id),Jn={..._n,authToken:Xi},To=await Oi(Jn);ne(To),te(Jn),ir()}}catch(F){console.error("Error saving barber:",F),ht("An error occurred while saving.","Error")}finally{H(!1)}},mi=F=>{O(F.name),R(F.specialty),U(F.bio),D(F.avatar),V(F.id),S(!0)},Yi=F=>{re(F.id),fi({isOpen:!0,title:"Delete Staff Member?",message:`Are you sure you want to remove ${F.name}? This cannot be undone.`,type:"confirm"})},Wn=()=>{ue&&(s(ue),re(null)),fi(F=>({...F,isOpen:!1}))},Fn=async()=>{if(!M){ht("Please enter some notes in the biography field first.","Missing Input");return}G(!0);try{const F=await I4(M,he||"The Barber",d);F?U(F):ht("Could not generate bio. Please try again.","AI Error")}catch(F){console.error(F),ht("Failed to connect to AI service.","Error")}finally{G(!1)}},Ki=()=>{if(!fe||!$e)return;const F={id:`s${Date.now()}`,name:fe,nameBg:Ie||fe,price:isNaN(Number($e))?$e:Number($e),duration:Number(In)||30,description:$t||"Service description.",descriptionBg:Bn||"  .",icon:"fa-solid fa-scissors"};a(F),Ee(""),ft(""),gn(""),an(""),yn(""),Rn("")},sr=async()=>{if(!fe){ht("Please enter a service name first.","Missing Input");return}vo(!0);try{const F=await w4(fe);F?(yn(F.en),Rn(F.bg)):ht("Failed to generate descriptions.","Error")}catch(F){console.error(F)}finally{vo(!1)}},Ea=async F=>{qi(F.id);try{const me=await x4(F.name+" icon");me?(c({...F,imageUrl:me}),Lt&&Lt.id===F.id&&Gi({...Lt,imageUrl:me})):ht("Failed to generate icon. Please try again.","Error")}catch(me){console.error(me)}finally{qi(null)}},Ci=()=>{Lt&&(c(Lt),Gi(null))},Nn=(F,me)=>{Lt&&Gi({...Lt,[F]:me})},Ut=F=>{const me=t.barbers.find(rt=>rt.id===F);return(d==="bg"?me==null?void 0:me.nameBg:me==null?void 0:me.name)||"Unknown"},ba=F=>{const me=t.services.find(rt=>rt.id===F);return(d==="bg"?me==null?void 0:me.nameBg:me==null?void 0:me.name)||"Unknown"},$i=F=>{let me="",rt=-1;return Object.entries(F).forEach(([Oe,De])=>{De>rt&&(rt=De,me=Oe)}),Ut(me)},Oi=async F=>{const Oe=`https://staff-bladebourbon.web.app?staff=${F.authToken||await rS(F.id)}`;return`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(Oe)}&bgcolor=121212&color=d4af37`},Ta=async F=>{const me=await Oi(F);ne(me),Te(F)};return y.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[y.jsx(Y_,{isOpen:nr.isOpen,title:nr.title,message:nr.message,onConfirm:Wn,onCancel:()=>fi(F=>({...F,isOpen:!1})),type:nr.type}),ye&&y.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 animate-fade-in",children:y.jsxs("div",{className:"bg-dark-800 rounded-2xl p-8 max-w-md w-full border border-gold-500/30 relative",children:[y.jsx("button",{onClick:()=>{Te(null),ne("")},className:"absolute top-4 right-4 text-gray-500 hover:text-white text-2xl",children:y.jsx("i",{className:"fa-solid fa-xmark"})}),y.jsx("h3",{className:"text-2xl font-display text-gold-400 mb-2 text-center",children:"Staff Access QR Code"}),y.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:d==="bg"?ye.nameBg:ye.name}),y.jsx("div",{className:"bg-white p-4 rounded-xl mb-6",children:k&&y.jsx("img",{src:k,alt:"QR Code",className:"w-full aspect-square"})}),y.jsx("p",{className:"text-gray-500 text-xs text-center mb-4",children:"Scan this QR code to instantly access the Staff Portal"}),y.jsx("button",{onClick:()=>{Te(null),ne("")},className:"w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-3 rounded transition",children:"Close"})]})}),y.jsx("h2",{className:"text-3xl font-display text-gold-400 mb-8",children:Ae.title}),y.jsxs("div",{className:"flex gap-4 mb-8 border-b border-gray-700 pb-2 overflow-x-auto",children:[y.jsx("button",{onClick:()=>g("appointments"),className:`px-4 py-2 font-bold uppercase tracking-wider text-sm transition-colors whitespace-nowrap ${m==="appointments"?"text-gold-500 border-b-2 border-gold-500":"text-gray-400 hover:text-white"}`,children:Ae.tabs.appointments}),y.jsx("button",{onClick:()=>g("analytics"),className:`px-4 py-2 font-bold uppercase tracking-wider text-sm transition-colors whitespace-nowrap ${m==="analytics"?"text-gold-500 border-b-2 border-gold-500":"text-gray-400 hover:text-white"}`,children:Ae.tabs.analytics}),y.jsx("button",{onClick:()=>g("barbers"),className:`px-4 py-2 font-bold uppercase tracking-wider text-sm transition-colors whitespace-nowrap ${m==="barbers"?"text-gold-500 border-b-2 border-gold-500":"text-gray-400 hover:text-white"}`,children:Ae.tabs.barbers}),y.jsx("button",{onClick:()=>g("services"),className:`px-4 py-2 font-bold uppercase tracking-wider text-sm transition-colors whitespace-nowrap ${m==="services"?"text-gold-500 border-b-2 border-gold-500":"text-gray-400 hover:text-white"}`,children:Ae.tabs.services}),y.jsx("button",{onClick:()=>g("conversations"),className:`px-4 py-2 font-bold uppercase tracking-wider text-sm transition-colors whitespace-nowrap ${m==="conversations"?"text-gold-500 border-b-2 border-gold-500":"text-gray-400 hover:text-white"}`,children:" "})]}),m==="appointments"&&y.jsxs("div",{className:"space-y-6",children:[y.jsx("div",{className:"flex justify-end",children:y.jsxs("select",{value:_,onChange:F=>E(F.target.value),className:"bg-dark-800 text-white border border-gray-600 rounded p-2 text-sm focus:border-gold-500 outline-none",children:[y.jsx("option",{value:"all",children:Ae.filters.allBarbers}),t.barbers.map(F=>y.jsx("option",{value:F.id,children:d==="bg"?F.nameBg:F.name},F.id))]})}),y.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden border border-gray-800 overflow-x-auto",children:y.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[y.jsx("thead",{className:"bg-dark-900 text-gray-400 font-display uppercase text-sm",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-4",children:Ae.table.date}),y.jsx("th",{className:"p-4",children:Ae.table.customer}),y.jsx("th",{className:"p-4",children:Ae.table.barber}),y.jsx("th",{className:"p-4",children:Ae.table.service}),y.jsx("th",{className:"p-4",children:Ae.table.status}),y.jsx("th",{className:"p-4",children:Ae.table.actions})]})}),y.jsx("tbody",{className:"divide-y divide-gray-800",children:Zt.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:Ae.table.noApts})}):Zt.map(F=>y.jsxs("tr",{className:"hover:bg-dark-700/50 transition",children:[y.jsxs("td",{className:"p-4",children:[y.jsx("div",{className:"text-white font-bold",children:new Date(F.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),y.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.date).toLocaleDateString()})]}),y.jsxs("td",{className:"p-4",children:[y.jsx("div",{className:"text-white",children:F.customerName}),y.jsx("div",{className:"text-xs text-gray-500",children:F.customerEmail})]}),y.jsx("td",{className:"p-4 text-gray-300",children:Ut(F.barberId)}),y.jsx("td",{className:"p-4 text-gold-400",children:ba(F.serviceId)}),y.jsx("td",{className:"p-4",children:y.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-green-900/50 text-green-400 border border-green-800 uppercase font-bold",children:F.status})}),y.jsx("td",{className:"p-4",children:y.jsx("button",{onClick:()=>l(F.id),className:"text-red-400 hover:text-red-300 transition",title:"Cancel Appointment",children:y.jsx("i",{className:"fa-solid fa-trash"})})})]},F.id))})]})})]}),m==="analytics"&&y.jsxs("div",{className:"space-y-8 animate-fade-in",children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[y.jsxs("div",{className:"bg-dark-800 p-4 rounded border border-gold-500/20",children:[y.jsx("h4",{className:"text-gray-400 text-xs uppercase mb-1",children:Ae.analytics.revenue}),y.jsxs("p",{className:"text-2xl font-bold text-gold-500",children:["",kt.totalRevenue]})]}),y.jsxs("div",{className:"bg-dark-800 p-4 rounded border border-gray-700",children:[y.jsx("h4",{className:"text-gray-400 text-xs uppercase mb-1",children:Ae.analytics.totalAppts}),y.jsx("p",{className:"text-2xl font-bold text-white",children:kt.totalAppointments})]}),y.jsxs("div",{className:"bg-dark-800 p-4 rounded border border-gray-700",children:[y.jsx("h4",{className:"text-gray-400 text-xs uppercase mb-1",children:Ae.analytics.avgValue}),y.jsxs("p",{className:"text-2xl font-bold text-white",children:["",kt.avgValue]})]}),y.jsxs("div",{className:"bg-dark-800 p-4 rounded border border-gray-700",children:[y.jsx("h4",{className:"text-gray-400 text-xs uppercase mb-1",children:Ae.analytics.clients}),y.jsx("p",{className:"text-2xl font-bold text-white",children:kt.uniqueClients})]})]}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[y.jsxs("div",{className:"bg-dark-800 p-6 rounded-lg border border-gray-800",children:[y.jsx("h3",{className:"text-xl font-display text-white mb-4",children:Ae.analytics.staffPerformance}),y.jsx("div",{className:"space-y-4",children:kt.staffStats.map((F,me)=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900 rounded",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-bold text-white",children:F.name}),y.jsxs("div",{className:"text-xs text-gray-500",children:[F.appointments," ",Ae.analytics.colAppts]})]}),y.jsxs("div",{className:"text-gold-400 font-bold",children:["",F.revenue]})]},me))})]}),y.jsxs("div",{className:"bg-dark-800 p-6 rounded-lg border border-gray-800 overflow-hidden",children:[y.jsx("h3",{className:"text-xl font-display text-white mb-4",children:Ae.analytics.clientBase}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-sm",children:[y.jsx("thead",{className:"text-gray-500 text-xs uppercase text-left",children:y.jsxs("tr",{children:[y.jsx("th",{className:"pb-2",children:Ae.analytics.colName}),y.jsx("th",{className:"pb-2",children:Ae.analytics.colVisits}),y.jsx("th",{className:"pb-2",children:Ae.analytics.colSpent}),y.jsx("th",{className:"pb-2",children:Ae.analytics.colFavBarber})]})}),y.jsxs("tbody",{className:"divide-y divide-gray-700",children:[kt.clientStats.map((F,me)=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 text-white",children:F.name}),y.jsx("td",{className:"py-2 text-gray-400",children:F.visits}),y.jsxs("td",{className:"py-2 text-gold-500 font-bold",children:["",F.spent]}),y.jsx("td",{className:"py-2 text-gray-300",children:$i(F.barbers)})]},me)),kt.clientStats.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"No data"})})]})]})})]})]})]}),m==="barbers"&&y.jsxs("div",{className:"animate-fade-in space-y-8",children:[L&&y.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-black p-8 rounded-2xl border border-gold-500/50 shadow-2xl relative overflow-hidden max-w-md mx-auto animate-fade-in",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:y.jsx("i",{className:"fa-solid fa-scissors text-9xl text-gold-500"})}),y.jsx("h3",{className:"text-2xl font-display text-gold-400 mb-6 text-center uppercase tracking-widest border-b border-gray-800 pb-4",children:"New Staff Access Card"}),y.jsxs("div",{className:"flex flex-col items-center gap-6",children:[y.jsxs("div",{className:"bg-white text-black rounded-xl p-4 w-64 shadow-xl shrink-0",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{className:"font-display font-bold text-lg leading-none",children:["BLADE &",y.jsx("br",{}),"BOURBON"]}),y.jsx("i",{className:"fa-solid fa-id-card text-2xl text-gold-600"})]}),y.jsx("img",{src:k,alt:"QR Login",className:"w-full aspect-square bg-gray-100 rounded mb-4"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h4",{className:"font-bold text-lg uppercase",children:L.name}),y.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wider",children:L.specialty})]})]}),y.jsxs("div",{className:"text-center space-y-4",children:[y.jsxs("p",{className:"text-sm text-gray-400 italic",children:["* Scan this QR code now to log in. ",y.jsx("br",{}),"You can also access it later from the staff list."]}),y.jsx("button",{onClick:()=>{te(null),ne("")},className:"w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-3 rounded transition shadow-lg",children:"Done & Close"})]})]})]}),!L&&y.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-xl text-white font-display",children:Ae.currentStaff}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",placeholder:"Filter staff...",value:X,onChange:F=>ce(F.target.value),className:"bg-dark-800 border border-gray-700 rounded-full py-2 px-4 pl-10 text-sm text-white focus:border-gold-500 outline-none w-64"}),y.jsx("i",{className:"fa-solid fa-search absolute left-3.5 top-2.5 text-gray-500 text-xs"})]})]}),y.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Bl.map(F=>y.jsxs("div",{className:"bg-dark-800 p-4 rounded-xl border border-gray-800 hover:border-gold-500/30 transition flex gap-4 items-start group relative",children:[y.jsx("img",{src:F.avatar,alt:F.name,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-700 group-hover:border-gold-500 transition-colors"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"text-white font-bold text-lg",children:d==="bg"?F.nameBg:F.name}),y.jsx("p",{className:"text-gold-500 text-xs uppercase tracking-wider mb-2",children:d==="bg"?F.specialtyBg:F.specialty}),y.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[y.jsxs("span",{children:[y.jsx("i",{className:"fa-solid fa-star text-gold-600"})," ",F.rating]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["ID: ",F.id]})]})]}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("button",{onClick:()=>Ta(F),className:"text-gray-500 hover:text-gold-500 bg-dark-900 w-8 h-8 rounded-full flex items-center justify-center border border-gray-700",title:"Show QR Code",children:y.jsx("i",{className:"fa-solid fa-qrcode text-xs"})}),y.jsx("button",{onClick:()=>mi(F),className:"text-gray-500 hover:text-white bg-dark-900 w-8 h-8 rounded-full flex items-center justify-center border border-gray-700",children:y.jsx("i",{className:"fa-solid fa-pen-to-square text-xs"})}),y.jsx("button",{onClick:()=>Yi(F),className:"text-gray-500 hover:text-red-500 bg-dark-900 w-8 h-8 rounded-full flex items-center justify-center border border-gray-700",children:y.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]},F.id))})]}),y.jsx("div",{children:T?y.jsxs("div",{className:"bg-dark-800 p-6 rounded-xl border border-gray-700 animate-fade-in shadow-2xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h3",{className:"text-xl text-white font-display",children:N?Ae.addBarber.editTitle:Ae.addBarber.title}),y.jsx("button",{onClick:ir,className:"text-gray-500 hover:text-white",children:y.jsx("i",{className:"fa-solid fa-xmark"})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"flex justify-center mb-4",children:y.jsxs("div",{className:"w-24 h-24 rounded-full bg-dark-900 border-2 border-dashed border-gray-600 hover:border-gold-500 flex items-center justify-center cursor-pointer overflow-hidden relative group",onClick:()=>{var F;return(F=ee.current)==null?void 0:F.click()},children:[B?y.jsx("img",{src:B,alt:"Preview",className:"w-full h-full object-cover"}):y.jsxs("div",{className:"text-center text-gray-500 group-hover:text-gold-500",children:[y.jsx("i",{className:"fa-solid fa-camera mb-1"}),y.jsx("div",{className:"text-[10px] uppercase",children:Ae.addBarber.upload})]}),y.jsx("input",{type:"file",ref:ee,className:"hidden",accept:"image/*",onChange:va})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs uppercase mb-1",children:Ae.addBarber.name}),y.jsx("input",{type:"text",value:he,onChange:F=>O(F.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-white focus:border-gold-500 focus:outline-none",placeholder:Ae.placeholders.name})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs uppercase mb-1",children:Ae.addBarber.spec}),y.jsxs("div",{className:"relative",children:[y.jsxs("select",{value:I,onChange:F=>R(F.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-white focus:border-gold-500 focus:outline-none appearance-none",children:[y.jsx("option",{value:"",disabled:!0,children:Ae.placeholders.spec}),aS.map(F=>y.jsx("option",{value:F.val,children:d==="bg"?F.bg:F.en},F.val))]}),y.jsx("div",{className:"absolute right-3 top-3 text-gray-500 pointer-events-none",children:y.jsx("i",{className:"fa-solid fa-chevron-down text-xs"})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs uppercase mb-1",children:Ae.addBarber.bio}),y.jsxs("div",{className:"relative",children:[y.jsx("textarea",{value:M,onChange:F=>U(F.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-white focus:border-gold-500 focus:outline-none",rows:3,placeholder:Ae.placeholders.bio}),y.jsxs("button",{onClick:Fn,disabled:C,className:"absolute bottom-2 right-2 text-xs bg-gold-500 hover:bg-gold-400 text-black px-2 py-1 rounded font-bold transition flex items-center gap-1",title:"AI Polish Bio",children:[C?y.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):y.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"}),Ae.addBarber.aiPolish]})]})]}),y.jsx("div",{className:"pt-2",children:y.jsxs("button",{onClick:Es,disabled:Z||C,className:`w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-3 px-4 rounded transition flex items-center justify-center gap-2 ${Z?"opacity-50 cursor-not-allowed":""}`,children:[Z?y.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):N?y.jsx("i",{className:"fa-solid fa-save"}):y.jsx("i",{className:"fa-solid fa-user-plus"}),Z?" Saving...":N?Ae.addBarber.updateBtn:Ae.addBarber.createBtn]})})]})]}):y.jsxs("button",{onClick:()=>S(!0),className:"w-full h-32 border-2 border-dashed border-gray-700 rounded-xl flex flex-col items-center justify-center text-gray-500 hover:text-gold-500 hover:border-gold-500 hover:bg-dark-800 transition gap-2 group",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-800 group-hover:bg-gold-500 group-hover:text-black flex items-center justify-center transition-colors",children:y.jsx("i",{className:"fa-solid fa-plus"})}),y.jsx("span",{className:"font-bold uppercase tracking-wider text-sm",children:Ae.addBarber.btn})]})})]})]}),m==="services"&&y.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[y.jsxs("div",{className:"w-full lg:w-1/4 bg-dark-800 p-6 rounded-lg border border-gray-800 h-fit",children:[y.jsx("h3",{className:"text-xl text-white mb-4 font-display",children:Ae.addService.title}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.nameEn}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",value:fe,onChange:F=>Ee(F.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.nameBg}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",value:Ie,onChange:F=>ft(F.target.value)})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.price}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",value:$e,onChange:F=>gn(F.target.value)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.duration}),y.jsx("input",{type:"number",className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",value:In,onChange:F=>an(F.target.value)})]})]}),y.jsxs("button",{onClick:sr,disabled:_s,className:"w-full bg-dark-700 border border-gray-600 hover:border-gold-500 text-gold-500 text-xs font-bold py-2 rounded transition flex items-center justify-center gap-2 mb-2",children:[_s?y.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):y.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"}),Ae.addService.aiGen]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.descEn}),y.jsx("textarea",{className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",rows:2,value:$t,onChange:F=>yn(F.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:Ae.addService.descBg}),y.jsx("textarea",{className:"w-full bg-dark-900 border border-gray-700 rounded p-2 text-sm text-white",rows:2,value:Bn,onChange:F=>Rn(F.target.value)})]}),y.jsx("button",{onClick:Ki,className:"w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-2 rounded transition mt-2",children:Ae.addService.btn})]})]}),y.jsx("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.services.map(F=>y.jsx("div",{className:"bg-dark-800 p-6 rounded-lg border border-gray-800 hover:border-gold-500/50 transition flex flex-col h-full",children:(Lt==null?void 0:Lt.id)===F.id?y.jsxs("div",{className:"space-y-3 flex-1",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Name (EN)"}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",value:Lt.name,onChange:me=>Nn("name",me.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Name (BG)"}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",value:Lt.nameBg,onChange:me=>Nn("nameBg",me.target.value)})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Price ()"}),y.jsx("input",{className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",value:Lt.price,onChange:me=>Nn("price",me.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Minutes"}),y.jsx("input",{type:"number",className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",value:Lt.duration,onChange:me=>Nn("duration",parseInt(me.target.value))})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Desc (EN)"}),y.jsx("textarea",{className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",rows:2,value:Lt.description,onChange:me=>Nn("description",me.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Desc (BG)"}),y.jsx("textarea",{className:"w-full bg-dark-900 border border-gray-600 rounded p-1 text-sm text-white",rows:2,value:Lt.descriptionBg,onChange:me=>Nn("descriptionBg",me.target.value)})]}),y.jsxs("div",{className:"flex gap-2 pt-2",children:[y.jsx("button",{onClick:Ci,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-1 rounded text-sm font-bold",children:"Save"}),y.jsx("button",{onClick:()=>Gi(null),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-1 rounded text-sm",children:"Cancel"})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsx("h3",{className:"text-xl font-display text-white",children:d==="bg"?F.nameBg:F.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-gold-400 font-bold",children:["",F.price]}),y.jsx("button",{onClick:()=>Gi(F),className:"text-gray-500 hover:text-gold-500 transition",children:y.jsx("i",{className:"fa-solid fa-pen-to-square"})})]})]}),y.jsx("div",{className:"mb-4 flex justify-center py-4 bg-black rounded",children:F.imageUrl?y.jsx("img",{src:F.imageUrl,alt:F.name,className:"w-16 h-16 object-contain"}):y.jsx("i",{className:`${F.icon} text-4xl text-gold-500`})}),y.jsx("p",{className:"text-gray-400 text-sm mb-4 flex-1",children:d==="bg"?F.descriptionBg:F.description}),y.jsx("button",{onClick:()=>Ea(F),disabled:ys===F.id,className:"w-full bg-dark-700 hover:bg-gold-500 hover:text-black border border-gray-600 text-white py-2 rounded transition flex items-center justify-center gap-2 mt-auto",children:ys===F.id?y.jsxs(y.Fragment,{children:[y.jsx("i",{className:"fa-solid fa-spinner fa-spin"})," Generating..."]}):y.jsxs(y.Fragment,{children:[y.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"})," AI Icon"]})})]})},F.id))})]}),m==="conversations"&&y.jsxs("div",{className:"space-y-6",children:[y.jsx("h2",{className:"text-2xl font-display text-white mb-4",children:"    "}),bo?y.jsxs("div",{className:"text-center py-12",children:[y.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl text-gold-500"}),y.jsx("p",{className:"text-gray-400 mt-4",children:"..."})]}):_a.length===0?y.jsxs("div",{className:"text-center py-12 text-gray-500",children:[y.jsx("i",{className:"fa-solid fa-comments text-4xl mb-4 block"}),y.jsx("p",{children:"  "})]}):y.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[y.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:_a.map(F=>y.jsxs("div",{onClick:()=>di(F),className:`bg-dark-800 border rounded-lg p-4 cursor-pointer transition hover:border-gold-500/50 ${(ct==null?void 0:ct.id)===F.id?"border-gold-500":"border-gray-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsxs("span",{className:"text-white font-medium",children:[new Date(F.startTime).toLocaleDateString("bg-BG")," ",new Date(F.startTime).toLocaleTimeString("bg-BG",{hour:"2-digit",minute:"2-digit"})]}),y.jsx("span",{className:`text-xs px-2 py-1 rounded ${F.outcome==="completed"?"bg-green-500/20 text-green-400":F.outcome==="abandoned"?"bg-yellow-500/20 text-yellow-400":F.outcome==="error"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:F.outcome==="completed"?" ":F.outcome==="abandoned"?" ":F.outcome==="error"?" ":" "})]}),y.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[y.jsxs("div",{children:[" ",F.duration?`${F.duration} `:" ..."]}),y.jsxs("div",{children:[" ",F.toolCalls," "]}),F.bookingCreated&&y.jsx("div",{className:"text-green-400",children:"  "})]})]},F.id))}),y.jsx("div",{className:"bg-dark-800 border border-gray-700 rounded-lg p-4 max-h-[600px] overflow-y-auto",children:ct?y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-lg font-display text-white",children:"  "}),y.jsxs("button",{onClick:async()=>{if(confirm("  ,      ?"))try{await q4(ct.id),St(F=>F.filter(me=>me.id!==ct.id)),di(null)}catch{alert("  ")}},className:"px-3 py-1 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition text-sm",children:[y.jsx("i",{className:"fa-solid fa-trash mr-1"}),""]})]}),y.jsxs("div",{className:"space-y-3",children:[ct.events.map((F,me)=>y.jsxs("div",{className:`p-3 rounded-lg ${F.type==="agent_response"?"bg-gold-500/10 border-l-4 border-gold-500":F.type==="user_speech"?"bg-blue-500/10 border-l-4 border-blue-500":F.type==="tool_call"?"bg-purple-500/10 border-l-4 border-purple-500":"bg-gray-700/50 border-l-4 border-gray-500"}`,children:[y.jsxs("div",{className:"flex justify-between items-start mb-1",children:[y.jsx("span",{className:"text-xs font-bold uppercase text-gray-400",children:F.type==="agent_response"?" ":F.type==="user_speech"?" ":F.type==="tool_call"?" ":" "}),y.jsx("span",{className:"text-xs text-gray-500",children:new Date(F.timestamp).toLocaleTimeString("bg-BG")})]}),y.jsx("p",{className:"text-white text-sm",children:F.content}),F.metadata&&y.jsx("pre",{className:"text-xs text-gray-400 mt-2 bg-black/30 p-2 rounded overflow-x-auto",children:JSON.stringify(F.metadata,null,2)})]},me)),ct.events.length===0&&y.jsx("p",{className:"text-gray-500 text-center py-4",children:"  "})]})]}):y.jsxs("div",{className:"text-center text-gray-500 py-12",children:[y.jsx("i",{className:"fa-solid fa-hand-pointer text-3xl mb-4 block"}),y.jsx("p",{children:"   "})]})})]})]})]})},K4=({services:t,onBookNow:e,lang:n})=>{const s=Ys[n].services;return y.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[y.jsxs("div",{className:"text-center mb-20",children:[y.jsx("h2",{className:"text-gold-500 text-sm uppercase tracking-[0.3em] mb-4",children:s.menu}),y.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold text-white mb-6",children:n==="bg"?" ":"What We Do"}),y.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:s.subtitle})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",children:t.map((a,l)=>y.jsxs("div",{className:"group flex flex-col items-center text-center p-6 rounded-xl hover:bg-white/5 transition duration-500 border border-transparent hover:border-gold-500/20 cursor-pointer",onClick:e,children:[y.jsx("div",{className:"mb-6 w-24 h-24 flex items-center justify-center rounded-full border-2 border-gold-500/30 bg-black overflow-hidden group-hover:scale-110 transition duration-500",children:a.imageUrl?y.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"}):y.jsx("i",{className:`${a.icon} text-4xl text-gold-500 group-hover:text-gold-400`})}),y.jsx("h3",{className:"text-xl font-display font-bold text-white mb-2 uppercase tracking-wide",children:n==="bg"?a.nameBg:a.name}),y.jsx("div",{className:"text-gold-400 font-bold text-lg mb-4",children:typeof a.price=="number"?` ${a.price}`:a.price}),y.jsx("p",{className:"text-gray-500 text-sm leading-relaxed max-w-xs",children:n==="bg"?a.descriptionBg:a.description}),y.jsx("button",{className:"mt-6 text-xs text-gray-400 uppercase tracking-widest border-b border-transparent group-hover:border-gold-500 group-hover:text-gold-500 transition-all",children:s.bookBtn})]},a.id))})]})},$4=({barbers:t,onBookBarber:e,lang:n})=>{const s=Ys[n].barbers;return y.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("h2",{className:"text-gold-500 text-sm uppercase tracking-[0.3em] mb-4",children:s.team}),y.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold text-white mb-6",children:s.title}),y.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:s.subtitle})]}),y.jsx("div",{className:"grid gap-12",children:t.map((a,l)=>y.jsxs("div",{className:`flex flex-col md:flex-row gap-8 items-center ${l%2===1?"md:flex-row-reverse":""} bg-dark-800/30 p-8 rounded-xl border border-white/5 hover:border-gold-500/30 transition duration-500`,children:[y.jsx("div",{className:"w-full md:w-1/3 shrink-0",children:y.jsx("div",{className:"aspect-square relative rounded-lg overflow-hidden border-2 border-gold-500/20 shadow-2xl",children:y.jsx("img",{src:a.avatar,alt:a.name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-110"})})}),y.jsxs("div",{className:"w-full md:w-2/3 text-center md:text-left",children:[y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-3xl font-display text-white mb-2 md:mb-0",children:n==="bg"?a.nameBg:a.name}),y.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-3 py-1 rounded-full border border-gold-500/20",children:[y.jsx("i",{className:"fa-solid fa-star text-gold-500 text-xs"}),y.jsxs("span",{className:"text-gold-100 font-bold text-sm",children:[a.rating," / 5.0"]})]})]}),y.jsx("h4",{className:"text-gold-500 uppercase tracking-widest text-sm mb-6",children:n==="bg"?a.specialtyBg:a.specialty}),y.jsx("p",{className:"text-gray-300 leading-relaxed mb-8 text-lg font-light",children:n==="bg"?a.bioBg:a.bio}),y.jsxs("button",{onClick:()=>e(a.id),className:"inline-block border border-gold-500 text-gold-500 px-8 py-3 rounded hover:bg-gold-500 hover:text-black font-bold transition duration-300",children:[s.bookBtn," ",(n==="bg"?a.nameBg:a.name).split(" ")[0]]})]})]},a.id))})]})},X4=({state:t,onBook:e,onDeleteAppointment:n,onReturnHome:s,lang:a="en",authenticatedBarber:l})=>{var te,ye,Te,k,ne,ue;const[c,d]=Q.useState(l||null),[m,g]=Q.useState("schedule"),[_,E]=Q.useState(new Date().toISOString().split("T")[0]),T=Q.useRef(null),[S,N]=Q.useState(!1),[V,C]=Q.useState(null),[G,Z]=Q.useState(""),[H,X]=Q.useState(""),[ce,he]=Q.useState(""),[O,I]=Q.useState({isOpen:!1,appId:null}),R=((te=Ys[a])==null?void 0:te.staff)||Ys.en.staff,M=Q.useMemo(()=>{if(!c)return{revenue:0,appointments:0,topService:"N/A",nextAppt:null};let re=0,fe=0;const Ee={},Ie=new Date;let ft=null,$e=1/0;t.appointments.forEach(an=>{if(an.barberId===c.id){fe++;const $t=t.services.find(Rn=>Rn.id===an.serviceId);if($t&&typeof $t.price=="number"&&(re+=$t.price),$t){const Rn=a==="bg"?$t.nameBg:$t.name;Ee[Rn]=(Ee[Rn]||0)+1}const Bn=new Date(an.date).getTime()-Ie.getTime();Bn>0&&Bn<$e&&($e=Bn,ft=an)}});let gn="N/A",In=0;return Object.entries(Ee).forEach(([an,$t])=>{$t>In&&(In=$t,gn=an)}),{revenue:re,appointments:fe,topService:gn,nextAppt:ft}},[t.appointments,c,a,t.services]),U=re=>{const fe=new Date(`${_}T${re}`);return t.appointments.find(Ee=>{if(Ee.barberId!==(c==null?void 0:c.id)||Ee.status==="cancelled")return!1;const Ie=new Date(Ee.date);return Ie.getDate()===fe.getDate()&&Ie.getMonth()===fe.getMonth()&&Ie.getFullYear()===fe.getFullYear()&&Ie.getHours()===fe.getHours()&&Ie.getMinutes()===fe.getMinutes()})},B=()=>{if(!V||!G||!ce||!c)return;const re=new Date(`${_}T${V}`),fe={id:`apt-${Date.now()}`,serviceId:ce,barberId:c.id,date:re.toISOString(),customerName:G,customerEmail:H?`+359${H.replace(/\D/g,"")}`:"walk-in@manual.com",status:"confirmed"};e(fe),Ye()},D=re=>{C(re),he(t.services[0].id),N(!0)},Ye=()=>{N(!1),C(null),Z(""),X("")},Je=re=>{I({isOpen:!0,appId:re})},ee=()=>{O.appId&&n(O.appId),I({isOpen:!1,appId:null})},L=re=>{const fe=new Date(re),Ee=fe.toLocaleDateString(a==="bg"?"bg-BG":"en-US",{weekday:"short"}),Ie=fe.getDate(),ft=fe.toLocaleDateString(a==="bg"?"bg-BG":"en-US",{month:"short"});return{dayName:Ee,dayNum:Ie,month:ft}};return c?y.jsxs("div",{className:"min-h-screen bg-black pb-24 text-gray-200 font-body",children:[y.jsx("header",{className:"bg-dark-900/90 backdrop-blur-md border-b border-gray-800 pt-12 pb-4 px-6 sticky top-0 z-30 shadow-lg",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:c.avatar,className:"w-10 h-10 rounded-full border border-gold-500 object-cover"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-dark-900 rounded-full"})]}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xs text-gold-500 uppercase tracking-wider",children:"Welcome back"}),y.jsx("h1",{className:"font-bold text-white leading-none",children:(a==="bg"?c.nameBg:c.name).split(" ")[0]})]})]}),y.jsx("button",{onClick:()=>d(null),className:"w-8 h-8 rounded-full bg-dark-800 flex items-center justify-center text-gray-400 hover:text-white hover:bg-dark-700 transition",children:y.jsx("i",{className:"fa-solid fa-power-off text-xs"})})]})}),y.jsx("div",{className:"bg-dark-900 px-6 py-4 border-b border-gray-800/50 sticky top-0 z-30",children:y.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/60 rounded-full p-1.5 max-w-md mx-auto backdrop-blur-sm border border-gray-700/50",children:[y.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-full font-bold text-sm transition-all duration-300 ${m==="schedule"?"bg-gradient-to-r from-gold-600 to-gold-500 text-black shadow-lg shadow-gold-500/30 scale-105":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,onClick:()=>g("schedule"),children:[y.jsx("i",{className:"fa-solid fa-calendar-days"}),y.jsx("span",{className:"uppercase tracking-wide",children:R.schedule})]}),y.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-full font-bold text-sm transition-all duration-300 ${m==="dashboard"?"bg-gradient-to-r from-gold-600 to-gold-500 text-black shadow-lg shadow-gold-500/30 scale-105":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,onClick:()=>g("dashboard"),children:[y.jsx("i",{className:"fa-solid fa-chart-pie"}),y.jsx("span",{className:"uppercase tracking-wide",children:R.myStats})]})]})}),m==="dashboard"&&y.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-900 p-5 rounded-2xl border border-gray-800 shadow-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 text-gold-500",children:[y.jsx("i",{className:"fa-solid fa-sack-dollar"}),y.jsx("span",{className:"text-xs font-bold uppercase",children:R.totalRevenue})]}),y.jsxs("div",{className:"text-2xl font-bold text-white",children:["",M.revenue]}),y.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]}),y.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-900 p-5 rounded-2xl border border-gray-800 shadow-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-400",children:[y.jsx("i",{className:"fa-solid fa-calendar-check"}),y.jsx("span",{className:"text-xs font-bold uppercase",children:R.totalAppts})]}),y.jsx("div",{className:"text-2xl font-bold text-white",children:M.appointments}),y.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Confirmed"})]})]}),y.jsxs("div",{className:"bg-dark-800 p-5 rounded-2xl border border-gray-800",children:[y.jsxs("div",{className:"flex justify-between items-end mb-2",children:[y.jsx("span",{className:"text-sm font-bold text-white",children:"Weekly Goal"}),y.jsxs("span",{className:"text-xs text-gold-500",children:["",M.revenue," / 2000"]})]}),y.jsx("div",{className:"w-full bg-dark-900 rounded-full h-2",children:y.jsx("div",{className:"bg-gradient-to-r from-gold-600 to-gold-400 h-2 rounded-full",style:{width:`${Math.min(M.revenue/2e3*100,100)}%`}})})]}),M.nextAppt?y.jsxs("div",{className:"bg-gradient-to-r from-dark-800 to-dark-700 p-5 rounded-2xl border-l-4 border-green-500 shadow-lg",children:[y.jsx("h3",{className:"text-xs text-gray-400 uppercase mb-2",children:"Up Next"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-bold text-white",children:M.nextAppt.customerName}),y.jsx("div",{className:"text-sm text-gold-400",children:new Date(M.nextAppt.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),y.jsx("div",{className:"w-10 h-10 bg-dark-900 rounded-full flex items-center justify-center",children:y.jsx("i",{className:"fa-solid fa-scissors text-gray-400"})})]})]}):y.jsx("div",{className:"bg-dark-800 p-6 rounded-2xl text-center border border-dashed border-gray-700",children:y.jsx("p",{className:"text-gray-500 text-sm",children:"No upcoming appointments found."})}),y.jsxs("div",{className:"bg-dark-800 p-5 rounded-2xl border border-gray-800",children:[y.jsx("h3",{className:"text-xs text-gray-400 uppercase mb-3",children:R.topService}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded bg-gold-500/20 flex items-center justify-center text-gold-500",children:y.jsx("i",{className:"fa-solid fa-star"})}),y.jsx("span",{className:"font-bold text-white",children:M.topService})]})]})]}),m==="schedule"&&y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("div",{className:"bg-dark-900 py-4 border-b border-gray-800 sticky top-24 z-20 shadow-md",children:y.jsxs("div",{className:"flex items-center justify-between px-6",children:[y.jsx("button",{onClick:()=>{const re=new Date(_);re.setDate(re.getDate()-1),E(re.toISOString().split("T")[0])},className:"w-10 h-10 shrink-0 rounded-full bg-dark-800 flex items-center justify-center text-gray-400 hover:text-white",children:y.jsx("i",{className:"fa-solid fa-chevron-left"})}),y.jsxs("div",{className:"flex-1 mx-4 relative group flex flex-col items-center justify-center cursor-pointer py-2 hover:bg-dark-800/30 rounded-lg transition-colors",onClick:()=>{var re;try{(re=T.current)==null||re.showPicker()}catch{}},children:[y.jsxs("div",{className:"text-center pointer-events-none",children:[y.jsxs("div",{className:"text-xs text-gold-500 uppercase font-bold tracking-widest group-hover:text-gold-400 transition-colors mb-1",children:[L(_).month," ",y.jsx("i",{className:"fa-solid fa-caret-down ml-1"})]}),y.jsxs("div",{className:"text-3xl font-display font-bold text-white group-hover:text-gray-200 transition-colors leading-none",children:[L(_).dayName," ",y.jsx("span",{className:"text-gold-500",children:"."})," ",L(_).dayNum]})]}),y.jsx("input",{ref:T,type:"date",value:_,onChange:re=>re.target.value&&E(re.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20"})]}),y.jsx("button",{onClick:()=>{const re=new Date(_);re.setDate(re.getDate()+1),E(re.toISOString().split("T")[0])},className:"w-10 h-10 shrink-0 rounded-full bg-dark-800 flex items-center justify-center text-gray-400 hover:text-white",children:y.jsx("i",{className:"fa-solid fa-chevron-right"})})]})}),y.jsxs("div",{className:"p-6 relative",children:[y.jsx("div",{className:"absolute left-[85px] top-6 bottom-6 w-0.5 bg-gray-800"}),y.jsx("div",{className:"space-y-6",children:q_.map(re=>{const fe=U(re),Ee=fe?t.services.find(Ie=>Ie.id===fe.serviceId):null;return y.jsxs("div",{className:"flex gap-6 relative",children:[y.jsx("div",{className:"w-12 pt-3 text-right",children:y.jsx("span",{className:"text-sm font-bold text-gray-500 font-mono",children:re})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:`absolute left-[56px] top-4 w-3 h-3 rounded-full border-2 ${fe?"bg-gold-500 border-gold-500 shadow-[0_0_10px_rgba(212,175,55,0.5)]":"bg-dark-900 border-gray-600"} z-10`}),fe?y.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-700 shadow-lg relative overflow-hidden group",children:[y.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gold-500"}),y.jsxs("div",{className:"flex justify-between items-start mb-1",children:[y.jsx("h4",{className:"font-bold text-white text-lg",children:fe.customerName}),y.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-700 flex items-center justify-center",children:y.jsx("i",{className:"fa-solid fa-user text-gray-400 text-xs"})})]}),y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx("span",{className:"text-xs font-bold text-gold-400 uppercase tracking-wide",children:a==="bg"?Ee==null?void 0:Ee.nameBg:Ee==null?void 0:Ee.name}),y.jsx("span",{className:"text-gray-600",children:""}),y.jsxs("span",{className:"text-xs text-gray-400",children:[Ee==null?void 0:Ee.duration," min"]})]}),y.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/50",children:[y.jsx("span",{className:"text-xs text-gray-500",children:fe.customerEmail}),y.jsx("button",{onClick:()=>Je(fe.id),className:"text-red-400 hover:text-red-300 text-xs uppercase font-bold tracking-wider",children:"Cancel"})]})]}):y.jsxs("button",{onClick:()=>D(re),className:"w-full h-[80px] rounded-xl border border-dashed border-gray-800 bg-dark-900/50 hover:bg-dark-800 hover:border-gold-500/30 transition-all group flex items-center justify-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-800 border border-gray-700 flex items-center justify-center group-hover:bg-gold-500 group-hover:text-black transition-colors",children:y.jsx("i",{className:"fa-solid fa-plus text-sm text-gray-500 group-hover:text-black"})}),y.jsx("span",{className:"text-sm text-gray-600 font-bold group-hover:text-gold-500",children:R.addBooking})]})]})]},re)})})]})]}),S&&y.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-fade-in",children:y.jsxs("div",{className:"bg-dark-800 w-full max-w-sm rounded-2xl border border-gold-500/20 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"bg-gradient-to-r from-dark-900 to-dark-800 p-5 border-b border-gray-700 flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-white font-bold text-lg",children:R.newBooking}),y.jsxs("p",{className:"text-gold-500 text-xs font-mono",children:[_," @ ",V]})]}),y.jsx("button",{onClick:Ye,className:"w-8 h-8 bg-dark-700 rounded-full flex items-center justify-center text-gray-400 hover:text-white",children:y.jsx("i",{className:"fa-solid fa-xmark"})})]}),y.jsxs("div",{className:"p-6 space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-500 text-xs uppercase font-bold tracking-wider mb-2",children:R.clientName}),y.jsx("input",{type:"text",value:G,onChange:re=>Z(re.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded-lg p-3 text-white focus:border-gold-500 outline-none transition-colors",placeholder:a==="bg"?"  ":"Customer Name",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-gray-500 text-xs uppercase font-bold tracking-wider mb-2",children:[a==="bg"?"":"Phone"," ",y.jsxs("span",{className:"text-gray-600 normal-case italic",children:["(",a==="bg"?"":"Optional",")"]})]}),y.jsx("input",{type:"tel",value:H,onChange:re=>X(re.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded-lg p-3 text-white focus:border-gold-500 outline-none transition-colors font-mono",placeholder:"+359..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-500 text-xs uppercase font-bold tracking-wider mb-2",children:((ue=(ne=(k=Ys[a])==null?void 0:k.admin)==null?void 0:ne.table)==null?void 0:ue.service)||"Service"}),y.jsxs("div",{className:"relative",children:[y.jsx("select",{value:ce,onChange:re=>he(re.target.value),className:"w-full bg-dark-900 border border-gray-700 rounded-lg p-3 text-white focus:border-gold-500 outline-none appearance-none",children:t.services.map(re=>y.jsxs("option",{value:re.id,children:[a==="bg"?re.nameBg:re.name," - ",re.price]},re.id))}),y.jsx("div",{className:"absolute right-3 top-3.5 text-gray-500 pointer-events-none",children:y.jsx("i",{className:"fa-solid fa-chevron-down text-xs"})})]})]}),y.jsx("button",{onClick:B,disabled:!G,className:"w-full bg-gold-500 text-black font-bold py-3.5 rounded-lg hover:bg-gold-400 transition-all shadow-lg shadow-gold-500/20 disabled:opacity-50 disabled:shadow-none mt-2",children:R.confirmBooking})]})]})}),y.jsx(Y_,{isOpen:O.isOpen,title:"Confirm Cancellation",message:R.cancelConfirm,onConfirm:ee,onCancel:()=>I({isOpen:!1,appId:null}),confirmText:"Yes, Cancel",cancelText:"No, Keep It"})]}):y.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/dark-leather.png')] opacity-20"}),y.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-gold-500/10 rounded-full blur-3xl"}),y.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-blue-900/10 rounded-full blur-3xl"}),y.jsxs("div",{className:"z-10 w-full max-w-md animate-fade-in-up",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("img",{src:"/images/nalby-logo.png",alt:"Nalby Style",className:"w-32 h-32 mx-auto mb-6 object-contain opacity-90 drop-shadow-2xl"}),y.jsxs("h1",{className:"font-display text-4xl text-white mb-2 tracking-widest",children:["NALBY ",y.jsx("span",{className:"text-gold-500",children:"STYLE"})]}),y.jsx("p",{className:"text-gold-500/80 text-sm uppercase tracking-widest border-b border-gold-500/20 pb-4 inline-block",children:R.portal})]}),y.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.barbers.map(re=>y.jsxs("button",{onClick:()=>d(re),className:"group relative bg-dark-800/80 backdrop-blur-sm border border-gray-700 rounded-xl p-6 flex flex-col items-center gap-3 hover:border-gold-500 hover:bg-dark-800 transition-all duration-300 shadow-xl",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:re.avatar,alt:re.name,className:"w-20 h-20 rounded-full object-cover border-2 border-gray-600 group-hover:border-gold-500 transition-colors"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-dark-800 rounded-full"})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"font-bold text-white text-sm leading-tight group-hover:text-gold-400 transition-colors",children:(a==="bg"?re.nameBg:re.name).split('"')[0]}),y.jsx("p",{className:"text-[10px] text-gray-500 uppercase mt-1",children:"Select Profile"})]})]},re.id))}),y.jsxs("button",{onClick:s,className:"mt-12 text-gray-500 text-xs w-full text-center hover:text-white uppercase tracking-wider flex items-center justify-center gap-2 transition-colors",children:[y.jsx("i",{className:"fa-solid fa-arrow-left"})," ",((Te=(ye=Ys[a])==null?void 0:ye.nav)==null?void 0:Te.backToWeb)||"Back to Website"]})]})]})};var Q4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(oS||(oS={}));var lS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(lS||(lS={}));var cS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(cS||(cS={}));var uS;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(uS||(uS={}));var hS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hS||(hS={}));var dS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(dS||(dS={}));var fS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fS||(fS={}));var mS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(mS||(mS={}));var pS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pS||(pS={}));var gS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gS||(gS={}));var yS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(yS||(yS={}));var _S;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(_S||(_S={}));var vS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vS||(vS={}));var ES;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ES||(ES={}));var bS;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bS||(bS={}));var TS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(TS||(TS={}));var AS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(AS||(AS={}));var SS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(SS||(SS={}));var xS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xS||(xS={}));var wS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(wS||(wS={}));var IS;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(IS||(IS={}));var RS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(RS||(RS={}));var NS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NS||(NS={}));var CS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(CS||(CS={}));var OS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OS||(OS={}));var DS;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(DS||(DS={}));var MS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(MS||(MS={}));var PS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(PS||(PS={}));var VS;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(VS||(VS={}));var LS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(LS||(LS={}));var kS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(kS||(kS={}));var US;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(US||(US={}));var jS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(jS||(jS={}));var BS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(BS||(BS={}));var FS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(FS||(FS={}));var zS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zS||(zS={}));var HS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(HS||(HS={}));var GS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(GS||(GS={}));var qS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(qS||(qS={}));var YS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(YS||(YS={}));var KS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(KS||(KS={}));var $S;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})($S||($S={}));var XS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(XS||(XS={}));var QS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(QS||(QS={}));var WS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(WS||(WS={}));var JS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JS||(JS={}));var ZS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ZS||(ZS={}));var ex;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ex||(ex={}));var tx;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(tx||(tx={}));var nx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nx||(nx={}));var ix;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ix||(ix={}));var sx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(sx||(sx={}));var rx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rx||(rx={}));var ax;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ax||(ax={}));var ox;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ox||(ox={}));var lx;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(lx||(lx={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cx;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(cx||(cx={}));function hf(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function ux(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(t){return this instanceof Et?(this.v=t,this):new Et(t)}function su(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(N){return Promise.resolve(N).then(S,E)}}function d(S,N){s[S]&&(a[S]=function(V){return new Promise(function(C,G){l.push([S,V,C,G])>1||m(S,V)})},N&&(a[S]=N(a[S])))}function m(S,N){try{g(s[S](N))}catch(V){T(l[0][3],V)}}function g(S){S.value instanceof Et?Promise.resolve(S.value.v).then(_,E):T(l[0][2],S)}function _(S){m("next",S)}function E(S){m("throw",S)}function T(S,N){S(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Al(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ux=="function"?ux(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(d,m){c=t[l](c),a(d,m,c.done,c.value)})}}function a(l,c,d,m){Promise.resolve(m).then(function(g){l({value:g,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DN=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return DN=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const W4=()=>DN();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ly=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ni extends Error{}class jn extends Ni{constructor(e,n,s,a){super(`${jn.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new zf({message:s,cause:ly(n)});const l=n;return e===400?new PN(e,l,s,a):e===401?new VN(e,l,s,a):e===403?new LN(e,l,s,a):e===404?new kN(e,l,s,a):e===409?new UN(e,l,s,a):e===422?new jN(e,l,s,a):e===429?new BN(e,l,s,a):e>=500?new FN(e,l,s,a):new jn(e,l,s,a)}}class cy extends jn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class zf extends jn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class MN extends zf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class PN extends jn{}class VN extends jn{}class LN extends jn{}class kN extends jn{}class UN extends jn{}class jN extends jn{}class BN extends jn{}class FN extends jn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J4=/^[a-z][a-z0-9+.-]*:/i,Z4=t=>J4.test(t);let uy=t=>(uy=Array.isArray,uy(t));const eB=uy;let tB=eB;const hx=tB;function nB(t){if(!t)return!0;for(const e in t)return!1;return!0}function iB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const sB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ni(`${t} must be an integer`);if(e<0)throw new Ni(`${t} must be a positive integer`);return e},rB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const lB=()=>{var t,e,n,s,a;const l=oB();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dl,"X-Stainless-OS":fx(Deno.build.os),"X-Stainless-Arch":dx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dl,"X-Stainless-OS":fx((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":dx((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=cB();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const dx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",fx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ed;const uB=()=>Ed??(Ed=lB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function dB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return zN({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function HN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function fB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GN=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fg(t,e,n){return GN(),new File(t,e??"unknown_file",n)}function pB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const gB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",yB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qN(t),_B=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function vB(t,e,n){if(GN(),t=await t,yB(t))return t instanceof File?t:fg([await t.arrayBuffer()],t.name);if(_B(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),fg(await hy(a),e,n)}const s=await hy(t);if(e||(e=pB(t)),!(n!=null&&n.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return fg(s,e,n)}async function hy(t){var e,n,s,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(qN(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(gB(t))try{for(var d=!0,m=Al(t),g;g=await m.next(),e=g.done,!e;d=!0){a=g.value,d=!1;const _=a;c.push(...await hy(_))}}catch(_){n={error:_}}finally{try{!d&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}else{const _=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${EB(t)}`)}return c}function EB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YN{constructor(e){this._client=e}}YN._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const mx=Object.freeze(Object.create(null)),bB=(t=KN)=>(function(n,...s){if(n.length===1)return n[0];let a=!1;const l=[],c=n.reduce((_,E,T)=>{var S,N,V;/[?#]/.test(E)&&(a=!0);const C=s[T];let G=(a?encodeURIComponent:t)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((V=Object.getPrototypeOf((N=Object.getPrototypeOf((S=C.hasOwnProperty)!==null&&S!==void 0?S:mx))!==null&&N!==void 0?N:mx))===null||V===void 0?void 0:V.toString))&&(G=C+"",l.push({start:_.length+E.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),_+E+(T===s.length?"":G)},""),d=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=m.exec(d))!==null;)l.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((T,S)=>{const N=" ".repeat(S.start-_),V="^".repeat(S.length);return _=S.start+S.length,T+N+V},"");throw new Ni(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${c}
${E}`)}return c}),bd=bB(KN);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends YN{create(e,n){var s;const{api_version:a=this._client.apiVersion}=e,l=hf(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Ni("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Ni("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(bd`/${a}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(bd`/${a}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(bd`/${a}/interactions/${e}/cancel`,s)}get(e,n={},s){var a;const l=n??{},{api_version:c=this._client.apiVersion}=l,d=hf(l,["api_version"]);return this._client.get(bd`/${c}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}$N._key=Object.freeze(["interactions"]);class XN extends $N{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TB(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let Td;function X_(t){let e;return(Td??(e=new globalThis.TextEncoder,Td=e.encode.bind(e)))(t)}let Ad;function px(t){let e;return(Ad??(e=new globalThis.TextDecoder,Ad=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?X_(e):e;this.buffer=TB([this.buffer,n]);const s=[];let a;for(;(a=AB(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(px(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=px(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Hf.NEWLINE_CHARS=new Set([`
`,"\r"]);Hf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function AB(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function SB(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const df={off:0,error:200,warn:300,info:400,debug:500},gx=(t,e,n)=>{if(t){if(iB(df,t))return t;Ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(df))}`)}};function Kc(){}function Sd(t,e,n){return!e||df[t]>df[n]?Kc:e[t].bind(e)}const xB={error:Kc,warn:Kc,info:Kc,debug:Kc};let yx=new WeakMap;function Ln(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return xB;const a=yx.get(n);if(a&&a[0]===s)return a[1];const l={error:Sd("error",n,s),warn:Sd("warn",n,s),info:Sd("info",n,s),debug:Sd("debug",n,s)};return yx.set(n,[s,l]),l}const Qa=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ml{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let a=!1;const l=s?Ln(s):console;function c(){return su(this,arguments,function*(){var m,g,_,E;if(a)throw new Ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var S=!0,N=Al(wB(e,n)),V;V=yield Et(N.next()),m=V.done,!m;S=!0){E=V.value,S=!1;const C=E;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Et(JSON.parse(C.data))}catch(G){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),G}}}catch(C){g={error:C}}finally{try{!S&&!m&&(_=N.return)&&(yield Et(_.call(N)))}finally{if(g)throw g.error}}T=!0}catch(C){if(oy(C))return yield Et(void 0);throw C}finally{T||n.abort()}})}return new ml(c,n,s)}static fromReadableStream(e,n,s){let a=!1;function l(){return su(this,arguments,function*(){var m,g,_,E;const T=new Hf,S=HN(e);try{for(var N=!0,V=Al(S),C;C=yield Et(V.next()),m=C.done,!m;N=!0){E=C.value,N=!1;const G=E;for(const Z of T.decode(G))yield yield Et(Z)}}catch(G){g={error:G}}finally{try{!N&&!m&&(_=V.return)&&(yield Et(_.call(V)))}finally{if(g)throw g.error}}for(const G of T.flush())yield yield Et(G)})}function c(){return su(this,arguments,function*(){var m,g,_,E;if(a)throw new Ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var S=!0,N=Al(l()),V;V=yield Et(N.next()),m=V.done,!m;S=!0){E=V.value,S=!1;const C=E;T||C&&(yield yield Et(JSON.parse(C)))}}catch(C){g={error:C}}finally{try{!S&&!m&&(_=N.return)&&(yield Et(_.call(N)))}finally{if(g)throw g.error}}T=!0}catch(C){if(oy(C))return yield Et(void 0);throw C}finally{T||n.abort()}})}return new ml(c,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new ml(()=>a(e),this.controller,this.client),new ml(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return zN({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const c=X_(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function wB(t,e){return su(this,arguments,function*(){var s,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ni("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ni("Attempted to iterate over a response with no body");const d=new RB,m=new Hf,g=HN(t.body);try{for(var _=!0,E=Al(IB(g)),T;T=yield Et(E.next()),s=T.done,!s;_=!0){c=T.value,_=!1;const S=c;for(const N of m.decode(S)){const V=d.decode(N);V&&(yield yield Et(V))}}}catch(S){a={error:S}}finally{try{!_&&!s&&(l=E.return)&&(yield Et(l.call(E)))}finally{if(a)throw a.error}}for(const S of m.flush()){const N=d.decode(S);N&&(yield yield Et(N))}})}function IB(t){return su(this,arguments,function*(){var n,s,a,l;let c=new Uint8Array;try{for(var d=!0,m=Al(t),g;g=yield Et(m.next()),n=g.done,!n;d=!0){l=g.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?X_(_):_;let T=new Uint8Array(c.length+E.length);T.set(c),T.set(E,c.length),c=T;let S;for(;(S=SB(c))!==-1;)yield yield Et(c.slice(0,S)),c=c.slice(S)}}catch(_){s={error:_}}finally{try{!d&&!n&&(a=m.return)&&(yield Et(a.call(m)))}finally{if(s)throw s.error}}c.length>0&&(yield yield Et(c))})}class RB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=NB(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function NB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CB(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var d;if(e.options.stream)return Ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ml.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const m=n.headers.get("content-type"),g=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(g==null?void 0:g.includes("application/json"))||(g==null?void 0:g.endsWith("+json"))?await n.json():await n.text()})();return Ln(t).debug(`[${s}] response parsed`,Qa({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q_ extends Promise{constructor(e,n,s=CB){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Q_(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QN=Symbol("brand.privateNullableHeaders");function*OB(t){if(!t)return;if(QN in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():hx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=hx(s[1])?s[1]:[s[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,d])}}const Uc=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,c]of OB(s)){const d=l.toLowerCase();a.has(d)||(e.delete(l),a.add(d)),c===null?(e.delete(l),n.add(d)):(e.append(l,c),n.delete(d))}}return{[QN]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mg=t=>{var e,n,s,a,l,c;if(typeof globalThis.process<"u")return(s=(n=(e=Q4)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WN;class Gf{constructor(e){var n,s,a,l,c,d,m,{baseURL:g=mg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=mg("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,T=hf(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(s=S.timeout)!==null&&s!==void 0?s:Gf.DEFAULT_TIMEOUT,this.logger=(a=S.logger)!==null&&a!==void 0?a:console;const N="warn";this.logLevel=N,this.logLevel=(c=(l=gx(S.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:gx(mg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=S.fetchOptions,this.maxRetries=(d=S.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=S.fetch)!==null&&m!==void 0?m:hB(),this.encoder=mB,this._options=S,this.apiKey=_,this.apiVersion=E,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Uc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Uc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Uc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new Ni(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${dl}`}defaultIdempotencyKey(){return`stainless-node-retry-${W4()}`}makeStatusError(e,n,s,a){return jn.generate(e,n,s,a)}buildURL(e,n,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=Z4(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return nB(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new Q_(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var a,l,c;const d=await e,m=(a=d.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=m),await this.prepareOptions(d);const{req:g,url:_,timeout:E}=await this.buildRequest(d,{retryCount:m-n});await this.prepareRequest(g,{url:_,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Ln(this).debug(`[${T}] sending request`,Qa({retryOfRequestLogID:s,method:d.method,url:_,options:d,headers:g.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new cy;const V=new AbortController,C=await this.fetchWithTimeout(_,g,E,V).catch(ly),G=Date.now();if(C instanceof globalThis.Error){const H=`retrying, ${n} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new cy;const X=oy(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return Ln(this).info(`[${T}] connection ${X?"timed out":"failed"} - ${H}`),Ln(this).debug(`[${T}] connection ${X?"timed out":"failed"} (${H})`,Qa({retryOfRequestLogID:s,url:_,durationMs:G-N,message:C.message})),this.retryRequest(d,n,s??T);throw Ln(this).info(`[${T}] connection ${X?"timed out":"failed"} - error; no more retries left`),Ln(this).debug(`[${T}] connection ${X?"timed out":"failed"} (error; no more retries left)`,Qa({retryOfRequestLogID:s,url:_,durationMs:G-N,message:C.message})),X?new MN:new zf({cause:C})}const Z=`[${T}${S}] ${g.method} ${_} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${G-N}ms`;if(!C.ok){const H=await this.shouldRetry(C);if(n&&H){const R=`retrying, ${n} attempts remaining`;return await fB(C.body),Ln(this).info(`${Z} - ${R}`),Ln(this).debug(`[${T}] response error (${R})`,Qa({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:G-N})),this.retryRequest(d,n,s??T,C.headers)}const X=H?"error; no more retries left":"error; not retryable";Ln(this).info(`${Z} - ${X}`);const ce=await C.text().catch(R=>ly(R).message),he=rB(ce),O=he?void 0:ce;throw Ln(this).debug(`[${T}] response error (${X})`,Qa({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:O,durationMs:Date.now()-N})),this.makeStatusError(C.status,he,O,C.headers)}return Ln(this).info(Z),Ln(this).debug(`[${T}] response start`,Qa({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:G-N})),{response:C,options:d,controller:V,requestLogID:T,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,n,s,a){const l=n||{},{signal:c,method:d}=l,m=hf(l,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const g=setTimeout(()=>a.abort(),s),_=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,E=Object.assign(Object.assign(Object.assign({signal:a.signal},_?{duplex:"half"}:{}),{method:"GET"}),m);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(g)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){var l;let c;const d=a==null?void 0:a.get("retry-after-ms");if(d){const g=parseFloat(d);Number.isNaN(g)||(c=g)}const m=a==null?void 0:a.get("retry-after");if(m&&!c){const g=parseFloat(m);Number.isNaN(g)?c=Date.parse(m)-Date.now():c=g*1e3}if(!(c&&0<=c&&c<60*1e3)){const g=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,g)}return await aB(c),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,a,l;const c=Object.assign({},e),{method:d,path:m,query:g,defaultBaseURL:_}=c,E=this.buildURL(m,g,_);"timeout"in c&&sB("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:S}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let d=Uc([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),uB()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Uc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:dB(e)}:this.encoder({body:e,headers:s})}}Gf.DEFAULT_TIMEOUT=6e4;class pn extends Gf{constructor(){super(...arguments),this.interactions=new XN(this)}}WN=pn;pn.GeminiNextGenAPIClient=WN;pn.GeminiNextGenAPIClientError=Ni;pn.APIError=jn;pn.APIConnectionError=zf;pn.APIConnectionTimeoutError=MN;pn.APIUserAbortError=cy;pn.NotFoundError=kN;pn.ConflictError=UN;pn.RateLimitError=BN;pn.BadRequestError=PN;pn.AuthenticationError=VN;pn.InternalServerError=FN;pn.PermissionDeniedError=LN;pn.UnprocessableEntityError=jN;pn.toFile=vB;pn.Interactions=XN;const W_=Q.createContext({});function J_(t){const e=Q.useRef(null);return e.current===null&&(e.current=t()),e.current}const JN=typeof window<"u",ZN=JN?Q.useLayoutEffect:Q.useEffect,qf=Q.createContext(null);function Z_(t,e){t.indexOf(e)===-1&&t.push(e)}function ev(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ps=(t,e,n)=>n>e?e:n<t?t:n;let tv=()=>{};const Zs={},eC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tC(t){return typeof t=="object"&&t!==null}const nC=t=>/^0[^.\s]+$/u.test(t);function nv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ri=t=>t,DB=(t,e)=>n=>e(t(n)),Bu=(...t)=>t.reduce(DB),bu=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class iv{constructor(){this.subscriptions=[]}add(e){return Z_(this.subscriptions,e),()=>ev(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $s=t=>t*1e3,Ii=t=>t/1e3;function iC(t,e){return e?t*(1e3/e):0}const sC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,MB=1e-7,PB=12;function VB(t,e,n,s,a){let l,c,d=0;do c=e+(n-e)/2,l=sC(c,s,a)-t,l>0?n=c:e=c;while(Math.abs(l)>MB&&++d<PB);return c}function Fu(t,e,n,s){if(t===e&&n===s)return Ri;const a=l=>VB(l,0,1,t,n);return l=>l===0||l===1?l:sC(a(l),e,s)}const rC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,aC=t=>e=>1-t(1-e),oC=Fu(.33,1.53,.69,.99),sv=aC(oC),lC=rC(sv),cC=t=>(t*=2)<1?.5*sv(t):.5*(2-Math.pow(2,-10*(t-1))),rv=t=>1-Math.sin(Math.acos(t)),uC=aC(rv),hC=rC(rv),LB=Fu(.42,0,1,1),kB=Fu(0,0,.58,1),dC=Fu(.42,0,.58,1),UB=t=>Array.isArray(t)&&typeof t[0]!="number",fC=t=>Array.isArray(t)&&typeof t[0]=="number",jB={linear:Ri,easeIn:LB,easeInOut:dC,easeOut:kB,circIn:rv,circInOut:hC,circOut:uC,backIn:sv,backInOut:lC,backOut:oC,anticipate:cC},BB=t=>typeof t=="string",_x=t=>{if(fC(t)){tv(t.length===4);const[e,n,s,a]=t;return Fu(e,n,s,a)}else if(BB(t))return jB[t];return t},xd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function FB(t,e){let n=new Set,s=new Set,a=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function m(_){c.has(_)&&(g.schedule(_),t()),_(d)}const g={schedule:(_,E=!1,T=!1)=>{const N=T&&a?n:s;return E&&c.add(_),N.has(_)||N.add(_),_},cancel:_=>{s.delete(_),c.delete(_)},process:_=>{if(d=_,a){l=!0;return}a=!0,[n,s]=[s,n],n.forEach(m),n.clear(),a=!1,l&&(l=!1,g.process(_))}};return g}const zB=40;function mC(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=xd.reduce((H,X)=>(H[X]=FB(l),H),{}),{setup:d,read:m,resolveKeyframes:g,preUpdate:_,update:E,preRender:T,render:S,postRender:N}=c,V=()=>{const H=Zs.useManualTiming?a.timestamp:performance.now();n=!1,Zs.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(H-a.timestamp,zB),1)),a.timestamp=H,a.isProcessing=!0,d.process(a),m.process(a),g.process(a),_.process(a),E.process(a),T.process(a),S.process(a),N.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(V))},C=()=>{n=!0,s=!0,a.isProcessing||t(V)};return{schedule:xd.reduce((H,X)=>{const ce=c[X];return H[X]=(he,O=!1,I=!1)=>(n||C(),ce.schedule(he,O,I)),H},{}),cancel:H=>{for(let X=0;X<xd.length;X++)c[xd[X]].cancel(H)},state:a,steps:c}}const{schedule:_t,cancel:ua,state:hn,steps:pg}=mC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ri,!0);let Bd;function HB(){Bd=void 0}const kn={now:()=>(Bd===void 0&&kn.set(hn.isProcessing||Zs.useManualTiming?hn.timestamp:performance.now()),Bd),set:t=>{Bd=t,queueMicrotask(HB)}},pC=t=>e=>typeof e=="string"&&e.startsWith(t),gC=pC("--"),GB=pC("var(--"),av=t=>GB(t)?qB.test(t.split("/*")[0].trim()):!1,qB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function vx(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const kl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Tu={...kl,transform:t=>ps(0,1,t)},wd={...kl,default:1},ru=t=>Math.round(t*1e5)/1e5,ov=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YB(t){return t==null}const KB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lv=(t,e)=>n=>!!(typeof n=="string"&&KB.test(n)&&n.startsWith(t)||e&&!YB(n)&&Object.prototype.hasOwnProperty.call(n,e)),yC=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,l,c,d]=s.match(ov);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},$B=t=>ps(0,255,t),gg={...kl,transform:t=>Math.round($B(t))},Za={test:lv("rgb","red"),parse:yC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+gg.transform(t)+", "+gg.transform(e)+", "+gg.transform(n)+", "+ru(Tu.transform(s))+")"};function XB(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const dy={test:lv("#"),parse:XB,transform:Za.transform},zu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fr=zu("deg"),fs=zu("%"),ve=zu("px"),QB=zu("vh"),WB=zu("vw"),Ex={...fs,parse:t=>fs.parse(t)/100,transform:t=>fs.transform(t*100)},pl={test:lv("hsl","hue"),parse:yC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+fs.transform(ru(e))+", "+fs.transform(ru(n))+", "+ru(Tu.transform(s))+")"},qt={test:t=>Za.test(t)||dy.test(t)||pl.test(t),parse:t=>Za.test(t)?Za.parse(t):pl.test(t)?pl.parse(t):dy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Za.transform(t):pl.transform(t),getAnimatableNone:t=>{const e=qt.parse(t);return e.alpha=0,qt.transform(e)}},JB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ZB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ov))==null?void 0:e.length)||0)+(((n=t.match(JB))==null?void 0:n.length)||0)>0}const _C="number",vC="color",e5="var",t5="var(",bx="${}",n5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Au(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let l=0;const d=e.replace(n5,m=>(qt.test(m)?(s.color.push(l),a.push(vC),n.push(qt.parse(m))):m.startsWith(t5)?(s.var.push(l),a.push(e5),n.push(m)):(s.number.push(l),a.push(_C),n.push(parseFloat(m))),++l,bx)).split(bx);return{values:n,split:d,indexes:s,types:a}}function EC(t){return Au(t).values}function bC(t){const{split:e,types:n}=Au(t),s=e.length;return a=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],a[c]!==void 0){const d=n[c];d===_C?l+=ru(a[c]):d===vC?l+=qt.transform(a[c]):l+=a[c]}return l}}const i5=t=>typeof t=="number"?0:qt.test(t)?qt.getAnimatableNone(t):t;function s5(t){const e=EC(t);return bC(t)(e.map(i5))}const ha={test:ZB,parse:EC,createTransformer:bC,getAnimatableNone:s5};function yg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function r5({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,m=2*n-d;a=yg(m,d,t+1/3),l=yg(m,d,t),c=yg(m,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function ff(t,e){return n=>n>0?e:t}const bt=(t,e,n)=>t+(e-t)*n,_g=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},a5=[dy,Za,pl],o5=t=>a5.find(e=>e.test(t));function Tx(t){const e=o5(t);if(!e)return!1;let n=e.parse(t);return e===pl&&(n=r5(n)),n}const Ax=(t,e)=>{const n=Tx(t),s=Tx(e);if(!n||!s)return ff(t,e);const a={...n};return l=>(a.red=_g(n.red,s.red,l),a.green=_g(n.green,s.green,l),a.blue=_g(n.blue,s.blue,l),a.alpha=bt(n.alpha,s.alpha,l),Za.transform(a))},fy=new Set(["none","hidden"]);function l5(t,e){return fy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function c5(t,e){return n=>bt(t,e,n)}function cv(t){return typeof t=="number"?c5:typeof t=="string"?av(t)?ff:qt.test(t)?Ax:d5:Array.isArray(t)?TC:typeof t=="object"?qt.test(t)?Ax:u5:ff}function TC(t,e){const n=[...t],s=n.length,a=t.map((l,c)=>cv(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)n[c]=a[c](l);return n}}function u5(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=cv(t[a])(t[a],e[a]));return a=>{for(const l in s)n[l]=s[l](a);return n}}function h5(t,e){const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][s[l]],d=t.values[c]??0;n[a]=d,s[l]++}return n}const d5=(t,e)=>{const n=ha.createTransformer(e),s=Au(t),a=Au(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?fy.has(t)&&!a.values.length||fy.has(e)&&!s.values.length?l5(t,e):Bu(TC(h5(s,a),a.values),n):ff(t,e)};function AC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?bt(t,e,n):cv(t)(t,e)}const f5=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>_t.update(e,n),stop:()=>ua(e),now:()=>hn.isProcessing?hn.timestamp:kn.now()}},SC=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)s+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},mf=2e4;function uv(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<mf;)e+=n,s=t.next(e);return e>=mf?1/0:e}function m5(t,e=100,n){const s=n({...t,keyframes:[0,e]}),a=Math.min(uv(s),mf);return{type:"keyframes",ease:l=>s.next(a*l).value/e,duration:Ii(a)}}const p5=5;function xC(t,e,n){const s=Math.max(e-p5,0);return iC(n-t(s),e-s)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vg=.001;function g5({duration:t=Rt.duration,bounce:e=Rt.bounce,velocity:n=Rt.velocity,mass:s=Rt.mass}){let a,l,c=1-e;c=ps(Rt.minDamping,Rt.maxDamping,c),t=ps(Rt.minDuration,Rt.maxDuration,Ii(t)),c<1?(a=g=>{const _=g*c,E=_*t,T=_-n,S=my(g,c),N=Math.exp(-E);return vg-T/S*N},l=g=>{const E=g*c*t,T=E*n+n,S=Math.pow(c,2)*Math.pow(g,2)*t,N=Math.exp(-E),V=my(Math.pow(g,2),c);return(-a(g)+vg>0?-1:1)*((T-S)*N)/V}):(a=g=>{const _=Math.exp(-g*t),E=(g-n)*t+1;return-vg+_*E},l=g=>{const _=Math.exp(-g*t),E=(n-g)*(t*t);return _*E});const d=5/t,m=_5(a,l,d);if(t=$s(t),isNaN(m))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:t};{const g=Math.pow(m,2)*s;return{stiffness:g,damping:c*2*Math.sqrt(s*g),duration:t}}}const y5=12;function _5(t,e,n){let s=n;for(let a=1;a<y5;a++)s=s-t(s)/e(s);return s}function my(t,e){return t*Math.sqrt(1-e*e)}const v5=["duration","bounce"],E5=["stiffness","damping","mass"];function Sx(t,e){return e.some(n=>t[n]!==void 0)}function b5(t){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...t};if(!Sx(t,E5)&&Sx(t,v5))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,l=2*ps(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Rt.mass,stiffness:a,damping:l}}else{const n=g5(t);e={...e,...n,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function pf(t=Rt.visualDuration,e=Rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:m,damping:g,mass:_,duration:E,velocity:T,isResolvedFromDuration:S}=b5({...n,velocity:-Ii(n.velocity||0)}),N=T||0,V=g/(2*Math.sqrt(m*_)),C=c-l,G=Ii(Math.sqrt(m/_)),Z=Math.abs(C)<5;s||(s=Z?Rt.restSpeed.granular:Rt.restSpeed.default),a||(a=Z?Rt.restDelta.granular:Rt.restDelta.default);let H;if(V<1){const ce=my(G,V);H=he=>{const O=Math.exp(-V*G*he);return c-O*((N+V*G*C)/ce*Math.sin(ce*he)+C*Math.cos(ce*he))}}else if(V===1)H=ce=>c-Math.exp(-G*ce)*(C+(N+G*C)*ce);else{const ce=G*Math.sqrt(V*V-1);H=he=>{const O=Math.exp(-V*G*he),I=Math.min(ce*he,300);return c-O*((N+V*G*C)*Math.sinh(I)+ce*C*Math.cosh(I))/ce}}const X={calculatedDuration:S&&E||null,next:ce=>{const he=H(ce);if(S)d.done=ce>=E;else{let O=ce===0?N:0;V<1&&(O=ce===0?$s(N):xC(H,ce,he));const I=Math.abs(O)<=s,R=Math.abs(c-he)<=a;d.done=I&&R}return d.value=d.done?c:he,d},toString:()=>{const ce=Math.min(uv(X),mf),he=SC(O=>X.next(ce*O).value,ce,30);return ce+"ms "+he},toTransition:()=>{}};return X}pf.applyToOptions=t=>{const e=m5(t,100,pf);return t.ease=e.ease,t.duration=$s(e.duration),t.type="keyframes",t};function py({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:m,restDelta:g=.5,restSpeed:_}){const E=t[0],T={done:!1,value:E},S=I=>d!==void 0&&I<d||m!==void 0&&I>m,N=I=>d===void 0?m:m===void 0||Math.abs(d-I)<Math.abs(m-I)?d:m;let V=n*e;const C=E+V,G=c===void 0?C:c(C);G!==C&&(V=G-E);const Z=I=>-V*Math.exp(-I/s),H=I=>G+Z(I),X=I=>{const R=Z(I),M=H(I);T.done=Math.abs(R)<=g,T.value=T.done?G:M};let ce,he;const O=I=>{S(T.value)&&(ce=I,he=pf({keyframes:[T.value,N(T.value)],velocity:xC(H,I,T.value),damping:a,stiffness:l,restDelta:g,restSpeed:_}))};return O(0),{calculatedDuration:null,next:I=>{let R=!1;return!he&&ce===void 0&&(R=!0,X(I),O(I)),ce!==void 0&&I>=ce?he.next(I-ce):(!R&&X(I),T)}}}function T5(t,e,n){const s=[],a=n||Zs.mix||AC,l=t.length-1;for(let c=0;c<l;c++){let d=a(t[c],t[c+1]);if(e){const m=Array.isArray(e)?e[c]||Ri:e;d=Bu(m,d)}s.push(d)}return s}function A5(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const l=t.length;if(tv(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=T5(e,s,a),m=d.length,g=_=>{if(c&&_<t[0])return e[0];let E=0;if(m>1)for(;E<t.length-2&&!(_<t[E+1]);E++);const T=bu(t[E],t[E+1],_);return d[E](T)};return n?_=>g(ps(t[0],t[l-1],_)):g}function S5(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=bu(0,e,s);t.push(bt(n,1,a))}}function x5(t){const e=[0];return S5(e,t.length-1),e}function w5(t,e){return t.map(n=>n*e)}function I5(t,e){return t.map(()=>e||dC).splice(0,t.length-1)}function au({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=UB(s)?s.map(_x):_x(s),l={done:!1,value:e[0]},c=w5(n&&n.length===e.length?n:x5(e),t),d=A5(c,e,{ease:Array.isArray(a)?a:I5(e,a)});return{calculatedDuration:t,next:m=>(l.value=d(m),l.done=m>=t,l)}}const R5=t=>t!==null;function hv(t,{repeat:e,repeatType:n="loop"},s,a=1){const l=t.filter(R5),d=a<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const N5={decay:py,inertia:py,tween:au,keyframes:au,spring:pf};function wC(t){typeof t.type=="string"&&(t.type=N5[t.type])}class dv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const C5=t=>t/100;class fv extends dv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,a;const{motionValue:n}=this.options;n&&n.updatedAt!==kn.now()&&this.tick(kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(s=this.options).onStop)==null||a.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;wC(e);const{type:n=au,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:d}=e;const m=n||au;m!==au&&typeof d[0]!="number"&&(this.mixKeyframes=Bu(C5,AC(d[0],d[1])),d=[0,100]);const g=m({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...d].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=uv(g));const{calculatedDuration:_}=g;this.calculatedDuration=_,this.resolvedDuration=_+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:m}=this;if(this.startTime===null)return s.next(0);const{delay:g=0,keyframes:_,repeat:E,repeatType:T,repeatDelay:S,type:N,onUpdate:V,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const G=this.currentTime-g*(this.playbackSpeed>=0?1:-1),Z=this.playbackSpeed>=0?G<0:G>a;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let H=this.currentTime,X=s;if(E){const I=Math.min(this.currentTime,a)/d;let R=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&R--,R=Math.min(R,E+1),!!(R%2)&&(T==="reverse"?(M=1-M,S&&(M-=S/d)):T==="mirror"&&(X=c)),H=ps(0,1,M)*d}const ce=Z?{done:!1,value:_[0]}:X.next(H);l&&(ce.value=l(ce.value));let{done:he}=ce;!Z&&m!==null&&(he=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&he);return O&&N!==py&&(ce.value=hv(_,this.options,C,this.speed)),V&&V(ce.value),O&&this.finish(),ce}then(e,n){return this.finished.then(e,n)}get duration(){return Ii(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ii(e)}get time(){return Ii(this.currentTime)}set time(e){var n;e=$s(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(kn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ii(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:e=f5,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(a=this.options).onPlay)==null||l.call(a);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function O5(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const eo=t=>t*180/Math.PI,gy=t=>{const e=eo(Math.atan2(t[1],t[0]));return yy(e)},D5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:gy,rotateZ:gy,skewX:t=>eo(Math.atan(t[1])),skewY:t=>eo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yy=t=>(t=t%360,t<0&&(t+=360),t),xx=gy,wx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ix=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),M5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wx,scaleY:Ix,scale:t=>(wx(t)+Ix(t))/2,rotateX:t=>yy(eo(Math.atan2(t[6],t[5]))),rotateY:t=>yy(eo(Math.atan2(-t[2],t[0]))),rotateZ:xx,rotate:xx,skewX:t=>eo(Math.atan(t[4])),skewY:t=>eo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _y(t){return t.includes("scale")?1:0}function vy(t,e){if(!t||t==="none")return _y(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=M5,a=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=D5,a=d}if(!a)return _y(e);const l=s[e],c=a[1].split(",").map(V5);return typeof l=="function"?l(c):c[l]}const P5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return vy(n,e)};function V5(t){return parseFloat(t.trim())}const Ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(Ul),Rx=t=>t===kl||t===ve,L5=new Set(["x","y","z"]),k5=Ul.filter(t=>!L5.has(t));function U5(t){const e=[];return k5.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Xr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>vy(e,"x"),y:(t,{transform:e})=>vy(e,"y")};Xr.translateX=Xr.x;Xr.translateY=Xr.y;const so=new Set;let Ey=!1,by=!1,Ty=!1;function IC(){if(by){const t=Array.from(so).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=U5(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([l,c])=>{var d;(d=s.getValue(l))==null||d.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}by=!1,Ey=!1,so.forEach(t=>t.complete(Ty)),so.clear()}function RC(){so.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(by=!0)})}function j5(){Ty=!0,RC(),IC(),Ty=!1}class mv{constructor(e,n,s,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),Ey||(Ey=!0,_t.read(RC),_t.resolveKeyframes(IC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;if(e[0]===null){const l=a==null?void 0:a.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const d=s.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}O5(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const B5=t=>t.startsWith("--");function F5(t,e,n){B5(e)?t.style.setProperty(e,n):t.style[e]=n}const z5=nv(()=>window.ScrollTimeline!==void 0),H5={};function G5(t,e){const n=nv(t);return()=>H5[e]??n()}const NC=G5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$c=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Nx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$c([0,.65,.55,1]),circOut:$c([.55,0,1,.45]),backIn:$c([.31,.01,.66,-.59]),backOut:$c([.33,1.53,.69,.99])};function CC(t,e){if(t)return typeof t=="function"?NC()?SC(t,e):"ease-out":fC(t)?$c(t):Array.isArray(t)?t.map(n=>CC(n,e)||Nx.easeOut):Nx[t]}function q5(t,e,n,{delay:s=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:m}={},g=void 0){const _={[e]:n};m&&(_.offset=m);const E=CC(d,a);Array.isArray(E)&&(_.easing=E);const T={delay:s,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),t.animate(_,T)}function OC(t){return typeof t=="function"&&"applyToOptions"in t}function Y5({type:t,...e}){return OC(t)&&NC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class K5 extends dv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:m}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,tv(typeof e.type!="string");const g=Y5(e);this.animation=q5(n,s,a,g,l),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const _=hv(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(_):F5(n,s,_),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Ii(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ii(e)}get time(){return Ii(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=$s(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&z5()?(this.animation.timeline=e,Ri):n(this)}}const DC={anticipate:cC,backInOut:lC,circInOut:hC};function $5(t){return t in DC}function X5(t){typeof t.ease=="string"&&$5(t.ease)&&(t.ease=DC[t.ease])}const Eg=10;class Q5 extends K5{constructor(e){X5(e),wC(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:a,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new fv({...c,autoplay:!1}),m=Math.max(Eg,kn.now()-this.startTime),g=ps(0,Eg,m-Eg);n.setWithVelocity(d.sample(Math.max(0,m-g)).value,d.sample(m).value,g),d.stop()}}const Cx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ha.test(t)||t==="0")&&!t.startsWith("url("));function W5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function J5(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=Cx(a,e),d=Cx(l,e);return!c||!d?!1:W5(t)||(n==="spring"||OC(n))&&s}function Ay(t){t.duration=0,t.type="keyframes"}const Z5=new Set(["opacity","clipPath","filter","transform"]),e3=nv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function t3(t){var _;const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:l,type:c}=t;if(!(((_=e==null?void 0:e.owner)==null?void 0:_.current)instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return e3()&&n&&Z5.has(n)&&(n!=="transform"||!g)&&!m&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}const n3=40;class i3 extends dv{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:m,motionValue:g,element:_,...E}){var N;super(),this.stop=()=>{var V,C;this._animation&&(this._animation.stop(),(V=this.stopTimeline)==null||V.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=kn.now();const T={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:l,repeatType:c,name:m,motionValue:g,element:_,...E},S=(_==null?void 0:_.KeyframeResolver)||mv;this.keyframeResolver=new S(d,(V,C,G)=>this.onKeyframesResolved(V,C,T,!G),m,g,_),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,s,a){var C,G;this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:m,isHandoff:g,onUpdate:_}=s;this.resolvedAt=kn.now(),J5(e,l,c,d)||((Zs.instantAnimations||!m)&&(_==null||_(hv(e,s,n))),e[0]=e[e.length-1],Ay(s),s.repeat=0);const T={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>n3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},S=!g&&t3(T),N=(G=(C=T.motionValue)==null?void 0:C.owner)==null?void 0:G.current,V=S?new Q5({...T,element:N}):new fv(T);V.finished.then(()=>{this.notifyFinished()}).catch(Ri),this.pendingTimeline&&(this.stopTimeline=V.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=V}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),j5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function MC(t,e,n,s=0,a=1){const l=Array.from(t).sort((g,_)=>g.sortNodePosition(_)).indexOf(e),c=t.size,d=(c-1)*s;return typeof n=="function"?n(l,c):a===1?l*s:d-l*s}const s3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r3(t){const e=s3.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function PC(t,e,n=1){const[s,a]=r3(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return eC(c)?parseFloat(c):c}return av(a)?PC(a,e,n+1):a}const a3={type:"spring",stiffness:500,damping:25,restSpeed:10},o3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l3={type:"keyframes",duration:.8},c3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u3=(t,{keyframes:e})=>e.length>2?l3:jl.has(t)?t.startsWith("scale")?o3(e[1]):a3:c3,h3=t=>t!==null;function d3(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(h3),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[l]}function pv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function f3({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:d,from:m,elapsed:g,..._}){return!!Object.keys(_).length}const gv=(t,e,n,s={},a,l)=>c=>{const d=pv(s,t)||{},m=d.delay||s.delay||0;let{elapsed:g=0}=s;g=g-$s(m);const _={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-g,onUpdate:T=>{e.set(T),d.onUpdate&&d.onUpdate(T)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:a};f3(d)||Object.assign(_,u3(t,_)),_.duration&&(_.duration=$s(_.duration)),_.repeatDelay&&(_.repeatDelay=$s(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let E=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(Ay(_),_.delay===0&&(E=!0)),(Zs.instantAnimations||Zs.skipAnimations)&&(E=!0,Ay(_),_.delay=0),_.allowFlatten=!d.type&&!d.ease,E&&!l&&e.get()!==void 0){const T=d3(_.keyframes,d);if(T!==void 0){_t.update(()=>{_.onUpdate(T),_.onComplete()});return}}return d.isSync?new fv(_):new i3(_)};function Ox(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function yv(t,e,n,s){if(typeof e=="function"){const[a,l]=Ox(s);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=Ox(s);e=e(n!==void 0?n:t.custom,a,l)}return e}function Sl(t,e,n){const s=t.getProps();return yv(s,e,n!==void 0?n:s.custom,t)}const VC=new Set(["width","height","top","left","right","bottom",...Ul]),Dx=30,m3=t=>!isNaN(parseFloat(t));class p3{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const a=kn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=kn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=m3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iv);const s=this.events[e].add(n);return e==="change"?()=>{s(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Dx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Dx);return iC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cl(t,e){return new p3(t,e)}const Sy=t=>Array.isArray(t);function g3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Cl(n))}function y3(t){return Sy(t)?t[t.length-1]||0:t}function _3(t,e){const n=Sl(t,e);let{transitionEnd:s={},transition:a={},...l}=n||{};l={...l,...s};for(const c in l){const d=y3(l[c]);g3(t,c,d)}}const xn=t=>!!(t&&t.getVelocity);function v3(t){return!!(xn(t)&&t.add)}function xy(t,e){const n=t.getValue("willChange");if(v3(n))return n.add(e);if(!n&&Zs.WillChange){const s=new Zs.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function _v(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const E3="framerAppearId",LC="data-"+_v(E3);function kC(t){return t.props[LC]}function b3({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function UC(t,e,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;s&&(l=s);const m=[],g=a&&t.animationState&&t.animationState.getState()[a];for(const _ in d){const E=t.getValue(_,t.latestValues[_]??null),T=d[_];if(T===void 0||g&&b3(g,_))continue;const S={delay:n,...pv(l||{},_)},N=E.get();if(N!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===N&&!S.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const G=kC(t);if(G){const Z=window.MotionHandoffAnimation(G,_,_t);Z!==null&&(S.startTime=Z,V=!0)}}xy(t,_),E.start(gv(_,E,T,t.shouldReduceMotion&&VC.has(_)?{type:!1}:S,t,V));const C=E.animation;C&&m.push(C)}return c&&Promise.all(m).then(()=>{_t.update(()=>{c&&_3(t,c)})}),m}function wy(t,e,n={}){var m;const s=Sl(t,e,n.type==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const l=s?()=>Promise.all(UC(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:_=0,staggerChildren:E,staggerDirection:T}=a;return T3(t,e,g,_,E,T,n)}:()=>Promise.resolve(),{when:d}=a;if(d){const[g,_]=d==="beforeChildren"?[l,c]:[c,l];return g().then(()=>_())}else return Promise.all([l(),c(n.delay)])}function T3(t,e,n=0,s=0,a=0,l=1,c){const d=[];for(const m of t.variantChildren)m.notify("AnimationStart",e),d.push(wy(m,e,{...c,delay:n+(typeof s=="function"?0:s)+MC(t.variantChildren,m,s,a,l)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(d)}function A3(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>wy(t,l,n));s=Promise.all(a)}else if(typeof e=="string")s=wy(t,e,n);else{const a=typeof e=="function"?Sl(t,e,n.custom):e;s=Promise.all(UC(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const S3={test:t=>t==="auto",parse:t=>t},jC=t=>e=>e.test(t),BC=[kl,ve,fs,Fr,WB,QB,S3],Mx=t=>BC.find(jC(t));function x3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nC(t):!0}const w3=new Set(["brightness","contrast","saturate","opacity"]);function I3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(ov)||[];if(!s)return t;const a=n.replace(s,"");let l=w3.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+a+")"}const R3=/\b([a-z-]*)\(.*?\)/gu,Iy={...ha,getAnimatableNone:t=>{const e=t.match(R3);return e?e.map(I3).join(" "):t}},Px={...kl,transform:Math.round},N3={rotate:Fr,rotateX:Fr,rotateY:Fr,rotateZ:Fr,scale:wd,scaleX:wd,scaleY:wd,scaleZ:wd,skew:Fr,skewX:Fr,skewY:Fr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:Tu,originX:Ex,originY:Ex,originZ:ve},vv={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,inset:ve,insetBlock:ve,insetBlockStart:ve,insetBlockEnd:ve,insetInline:ve,insetInlineStart:ve,insetInlineEnd:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,paddingBlock:ve,paddingBlockStart:ve,paddingBlockEnd:ve,paddingInline:ve,paddingInlineStart:ve,paddingInlineEnd:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,marginBlock:ve,marginBlockStart:ve,marginBlockEnd:ve,marginInline:ve,marginInlineStart:ve,marginInlineEnd:ve,fontSize:ve,backgroundPositionX:ve,backgroundPositionY:ve,...N3,zIndex:Px,fillOpacity:Tu,strokeOpacity:Tu,numOctaves:Px},C3={...vv,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:Iy,WebkitFilter:Iy},FC=t=>C3[t];function zC(t,e){let n=FC(t);return n!==Iy&&(n=ha),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const O3=new Set(["auto","none","0"]);function D3(t,e,n){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!O3.has(l)&&Au(l).values.length&&(a=t[s]),s++}if(a&&n)for(const l of e)t[l]=zC(n,a)}class M3 extends mv{constructor(e,n,s,a,l){super(e,n,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let _=0;_<e.length;_++){let E=e[_];if(typeof E=="string"&&(E=E.trim(),av(E))){const T=PC(E,n.current);T!==void 0&&(e[_]=T),_===e.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!VC.has(s)||e.length!==2)return;const[a,l]=e,c=Mx(a),d=Mx(l),m=vx(a),g=vx(l);if(m!==g&&Xr[s]){this.needsMeasurement=!0;return}if(c!==d)if(Rx(c)&&Rx(d))for(let _=0;_<e.length;_++){const E=e[_];typeof E=="string"&&(e[_]=parseFloat(E))}else Xr[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||x3(e[a]))&&s.push(a);s.length&&D3(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xr[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Xr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([m,g])=>{e.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function P3(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=(n==null?void 0:n[t])??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t).filter(s=>s!=null)}const HC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Ry(t){return tC(t)&&"offsetHeight"in t}const{schedule:Ev}=mC(queueMicrotask,!1),Ui={x:!1,y:!1};function GC(){return Ui.x||Ui.y}function V3(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function qC(t,e){const n=P3(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function Vx(t){return!(t.pointerType==="touch"||GC())}function L3(t,e,n={}){const[s,a,l]=qC(t,n),c=d=>{if(!Vx(d))return;const{target:m}=d,g=e(m,d);if(typeof g!="function"||!m)return;const _=E=>{Vx(E)&&(g(E),m.removeEventListener("pointerleave",_))};m.addEventListener("pointerleave",_,a)};return s.forEach(d=>{d.addEventListener("pointerenter",c,a)}),l}const YC=(t,e)=>e?t===e?!0:YC(t,e.parentElement):!1,bv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,k3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function KC(t){return k3.has(t.tagName)||t.isContentEditable===!0}const Fd=new WeakSet;function Lx(t){return e=>{e.key==="Enter"&&t(e)}}function bg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const U3=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Lx(()=>{if(Fd.has(n))return;bg(n,"down");const a=Lx(()=>{bg(n,"up")}),l=()=>bg(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function kx(t){return bv(t)&&!GC()}function j3(t,e,n={}){const[s,a,l]=qC(t,n),c=d=>{const m=d.currentTarget;if(!kx(d))return;Fd.add(m);const g=e(m,d),_=(S,N)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",T),Fd.has(m)&&Fd.delete(m),kx(S)&&typeof g=="function"&&g(S,{success:N})},E=S=>{_(S,m===window||m===document||n.useGlobalTarget||YC(m,S.target))},T=S=>{_(S,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",T,a)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,a),Ry(d)&&(d.addEventListener("focus",g=>U3(g,a)),!KC(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function $C(t){return tC(t)&&"ownerSVGElement"in t}function B3(t){return $C(t)&&t.tagName==="svg"}const F3=[...BC,qt,ha],z3=t=>F3.find(jC(t)),Ux=()=>({translate:0,scale:1,origin:0,originPoint:0}),gl=()=>({x:Ux(),y:Ux()}),jx=()=>({min:0,max:0}),Qt=()=>({x:jx(),y:jx()}),Ny={current:null},XC={current:!1},H3=typeof window<"u";function G3(){if(XC.current=!0,!!H3)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ny.current=t.matches;t.addEventListener("change",e),e()}else Ny.current=!1}const q3=new WeakMap;function Yf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Su(t){return typeof t=="string"||Array.isArray(t)}const Tv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Av=["initial",...Tv];function Kf(t){return Yf(t.animate)||Av.some(e=>Su(t[e]))}function QC(t){return!!(Kf(t)||t.variants)}function Y3(t,e,n){for(const s in e){const a=e[s],l=n[s];if(xn(a))t.addValue(s,a);else if(xn(l))t.addValue(s,Cl(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(s);t.addValue(s,Cl(c!==void 0?c:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Bx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let gf={};function WC(t){gf=t}function K3(){return gf}class $3{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=kn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,_t.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=c;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Kf(n),this.isVariantNode=QC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in E){const S=E[T];m[T]!==void 0&&xn(S)&&S.set(m[T])}}mount(e){var n;this.current=e,q3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(XC.current||G3(),this.shouldReduceMotion=Ny.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ua(this.notifyUpdate),ua(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=jl.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&_t.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gf){const n=gf[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Bx.length;s++){const a=Bx[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=Y3(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Cl(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(eC(s)||nC(s))?s=parseFloat(s):!z3(s)&&ha.test(n)&&(s=zC(e,n)),this.setBaseTarget(e,xn(s)?s.get():s)),xn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const c=yv(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);c&&(s=c[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!xn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Ev.render(this.render)}}class JC extends $3{constructor(){super(...arguments),this.KeyframeResolver=M3}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ya{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ZC({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function X3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Q3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Tg(t){return t===void 0||t===1}function Cy({scale:t,scaleX:e,scaleY:n}){return!Tg(t)||!Tg(e)||!Tg(n)}function Wa(t){return Cy(t)||e1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function e1(t){return Fx(t.x)||Fx(t.y)}function Fx(t){return t&&t!=="0%"}function yf(t,e,n){const s=t-n,a=e*s;return n+a}function zx(t,e,n,s,a){return a!==void 0&&(t=yf(t,a,s)),yf(t,n,s)+e}function Oy(t,e=0,n=1,s,a){t.min=zx(t.min,e,n,s,a),t.max=zx(t.max,e,n,s,a)}function t1(t,{x:e,y:n}){Oy(t.x,e.translate,e.scale,e.originPoint),Oy(t.y,n.translate,n.scale,n.originPoint)}const Hx=.999999999999,Gx=1.0000000000001;function W3(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let d=0;d<a;d++){l=n[d],c=l.projectionDelta;const{visualElement:m}=l.options;m&&m.props.style&&m.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&_l(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,t1(t,c)),s&&Wa(l.latestValues)&&_l(t,l.latestValues))}e.x<Gx&&e.x>Hx&&(e.x=1),e.y<Gx&&e.y>Hx&&(e.y=1)}function yl(t,e){t.min=t.min+e,t.max=t.max+e}function qx(t,e,n,s,a=.5){const l=bt(t.min,t.max,a);Oy(t,e,n,l,s)}function _l(t,e){qx(t.x,e.x,e.scaleX,e.scale,e.originX),qx(t.y,e.y,e.scaleY,e.scale,e.originY)}function n1(t,e){return ZC(Q3(t.getBoundingClientRect(),e))}function J3(t,e,n){const s=n1(t,n),{scroll:a}=e;return a&&(yl(s.x,a.offset.x),yl(s.y,a.offset.y)),s}const Z3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},e6=Ul.length;function t6(t,e,n){let s="",a=!0;for(let l=0;l<e6;l++){const c=Ul[l],d=t[c];if(d===void 0)continue;let m=!0;if(typeof d=="number")m=d===(c.startsWith("scale")?1:0);else{const g=parseFloat(d);m=c.startsWith("scale")?g===1:g===0}if(!m||n){const g=HC(d,vv[c]);if(!m){a=!1;const _=Z3[c]||c;s+=`${_}(${g}) `}n&&(e[c]=g)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function Sv(t,e,n){const{style:s,vars:a,transformOrigin:l}=t;let c=!1,d=!1;for(const m in e){const g=e[m];if(jl.has(m)){c=!0;continue}else if(gC(m)){a[m]=g;continue}else{const _=HC(g,vv[m]);m.startsWith("origin")?(d=!0,l[m]=_):s[m]=_}}if(e.transform||(c||n?s.transform=t6(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:m="50%",originY:g="50%",originZ:_=0}=l;s.transformOrigin=`${m} ${g} ${_}`}}function i1(t,{style:e,vars:n},s,a){const l=t.style;let c;for(c in e)l[c]=e[c];a==null||a.applyProjectionStyles(l,s);for(c in n)l.setProperty(c,n[c])}function Yx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const jc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=Yx(t,e.target.x),s=Yx(t,e.target.y);return`${n}% ${s}%`}},n6={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=ha.parse(t);if(a.length>5)return s;const l=ha.createTransformer(t),c=typeof a[0]!="number"?1:0,d=n.x.scale*e.x,m=n.y.scale*e.y;a[0+c]/=d,a[1+c]/=m;const g=bt(d,m,.5);return typeof a[2+c]=="number"&&(a[2+c]/=g),typeof a[3+c]=="number"&&(a[3+c]/=g),l(a)}},Dy={borderRadius:{...jc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jc,borderTopRightRadius:jc,borderBottomLeftRadius:jc,borderBottomRightRadius:jc,boxShadow:n6};function s1(t,{layout:e,layoutId:n}){return jl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Dy[t]||t==="opacity")}function xv(t,e,n){var c;const s=t.style,a=e==null?void 0:e.style,l={};if(!s)return l;for(const d in s)(xn(s[d])||a&&xn(a[d])||s1(d,t)||((c=n==null?void 0:n.getValue(d))==null?void 0:c.liveStyle)!==void 0)&&(l[d]=s[d]);return l}function i6(t){return window.getComputedStyle(t)}class s6 extends JC{constructor(){super(...arguments),this.type="html",this.renderInstance=i1}readValueFromInstance(e,n){var s;if(jl.has(n))return(s=this.projection)!=null&&s.isProjecting?_y(n):P5(e,n);{const a=i6(e),l=(gC(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return n1(e,n)}build(e,n,s){Sv(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return xv(e,n,s)}}const r6={offset:"stroke-dashoffset",array:"stroke-dasharray"},a6={offset:"strokeDashoffset",array:"strokeDasharray"};function o6(t,e,n=1,s=0,a=!0){t.pathLength=1;const l=a?r6:a6;t[l.offset]=`${-s}`,t[l.array]=`${e} ${n}`}const l6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function r1(t,{attrX:e,attrY:n,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...d},m,g,_){if(Sv(t,d,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:T}=t;E.transform&&(T.transform=E.transform,delete E.transform),(T.transform||E.transformOrigin)&&(T.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),T.transform&&(T.transformBox=(_==null?void 0:_.transformBox)??"fill-box",delete E.transformBox);for(const S of l6)E[S]!==void 0&&(T[S]=E[S],delete E[S]);e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),s!==void 0&&(E.scale=s),a!==void 0&&o6(E,a,l,c,!1)}const a1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),o1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function c6(t,e,n,s){i1(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(a1.has(a)?a:_v(a),e.attrs[a])}function l1(t,e,n){const s=xv(t,e,n);for(const a in t)if(xn(t[a])||xn(e[a])){const l=Ul.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}class u6 extends JC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jl.has(n)){const s=FC(n);return s&&s.default||0}return n=a1.has(n)?n:_v(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return l1(e,n,s)}build(e,n,s){r1(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,a){c6(e,n,s,a)}mount(e){this.isSVGTag=o1(e.tagName),super.mount(e)}}const h6=Av.length;function c1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?c1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<h6;n++){const s=Av[n],a=t.props[s];(Su(a)||a===!1)&&(e[s]=a)}return e}function u1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const d6=[...Tv].reverse(),f6=Tv.length;function m6(t){return e=>Promise.all(e.map(({animation:n,options:s})=>A3(t,n,s)))}function p6(t){let e=m6(t),n=Kx(),s=!0;const a=m=>(g,_)=>{var T;const E=Sl(t,_,m==="exit"?(T=t.presenceContext)==null?void 0:T.custom:void 0);if(E){const{transition:S,transitionEnd:N,...V}=E;g={...g,...V,...N}}return g};function l(m){e=m(t)}function c(m){const{props:g}=t,_=c1(t.parent)||{},E=[],T=new Set;let S={},N=1/0;for(let C=0;C<f6;C++){const G=d6[C],Z=n[G],H=g[G]!==void 0?g[G]:_[G],X=Su(H),ce=G===m?Z.isActive:null;ce===!1&&(N=C);let he=H===_[G]&&H!==g[G]&&X;if(he&&s&&t.manuallyAnimateOnMount&&(he=!1),Z.protectedKeys={...S},!Z.isActive&&ce===null||!H&&!Z.prevProp||Yf(H)||typeof H=="boolean")continue;const O=g6(Z.prevProp,H);let I=O||G===m&&Z.isActive&&!he&&X||C>N&&X,R=!1;const M=Array.isArray(H)?H:[H];let U=M.reduce(a(G),{});ce===!1&&(U={});const{prevResolvedValues:B={}}=Z,D={...B,...U},Ye=L=>{I=!0,T.has(L)&&(R=!0,T.delete(L)),Z.needsAnimating[L]=!0;const te=t.getValue(L);te&&(te.liveStyle=!1)};for(const L in D){const te=U[L],ye=B[L];if(S.hasOwnProperty(L))continue;let Te=!1;Sy(te)&&Sy(ye)?Te=!u1(te,ye):Te=te!==ye,Te?te!=null?Ye(L):T.add(L):te!==void 0&&T.has(L)?Ye(L):Z.protectedKeys[L]=!0}Z.prevProp=H,Z.prevResolvedValues=U,Z.isActive&&(S={...S,...U}),s&&t.blockInitialAnimation&&(I=!1);const Je=he&&O;I&&(!Je||R)&&E.push(...M.map(L=>{const te={type:G};if(typeof L=="string"&&s&&!Je&&t.manuallyAnimateOnMount&&t.parent){const{parent:ye}=t,Te=Sl(ye,L);if(ye.enteringChildren&&Te){const{delayChildren:k}=Te.transition||{};te.delay=MC(ye.enteringChildren,t,k)}}return{animation:L,options:te}}))}if(T.size){const C={};if(typeof g.initial!="boolean"){const G=Sl(t,Array.isArray(g.initial)?g.initial[0]:g.initial);G&&G.transition&&(C.transition=G.transition)}T.forEach(G=>{const Z=t.getBaseTarget(G),H=t.getValue(G);H&&(H.liveStyle=!0),C[G]=Z??null}),E.push({animation:C})}let V=!!E.length;return s&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(V=!1),s=!1,V?e(E):Promise.resolve()}function d(m,g){var E;if(n[m].isActive===g)return Promise.resolve();(E=t.variantChildren)==null||E.forEach(T=>{var S;return(S=T.animationState)==null?void 0:S.setActive(m,g)}),n[m].isActive=g;const _=c(m);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=Kx()}}}function g6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!u1(e,t):!1}function $a(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Kx(){return{animate:$a(!0),whileInView:$a(),whileHover:$a(),whileTap:$a(),whileDrag:$a(),whileFocus:$a(),exit:$a()}}function $x(t,e){t.min=e.min,t.max=e.max}function ki(t,e){$x(t.x,e.x),$x(t.y,e.y)}function Xx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const h1=1e-4,y6=1-h1,_6=1+h1,d1=.01,v6=0-d1,E6=0+d1;function Un(t){return t.max-t.min}function b6(t,e,n){return Math.abs(t-e)<=n}function Qx(t,e,n,s=.5){t.origin=s,t.originPoint=bt(e.min,e.max,t.origin),t.scale=Un(n)/Un(e),t.translate=bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=y6&&t.scale<=_6||isNaN(t.scale))&&(t.scale=1),(t.translate>=v6&&t.translate<=E6||isNaN(t.translate))&&(t.translate=0)}function ou(t,e,n,s){Qx(t.x,e.x,n.x,s?s.originX:void 0),Qx(t.y,e.y,n.y,s?s.originY:void 0)}function Wx(t,e,n){t.min=n.min+e.min,t.max=t.min+Un(e)}function T6(t,e,n){Wx(t.x,e.x,n.x),Wx(t.y,e.y,n.y)}function Jx(t,e,n){t.min=e.min-n.min,t.max=t.min+Un(e)}function _f(t,e,n){Jx(t.x,e.x,n.x),Jx(t.y,e.y,n.y)}function Zx(t,e,n,s,a){return t-=e,t=yf(t,1/n,s),a!==void 0&&(t=yf(t,1/a,s)),t}function A6(t,e=0,n=1,s=.5,a,l=t,c=t){if(fs.test(e)&&(e=parseFloat(e),e=bt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=bt(l.min,l.max,s);t===l&&(d-=e),t.min=Zx(t.min,e,n,d,a),t.max=Zx(t.max,e,n,d,a)}function ew(t,e,[n,s,a],l,c){A6(t,e[n],e[s],e[a],e.scale,l,c)}const S6=["x","scaleX","originX"],x6=["y","scaleY","originY"];function tw(t,e,n,s){ew(t.x,e,S6,n?n.x:void 0,s?s.x:void 0),ew(t.y,e,x6,n?n.y:void 0,s?s.y:void 0)}function nw(t){return t.translate===0&&t.scale===1}function f1(t){return nw(t.x)&&nw(t.y)}function iw(t,e){return t.min===e.min&&t.max===e.max}function w6(t,e){return iw(t.x,e.x)&&iw(t.y,e.y)}function sw(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function m1(t,e){return sw(t.x,e.x)&&sw(t.y,e.y)}function rw(t){return Un(t.x)/Un(t.y)}function aw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function xi(t){return[t("x"),t("y")]}function I6(t,e,n){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((a||l||c)&&(s=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:_,rotateX:E,rotateY:T,skewX:S,skewY:N}=n;g&&(s=`perspective(${g}px) ${s}`),_&&(s+=`rotate(${_}deg) `),E&&(s+=`rotateX(${E}deg) `),T&&(s+=`rotateY(${T}deg) `),S&&(s+=`skewX(${S}deg) `),N&&(s+=`skewY(${N}deg) `)}const d=t.x.scale*e.x,m=t.y.scale*e.y;return(d!==1||m!==1)&&(s+=`scale(${d}, ${m})`),s||"none"}const p1=["TopLeft","TopRight","BottomLeft","BottomRight"],R6=p1.length,ow=t=>typeof t=="string"?parseFloat(t):t,lw=t=>typeof t=="number"||ve.test(t);function N6(t,e,n,s,a,l){a?(t.opacity=bt(0,n.opacity??1,C6(s)),t.opacityExit=bt(e.opacity??1,0,O6(s))):l&&(t.opacity=bt(e.opacity??1,n.opacity??1,s));for(let c=0;c<R6;c++){const d=`border${p1[c]}Radius`;let m=cw(e,d),g=cw(n,d);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||lw(m)===lw(g)?(t[d]=Math.max(bt(ow(m),ow(g),s),0),(fs.test(g)||fs.test(m))&&(t[d]+="%")):t[d]=g}(e.rotate||n.rotate)&&(t.rotate=bt(e.rotate||0,n.rotate||0,s))}function cw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const C6=g1(0,.5,uC),O6=g1(.5,.95,Ri);function g1(t,e,n){return s=>s<t?0:s>e?1:n(bu(t,e,s))}function D6(t,e,n){const s=xn(t)?t:Cl(t);return s.start(gv("",s,e,n)),s.animation}function xu(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const M6=(t,e)=>t.depth-e.depth;class P6{constructor(){this.children=[],this.isDirty=!1}add(e){Z_(this.children,e),this.isDirty=!0}remove(e){ev(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(M6),this.isDirty=!1,this.children.forEach(e)}}function V6(t,e){const n=kn.now(),s=({timestamp:a})=>{const l=a-n;l>=e&&(ua(s),t(l-e))};return _t.setup(s,!0),()=>ua(s)}function zd(t){return xn(t)?t.get():t}class L6{constructor(){this.members=[]}add(e){Z_(this.members,e),e.scheduleRender()}remove(e){if(ev(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const a=s.options.layoutDependency,l=e.options.layoutDependency;a!==void 0&&l!==void 0&&a===l||(e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:d}=e.options;d===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Hd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Ag=["","X","Y","Z"],k6=1e3;let U6=0;function Sg(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function y1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=kC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",_t,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&y1(s)}function _1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(c={},d=e==null?void 0:e()){this.id=U6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(F6),this.nodes.forEach(q6),this.nodes.forEach(Y6),this.nodes.forEach(z6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new P6)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new iv),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const m=this.eventHandlers.get(c);m&&m.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=$C(c)&&!B3(c),this.instance=c;const{layoutId:d,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||d)&&(this.isLayoutDirty=!0),t){let _,E=0;const T=()=>this.root.updateBlockedByResize=!1;_t.read(()=>{E=window.innerWidth}),t(c,()=>{const S=window.innerWidth;S!==E&&(E=S,this.root.updateBlockedByResize=!0,_&&_(),_=V6(T,250),Hd.hasAnimatedSinceResize&&(Hd.hasAnimatedSinceResize=!1,this.nodes.forEach(dw)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeLayoutChanged:T,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||g.getDefaultTransition()||W6,{onLayoutAnimationStart:V,onLayoutAnimationComplete:C}=g.getProps(),G=!this.targetLayout||!m1(this.targetLayout,S),Z=!E&&T;if(this.options.layoutRoot||this.resumeFrom||Z||E&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const H={...pv(N,"layout"),onPlay:V,onComplete:C};(g.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H),this.setAnimationOrigin(_,Z)}else E||dw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ua(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K6),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&y1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const E=this.path[_];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:d,layout:m}=this.options;if(d===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(G6),this.nodes.forEach(j6),this.nodes.forEach(B6)):this.nodes.forEach(hw),this.clearAllSnapshots();const d=kn.now();hn.delta=ps(0,1e3/60,d-hn.timestamp),hn.timestamp=d,hn.isProcessing=!0,pg.update.process(hn),pg.preRender.process(hn),pg.render.process(hn),hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ev.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H6),this.sharedNodes.forEach($6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Un(this.snapshot.measuredBox.x)&&!Un(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const m=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:m,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!f1(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,_=g!==this.prevTransformTemplateValue;c&&this.instance&&(d||Wa(this.latestValues)||_)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let m=this.removeElementScroll(d);return c&&(m=this.removeTransform(m)),J6(m),{animationId:this.root.animationId,measuredBox:d,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return Qt();const d=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(Z6))){const{scroll:_}=this.root;_&&(yl(d.x,_.offset.x),yl(d.y,_.offset.y))}return d}removeElementScroll(c){var m;const d=Qt();if(ki(d,c),(m=this.scroll)!=null&&m.wasRoot)return d;for(let g=0;g<this.path.length;g++){const _=this.path[g],{scroll:E,options:T}=_;_!==this.root&&E&&T.layoutScroll&&(E.wasRoot&&ki(d,c),yl(d.x,E.offset.x),yl(d.y,E.offset.y))}return d}applyTransform(c,d=!1){const m=Qt();ki(m,c);for(let g=0;g<this.path.length;g++){const _=this.path[g];!d&&_.options.layoutScroll&&_.scroll&&_!==_.root&&_l(m,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),Wa(_.latestValues)&&_l(m,_.latestValues)}return Wa(this.latestValues)&&_l(m,this.latestValues),m}removeTransform(c){const d=Qt();ki(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Wa(g.latestValues))continue;Cy(g.latestValues)&&g.updateSnapshot();const _=Qt(),E=g.measurePageBox();ki(_,E),tw(d,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,_)}return Wa(this.latestValues)&&tw(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var S;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==d;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!this.layout||!(_||E))return;this.resolvedRelativeTargetAt=hn.timestamp;const T=this.getClosestProjectingParent();T&&this.linkedParentVersion!==T.layoutVersion&&!T.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(T&&T.layout?this.createRelativeTarget(T,this.layout.layoutBox,T.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),T6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ki(this.target,this.layout.layoutBox),t1(this.target,this.targetDelta)):ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?this.createRelativeTarget(T,this.target,T.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Cy(this.parent.latestValues)||e1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,m){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),_f(this.relativeTargetOrigin,d,m),ki(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let m=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(m=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===hn.timestamp&&(m=!1),m)return;const{layout:g,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||_))return;ki(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,T=this.treeScale.y;W3(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Qt());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xx(this.prevProjectionDelta.x,this.projectionDelta.x),Xx(this.prevProjectionDelta.y,this.projectionDelta.y)),ou(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==T||!aw(this.projectionDelta.x,this.prevProjectionDelta.x)||!aw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),c){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gl(),this.projectionDelta=gl(),this.projectionDeltaWithTransform=gl()}setAnimationOrigin(c,d=!1){const m=this.snapshot,g=m?m.latestValues:{},_={...this.latestValues},E=gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const T=Qt(),S=m?m.source:void 0,N=this.layout?this.layout.source:void 0,V=S!==N,C=this.getStack(),G=!C||C.members.length<=1,Z=!!(V&&!G&&this.options.crossfade===!0&&!this.path.some(Q6));this.animationProgress=0;let H;this.mixTargetDelta=X=>{const ce=X/1e3;fw(E.x,c.x,ce),fw(E.y,c.y,ce),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_f(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),X6(this.relativeTarget,this.relativeTargetOrigin,T,ce),H&&w6(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=Qt()),ki(H,this.relativeTarget)),V&&(this.animationValues=_,N6(_,g,this.latestValues,ce,Z,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ce},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var d,m,g;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(g=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||g.stop(),this.pendingAnimation&&(ua(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Hd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cl(0)),this.currentAnimation=D6(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:_=>{this.mixTargetDelta(_),c.onUpdate&&c.onUpdate(_)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:m,layout:g,latestValues:_}=c;if(!(!d||!m||!g)){if(this!==c&&this.layout&&g&&v1(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Qt();const E=Un(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+E;const T=Un(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+T}ki(d,m),_l(d,_),ou(this.projectionDeltaWithTransform,this.layoutCorrected,d,_)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new L6),this.sharedNodes.get(c).add(d);const g=d.options.initialPromotionConfig;d.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var d;const{layoutId:c}=this.options;return c?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:c}=this.options;return c?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:m}=c;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(d=!0),!d)return;const g={};m.z&&Sg("z",c,g,this.animationValues);for(let _=0;_<Ag.length;_++)Sg(`rotate${Ag[_]}`,c,g,this.animationValues),Sg(`skew${Ag[_]}`,c,g,this.animationValues);c.render();for(const _ in g)c.setStaticValue(_,g[_]),this.animationValues&&(this.animationValues[_]=g[_]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=zd(d==null?void 0:d.pointerEvents)||"",c.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=zd(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Wa(this.latestValues)&&(c.transform=m?m({},""):"none",this.hasProjected=!1);return}c.visibility="";const _=g.animationValues||g.latestValues;this.applyTransformsToTarget();let E=I6(this.projectionDeltaWithTransform,this.treeScale,_);m&&(E=m(_,E)),c.transform=E;const{x:T,y:S}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${S.origin*100}% 0`,g.animationValues?c.opacity=g===this?_.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:c.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const N in Dy){if(_[N]===void 0)continue;const{correct:V,applyTo:C,isCSSVariable:G}=Dy[N],Z=E==="none"?_[N]:V(_[N],g);if(C){const H=C.length;for(let X=0;X<H;X++)c[C[X]]=Z}else G?this.options.visualElement.renderState.vars[N]=Z:c[N]=Z}this.options.layoutId&&(c.pointerEvents=g===this?zd(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(uw),this.root.sharedNodes.clear()}}}function j6(t){t.updateLayout()}function B6(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:l}=t.options,c=e.source!==t.layout.source;l==="size"?xi(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],S=Un(T);T.min=s[E].min,T.max=T.min+S}):v1(l,e.layoutBox,s)&&xi(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],S=Un(s[E]);T.max=T.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+S)});const d=gl();ou(d,s,e.layoutBox);const m=gl();c?ou(m,t.applyTransform(a,!0),e.measuredBox):ou(m,s,e.layoutBox);const g=!f1(d);let _=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:T,layout:S}=E;if(T&&S){const N=Qt();_f(N,e.layoutBox,T.layoutBox);const V=Qt();_f(V,s,S.layoutBox),m1(N,V)||(_=!0),E.options.layoutRoot&&(t.relativeTarget=V,t.relativeTargetOrigin=N,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:m,layoutDelta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:_})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function F6(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function z6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function H6(t){t.clearSnapshot()}function uw(t){t.clearMeasurements()}function hw(t){t.isLayoutDirty=!1}function G6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function dw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function q6(t){t.resolveTargetDelta()}function Y6(t){t.calcProjection()}function K6(t){t.resetSkewAndRotation()}function $6(t){t.removeLeadSnapshot()}function fw(t,e,n){t.translate=bt(e.translate,0,n),t.scale=bt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mw(t,e,n,s){t.min=bt(e.min,n.min,s),t.max=bt(e.max,n.max,s)}function X6(t,e,n,s){mw(t.x,e.x,n.x,s),mw(t.y,e.y,n.y,s)}function Q6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const W6={duration:.45,ease:[.4,0,.1,1]},pw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),gw=pw("applewebkit/")&&!pw("chrome/")?Math.round:Ri;function yw(t){t.min=gw(t.min),t.max=gw(t.max)}function J6(t){yw(t.x),yw(t.y)}function v1(t,e,n){return t==="position"||t==="preserve-aspect"&&!b6(rw(e),rw(n),.2)}function Z6(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const e9=_1({attachResizeListener:(t,e)=>xu(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),xg={current:void 0},E1=_1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xg.current){const t=new e9({});t.mount(window),t.setOptions({layoutScroll:!0}),xg.current=t}return xg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wv=Q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function _w(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function t9(...t){return e=>{let n=!1;const s=t.map(a=>{const l=_w(a,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():_w(t[a],null)}}}}function n9(...t){return Q.useCallback(t9(...t),t)}class i9 extends Q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=Ry(s)&&s.offsetWidth||0,l=Ry(s)&&s.offsetHeight||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=a-c.width-c.left,c.bottom=l-c.height-c.top}return null}componentDidUpdate(){}render(){return this.props.children}}function s9({children:t,isPresent:e,anchorX:n,anchorY:s,root:a}){var E;const l=Q.useId(),c=Q.useRef(null),d=Q.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=Q.useContext(wv),g=((E=t.props)==null?void 0:E.ref)??(t==null?void 0:t.ref),_=n9(c,g);return Q.useInsertionEffect(()=>{const{width:T,height:S,top:N,left:V,right:C,bottom:G}=d.current;if(e||!c.current||!T||!S)return;const Z=n==="left"?`left: ${V}`:`right: ${C}`,H=s==="bottom"?`bottom: ${G}`:`top: ${N}`;c.current.dataset.motionPopId=l;const X=document.createElement("style");m&&(X.nonce=m);const ce=a??document.head;return ce.appendChild(X),X.sheet&&X.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${S}px !important;
            ${Z}px !important;
            ${H}px !important;
          }
        `),()=>{ce.contains(X)&&ce.removeChild(X)}},[e]),y.jsx(i9,{isPresent:e,childRef:c,sizeRef:d,children:Q.cloneElement(t,{ref:_})})}const r9=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:c,anchorX:d,anchorY:m,root:g})=>{const _=J_(a9),E=Q.useId();let T=!0,S=Q.useMemo(()=>(T=!1,{id:E,initial:e,isPresent:n,custom:a,onExitComplete:N=>{_.set(N,!0);for(const V of _.values())if(!V)return;s&&s()},register:N=>(_.set(N,!1),()=>_.delete(N))}),[n,_,s]);return l&&T&&(S={...S}),Q.useMemo(()=>{_.forEach((N,V)=>_.set(V,!1))},[n]),Q.useEffect(()=>{!n&&!_.size&&s&&s()},[n]),c==="popLayout"&&(t=y.jsx(s9,{isPresent:n,anchorX:d,anchorY:m,root:g,children:t})),y.jsx(qf.Provider,{value:S,children:t})};function a9(){return new Map}function b1(t=!0){const e=Q.useContext(qf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,l=Q.useId();Q.useEffect(()=>{if(t)return a(l)},[t]);const c=Q.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,c]:[!0]}const Id=t=>t.key||"";function vw(t){const e=[];return Q.Children.forEach(t,n=>{Q.isValidElement(n)&&e.push(n)}),e}const o9=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",anchorY:m="top",root:g})=>{const[_,E]=b1(c),T=Q.useMemo(()=>vw(t),[t]),S=c&&!_?[]:T.map(Id),N=Q.useRef(!0),V=Q.useRef(T),C=J_(()=>new Map),G=Q.useRef(new Set),[Z,H]=Q.useState(T),[X,ce]=Q.useState(T);ZN(()=>{N.current=!1,V.current=T;for(let I=0;I<X.length;I++){const R=Id(X[I]);S.includes(R)?(C.delete(R),G.current.delete(R)):C.get(R)!==!0&&C.set(R,!1)}},[X,S.length,S.join("-")]);const he=[];if(T!==Z){let I=[...T];for(let R=0;R<X.length;R++){const M=X[R],U=Id(M);S.includes(U)||(I.splice(R,0,M),he.push(M))}return l==="wait"&&he.length&&(I=he),ce(vw(I)),H(T),null}const{forceRender:O}=Q.useContext(W_);return y.jsx(y.Fragment,{children:X.map(I=>{const R=Id(I),M=c&&!_?!1:T===X||S.includes(R),U=()=>{if(G.current.has(R))return;if(G.current.add(R),C.has(R))C.set(R,!0);else return;let B=!0;C.forEach(D=>{D||(B=!1)}),B&&(O==null||O(),ce(V.current),c&&(E==null||E()),s&&s())};return y.jsx(r9,{isPresent:M,initial:!N.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:g,onExitComplete:M?void 0:U,anchorX:d,anchorY:m,children:I},R)})})},T1=Q.createContext({strict:!1}),Ew={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let bw=!1;function l9(){if(bw)return;const t={};for(const e in Ew)t[e]={isEnabled:n=>Ew[e].some(s=>!!n[s])};WC(t),bw=!0}function A1(){return l9(),K3()}function c9(t){const e=A1();for(const n in t)e[n]={...e[n],...t[n]};WC(e)}const u9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||u9.has(t)}let S1=t=>!vf(t);function h9(t){typeof t=="function"&&(S1=e=>e.startsWith("on")?!vf(e):t(e))}try{h9(require("@emotion/is-prop-valid").default)}catch{}function d9(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(S1(a)||n===!0&&vf(a)||!e&&!vf(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const $f=Q.createContext({});function f9(t,e){if(Kf(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Su(n)?n:void 0,animate:Su(s)?s:void 0}}return t.inherit!==!1?e:{}}function m9(t){const{initial:e,animate:n}=f9(t,Q.useContext($f));return Q.useMemo(()=>({initial:e,animate:n}),[Tw(e),Tw(n)])}function Tw(t){return Array.isArray(t)?t.join(" "):t}const Iv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x1(t,e,n){for(const s in e)!xn(e[s])&&!s1(s,n)&&(t[s]=e[s])}function p9({transformTemplate:t},e){return Q.useMemo(()=>{const n=Iv();return Sv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function g9(t,e){const n=t.style||{},s={};return x1(s,n,t),Object.assign(s,p9(t,e)),s}function y9(t,e){const n={},s=g9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const w1=()=>({...Iv(),attrs:{}});function _9(t,e,n,s){const a=Q.useMemo(()=>{const l=w1();return r1(l,e,o1(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};x1(l,t.style,t),a.style={...l,...a.style}}return a}const v9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rv(t){return typeof t!="string"||t.includes("-")?!1:!!(v9.indexOf(t)>-1||/[A-Z]/u.test(t))}function E9(t,e,n,{latestValues:s},a,l=!1,c){const m=(c??Rv(t)?_9:y9)(e,s,a,t),g=d9(e,typeof t=="string",l),_=t!==Q.Fragment?{...g,...m,ref:n}:{},{children:E}=e,T=Q.useMemo(()=>xn(E)?E.get():E,[E]);return Q.createElement(t,{..._,children:T})}function b9({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,a){return{latestValues:T9(n,s,a,t),renderState:e()}}function T9(t,e,n,s){const a={},l=s(t,{});for(const T in l)a[T]=zd(l[T]);let{initial:c,animate:d}=t;const m=Kf(t),g=QC(t);e&&g&&!m&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let _=n?n.initial===!1:!1;_=_||c===!1;const E=_?d:c;if(E&&typeof E!="boolean"&&!Yf(E)){const T=Array.isArray(E)?E:[E];for(let S=0;S<T.length;S++){const N=yv(t,T[S]);if(N){const{transitionEnd:V,transition:C,...G}=N;for(const Z in G){let H=G[Z];if(Array.isArray(H)){const X=_?H.length-1:0;H=H[X]}H!==null&&(a[Z]=H)}for(const Z in V)a[Z]=V[Z]}}}return a}const I1=t=>(e,n)=>{const s=Q.useContext($f),a=Q.useContext(qf),l=()=>b9(t,e,s,a);return n?l():J_(l)},A9=I1({scrapeMotionValuesFromProps:xv,createRenderState:Iv}),S9=I1({scrapeMotionValuesFromProps:l1,createRenderState:w1}),x9=Symbol.for("motionComponentSymbol");function w9(t,e,n){const s=Q.useRef(n);Q.useInsertionEffect(()=>{s.current=n});const a=Q.useRef(null);return Q.useCallback(l=>{var d;l&&((d=t.onMount)==null||d.call(t,l)),e&&(l?e.mount(l):e.unmount());const c=s.current;if(typeof c=="function")if(l){const m=c(l);typeof m=="function"&&(a.current=m)}else a.current?(a.current(),a.current=null):c(l);else c&&(c.current=l)},[e])}const R1=Q.createContext({});function Xc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function I9(t,e,n,s,a,l){var G,Z;const{visualElement:c}=Q.useContext($f),d=Q.useContext(T1),m=Q.useContext(qf),g=Q.useContext(wv).reducedMotion,_=Q.useRef(null),E=Q.useRef(!1);s=s||d.renderer,!_.current&&s&&(_.current=s(t,{visualState:e,parent:c,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:g,isSVG:l}),E.current&&_.current&&(_.current.manuallyAnimateOnMount=!0));const T=_.current,S=Q.useContext(R1);T&&!T.projection&&a&&(T.type==="html"||T.type==="svg")&&R9(_.current,n,a,S);const N=Q.useRef(!1);Q.useInsertionEffect(()=>{T&&N.current&&T.update(n,m)});const V=n[LC],C=Q.useRef(!!V&&!((G=window.MotionHandoffIsComplete)!=null&&G.call(window,V))&&((Z=window.MotionHasOptimisedAnimation)==null?void 0:Z.call(window,V)));return ZN(()=>{E.current=!0,T&&(N.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),C.current&&T.animationState&&T.animationState.animateChanges())}),Q.useEffect(()=>{T&&(!C.current&&T.animationState&&T.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var H;(H=window.MotionHandoffMarkAsComplete)==null||H.call(window,V)}),C.current=!1),T.enteringChildren=void 0)}),T}function R9(t,e,n,s){const{layoutId:a,layout:l,drag:c,dragConstraints:d,layoutScroll:m,layoutRoot:g,layoutCrossfade:_}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:N1(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||d&&Xc(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:_,layoutScroll:m,layoutRoot:g})}function N1(t){if(t)return t.options.allowProjection!==!1?t.projection:N1(t.parent)}function wg(t,{forwardMotionProps:e=!1,type:n}={},s,a){s&&c9(s);const l=n?n==="svg":Rv(t),c=l?S9:A9;function d(g,_){let E;const T={...Q.useContext(wv),...g,layoutId:N9(g)},{isStatic:S}=T,N=m9(g),V=c(g,S);if(!S&&JN){C9();const C=O9(T);E=C.MeasureLayout,N.visualElement=I9(t,V,T,a,C.ProjectionNode,l)}return y.jsxs($f.Provider,{value:N,children:[E&&N.visualElement?y.jsx(E,{visualElement:N.visualElement,...T}):null,E9(t,g,w9(V,N.visualElement,_),V,S,e,l)]})}d.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const m=Q.forwardRef(d);return m[x9]=t,m}function N9({layoutId:t}){const e=Q.useContext(W_).id;return e&&t!==void 0?e+"-"+t:t}function C9(t,e){Q.useContext(T1).strict}function O9(t){const e=A1(),{drag:n,layout:s}=e;if(!n&&!s)return{};const a={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(t)||s!=null&&s.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function D9(t,e){if(typeof Proxy>"u")return wg;const n=new Map,s=(l,c)=>wg(l,c,t,e),a=(l,c)=>s(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?s:(n.has(c)||n.set(c,wg(c,void 0,t,e)),n.get(c))})}const M9=(t,e)=>e.isSVG??Rv(t)?new u6(e):new s6(e,{allowProjection:t!==Q.Fragment});class P9 extends ya{constructor(e){super(e),e.animationState||(e.animationState=p6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Yf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let V9=0;class L9 extends ya{constructor(){super(...arguments),this.id=V9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const k9={animation:{Feature:P9},exit:{Feature:L9}};function Hu(t){return{point:{x:t.pageX,y:t.pageY}}}const U9=t=>e=>bv(e)&&t(e,Hu(e));function lu(t,e,n,s){return xu(t,e,U9(n),s)}const C1=({current:t})=>t?t.ownerDocument.defaultView:null,Aw=(t,e)=>Math.abs(t-e);function j9(t,e){const n=Aw(t.x,e.x),s=Aw(t.y,e.y);return Math.sqrt(n**2+s**2)}const Sw=new Set(["auto","scroll"]);class O1{constructor(e,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:d}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=S=>{this.handleScroll(S.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Rg(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,V=j9(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!V)return;const{point:C}=S,{timestamp:G}=hn;this.history.push({...C,timestamp:G});const{onStart:Z,onMove:H}=this.handlers;N||(Z&&Z(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,S)},this.handlePointerMove=(S,N)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Ig(N,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(S,N)=>{this.end();const{onEnd:V,onSessionEnd:C,resumeAnimation:G}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&G&&G(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Z=Rg(S.type==="pointercancel"?this.lastMoveEventInfo:Ig(N,this.transformPagePoint),this.history);this.startEvent&&V&&V(S,Z),C&&C(S,Z)},!bv(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=a||window;const m=Hu(e),g=Ig(m,this.transformPagePoint),{point:_}=g,{timestamp:E}=hn;this.history=[{..._,timestamp:E}];const{onSessionStart:T}=n;T&&T(e,Rg(g,this.history)),this.removeListeners=Bu(lu(this.contextWindow,"pointermove",this.handlePointerMove),lu(this.contextWindow,"pointerup",this.handlePointerUp),lu(this.contextWindow,"pointercancel",this.handlePointerUp)),d&&this.startScrollTracking(d)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(Sw.has(s.overflowX)||Sw.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,a=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:a.x-n.x,y:a.y-n.y};l.x===0&&l.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,a),_t.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ua(this.updatePoint)}}function Ig(t,e){return e?{point:e(t.point)}:t}function xw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rg({point:t},e){return{point:t,delta:xw(t,D1(e)),offset:xw(t,B9(e)),velocity:F9(e,.1)}}function B9(t){return t[0]}function D1(t){return t[t.length-1]}function F9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=D1(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>$s(e)));)n--;if(!s)return{x:0,y:0};const l=Ii(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function z9(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?bt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?bt(n,t,s.max):Math.min(t,n)),t}function ww(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function H9(t,{top:e,left:n,bottom:s,right:a}){return{x:ww(t.x,n,a),y:ww(t.y,e,s)}}function Iw(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function G9(t,e){return{x:Iw(t.x,e.x),y:Iw(t.y,e.y)}}function q9(t,e){let n=.5;const s=Un(t),a=Un(e);return a>s?n=bu(e.min,e.max-s,t.min):s>a&&(n=bu(t.min,t.max-a,e.min)),ps(0,1,n)}function Y9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const My=.35;function K9(t=My){return t===!1?t=0:t===!0&&(t=My),{x:Rw(t,"left","right"),y:Rw(t,"top","bottom")}}function Rw(t,e,n){return{min:Nw(t,e),max:Nw(t,n)}}function Nw(t,e){return typeof t=="number"?t:t[e]||0}const $9=new WeakMap;class X9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=E=>{n?(this.stopAnimation(),this.snapToCursor(Hu(E).point)):this.pauseAnimation()},c=(E,T)=>{this.stopAnimation();const{drag:S,dragPropagation:N,onDragStart:V}=this.getProps();if(S&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=V3(S),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xi(G=>{let Z=this.getAxisMotionValue(G).get()||0;if(fs.test(Z)){const{projection:H}=this.visualElement;if(H&&H.layout){const X=H.layout.layoutBox[G];X&&(Z=Un(X)*(parseFloat(Z)/100))}}this.originPoint[G]=Z}),V&&_t.postRender(()=>V(E,T)),xy(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},d=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T;const{dragPropagation:S,dragDirectionLock:N,onDirectionLock:V,onDrag:C}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:G}=T;if(N&&this.currentDirection===null){this.currentDirection=Q9(G),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",T.point,G),this.updateAxis("y",T.point,G),this.visualElement.render(),C&&C(E,T)},m=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T,this.stop(E,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>xi(E=>{var T;return this.getAnimationState(E)==="paused"&&((T=this.getAxisMotionValue(E).animation)==null?void 0:T.play())}),{dragSnapToOrigin:_}=this.getProps();this.panSession=new O1(e,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,distanceThreshold:s,contextWindow:C1(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,a=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!s)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&_t.postRender(()=>d(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!Rd(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=z9(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;e&&Xc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=H9(s.layoutBox,e):this.constraints=!1,this.elastic=K9(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&xi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Y9(s.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xc(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=J3(s,a.root,this.visualElement.getTransformPagePoint());let c=G9(a.layout.layoutBox,l);if(n){const d=n(X3(c));this.hasMutatedConstraints=!!d,d&&(c=ZC(d))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),m=this.constraints||{},g=xi(_=>{if(!Rd(_,n,this.currentDirection))return;let E=m&&m[_]||{};c&&(E={min:0,max:0});const T=a?200:1e6,S=a?40:1e7,N={type:"inertia",velocity:s?e[_]:0,bounceStiffness:T,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...E};return this.startAxisValueAnimation(_,N)});return Promise.all(g).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return xy(this.visualElement,e),s.start(gv(e,s,0,n,this.visualElement,!1))}stopAnimation(){xi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){xi(n=>{const{drag:s}=this.getProps();if(!Rd(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:d}=a.layout.layoutBox[n],m=l.get()||0;l.set(e[n]-bt(c,d,.5)+m)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Xc(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};xi(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const m=d.get();a[c]=q9({min:m,max:m},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),xi(c=>{if(!Rd(c,e,null))return;const d=this.getAxisMotionValue(c),{min:m,max:g}=this.constraints[c];d.set(bt(m,g,a[c]))})}addListeners(){if(!this.visualElement.current)return;$9.set(this.visualElement,this);const e=this.visualElement.current,n=lu(e,"pointerdown",m=>{const{drag:g,dragListener:_=!0}=this.getProps(),E=m.target,T=E!==e&&KC(E);g&&_&&!T&&this.start(m)}),s=()=>{const{dragConstraints:m}=this.getProps();Xc(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),_t.read(s);const c=xu(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(xi(_=>{const E=this.getAxisMotionValue(_);E&&(this.originPoint[_]+=m[_].translate,E.set(E.get()+m[_].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=My,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Rd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Q9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class W9 extends ya{constructor(e){super(e),this.removeGroupControls=Ri,this.removeListeners=Ri,this.controls=new X9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ri}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Cw=t=>(e,n)=>{t&&_t.postRender(()=>t(e,n))};class J9 extends ya{constructor(){super(...arguments),this.removePointerDownListener=Ri}onPointerDown(e){this.session=new O1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:C1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Cw(e),onStart:Cw(n),onMove:s,onEnd:(l,c)=>{delete this.session,a&&_t.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=lu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Ng=!1;class Z9 extends Q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&a&&s.register(l),Ng&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Hd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,e.layoutDependency!==n&&c.setOptions({...c.options,layoutDependency:n}),Ng=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||_t.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ev.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;Ng=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function M1(t){const[e,n]=b1(),s=Q.useContext(W_);return y.jsx(Z9,{...t,layoutGroup:s,switchLayoutGroup:Q.useContext(R1),isPresent:e,safeToRemove:n})}const eF={pan:{Feature:J9},drag:{Feature:W9,ProjectionNode:E1,MeasureLayout:M1}};function Ow(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=s[a];l&&_t.postRender(()=>l(e,Hu(e)))}class tF extends ya{mount(){const{current:e}=this.node;e&&(this.unmount=L3(e,(n,s)=>(Ow(this.node,s,"Start"),a=>Ow(this.node,a,"End"))))}unmount(){}}class nF extends ya{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bu(xu(this.node.current,"focus",()=>this.onFocus()),xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dw(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=s[a];l&&_t.postRender(()=>l(e,Hu(e)))}class iF extends ya{mount(){const{current:e}=this.node;e&&(this.unmount=j3(e,(n,s)=>(Dw(this.node,s,"Start"),(a,{success:l})=>Dw(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Py=new WeakMap,Cg=new WeakMap,sF=t=>{const e=Py.get(t.target);e&&e(t)},rF=t=>{t.forEach(sF)};function aF({root:t,...e}){const n=t||document;Cg.has(n)||Cg.set(n,{});const s=Cg.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(rF,{root:t,...e})),s[a]}function oF(t,e,n){const s=aF(e);return Py.set(t,n),s.observe(t),()=>{Py.delete(t),s.unobserve(t)}}const lF={some:0,all:1};class cF extends ya{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:lF[a]},d=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,l&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:_,onViewportLeave:E}=this.node.getProps(),T=g?_:E;T&&T(m)};return oF(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uF(e,n))&&this.startObserver()}unmount(){}}function uF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const hF={inView:{Feature:cF},tap:{Feature:iF},focus:{Feature:nF},hover:{Feature:tF}},dF={layout:{ProjectionNode:E1,MeasureLayout:M1}},fF={...k9,...hF,...eF,...dF},mF=D9(fF,M9),pF={initial:{opacity:0,y:20,filter:"blur(10px)"},in:{opacity:1,y:0,filter:"blur(0px)"},out:{opacity:0,y:-20,filter:"blur(10px)"}},gF={type:"tween",ease:"circOut",duration:.5},Bc=({children:t})=>y.jsx(mF.div,{initial:"initial",animate:"in",exit:"out",variants:pF,transition:gF,className:"w-full h-full",children:t}),yF=()=>typeof window<"u"?(window.location.hostname==="staff-bladebourbon.web.app","staff"):"home",_F=()=>{const[t,e]=Q.useState(yF),[n,s]=Q.useState(()=>!!(typeof window<"u"&&(new URLSearchParams(window.location.search).get("staff")||window.location.hostname.includes("staff")))),[a,l]=Q.useState("bg"),[c,d]=Q.useState({services:[],barbers:[],appointments:[]}),[m,g]=Q.useState(null),[_,E]=Q.useState(!1),[T,S]=Q.useState(null),[N,V]=Q.useState(null),[C,G]=Q.useState(""),[Z,H]=Q.useState("");Q.useEffect(()=>{(async()=>{try{const te=ay(jA,"nalby.jpg"),ye=ay(jA,"nalbyhero.jpg"),[Te,k]=await Promise.all([ry(te).catch(()=>""),ry(ye).catch(()=>"")]);G(Te),H(k)}catch(te){console.error("Failed to load hero images",te)}})()},[]);const X=Ys[a];Q.useEffect(()=>{const L=D4(Te=>{d(k=>({...k,services:Te}))}),te=M4(Te=>{d(k=>({...k,barbers:Te}))}),ye=P4(Te=>{d(k=>({...k,appointments:Te}))});return()=>{L(),te(),ye()}},[]),Q.useEffect(()=>{const L=qj(te=>{g(te)});return()=>L()},[]),Q.useEffect(()=>{(async()=>{const ye=new URLSearchParams(window.location.search).get("staff");if(!ye){s(!1);return}if(c.barbers.length!==0)try{const Te=await H4(ye);Te&&(V(Te),t!=="staff"&&e("staff"))}catch(Te){console.error("Staff auto-login failed:",Te)}finally{s(!1)}})()},[c.barbers,t]);const ce=L=>{if((L==="admin"||L==="staff")&&!m){S(L),E(!0);return}e(L)},he=()=>{E(!1),T&&(e(T),S(null))};Q.useEffect(()=>{const L=new URLSearchParams(window.location.search);t==="home"?L.delete("view"):L.set("view",t);const te=L.toString(),ye=te?`?${te}`:window.location.pathname;window.history.replaceState(null,"",ye)},[t]);const O=async L=>{try{await F4(L),d(te=>({...te,appointments:[...te.appointments,L]})),t!=="staff"&&e("home")}catch(te){console.error("Booking error:",te)}},I=async L=>{try{await U4(L),d(te=>({...te,barbers:[...te.barbers,L]}))}catch(te){console.error("Add barber error:",te)}},R=async L=>{try{await j4(L),d(te=>({...te,barbers:te.barbers.map(ye=>ye.id===L.id?L:ye)}))}catch(te){console.error("Update barber error:",te)}},M=async L=>{try{await B4(L),d(te=>({...te,barbers:te.barbers.filter(ye=>ye.id!==L)}))}catch(te){console.error("Delete barber error:",te)}},U=async L=>{try{await V4(L),d(te=>({...te,services:[...te.services,L]}))}catch(te){console.error("Add service error:",te)}},B=async L=>{try{await L4(L),d(te=>({...te,services:te.services.map(ye=>ye.id===L.id?L:ye)}))}catch(te){console.error("Update service error:",te)}},D=async L=>{try{await z4({id:L,status:"cancelled"}),d(te=>({...te,appointments:te.appointments.map(ye=>ye.id===L?{...ye,status:"cancelled"}:ye)}))}catch(te){console.error("Cancel appointment error:",te)}},Ye=L=>{e("booking")},Je=()=>{l(L=>L==="en"?"bg":"en")},ee=()=>{V(null),e("home")};return n?y.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 animate-pulse-slow"}),y.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gold-500/5 rounded-full blur-3xl animate-pulse"}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[y.jsxs("div",{className:"relative mb-12",children:[y.jsx("div",{className:"absolute -inset-6 border-2 border-gold-500/20 border-t-gold-500 rounded-full w-32 h-32 animate-spin-slow"}),y.jsx("div",{className:"absolute -inset-2 border border-gold-500/10 rounded-full w-24 h-24"}),y.jsx("div",{className:"w-20 h-20 flex items-center justify-center bg-dark-900 rounded-full border border-gray-800 shadow-2xl relative z-20",children:y.jsx("i",{className:"fa-solid fa-scissors text-3xl text-gold-500"})})]}),y.jsxs("h1",{className:"font-display font-bold text-3xl tracking-[0.4em] text-white mb-2 animate-fade-in-up",children:["BLADE ",y.jsx("span",{className:"text-gold-500",children:"&"})," BOURBON"]}),y.jsx("p",{className:"text-gold-500/60 text-xs uppercase tracking-widest animate-pulse mt-4",children:"Accessing Secure Portal"}),y.jsxs("div",{className:"mt-8 flex gap-1",children:[y.jsx("div",{className:"w-2 h-2 bg-gold-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),y.jsx("div",{className:"w-2 h-2 bg-gold-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),y.jsx("div",{className:"w-2 h-2 bg-gold-500 rounded-full animate-bounce"})]})]})]}):t==="staff"?!m&&!N?(e("home"),null):y.jsx(X4,{state:c,onBook:O,onDeleteAppointment:D,onReturnHome:ee,lang:a,authenticatedBarber:N}):y.jsxs("div",{className:"min-h-screen bg-dark-900 font-body text-gray-200 flex flex-col",children:[_&&y.jsx(Yj,{onLoginSuccess:he,onCancel:()=>{E(!1),S(null)}}),y.jsx("nav",{className:"fixed top-0 w-full bg-dark-900/90 backdrop-blur-md border-b border-white/10 z-40",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex justify-between items-center",children:[y.jsx("img",{src:"/images/nalby-logo.png",alt:"Nalby Style",className:"h-16 w-auto"}),y.jsxs("div",{className:"hidden md:flex gap-8 items-center",children:[y.jsx("button",{onClick:()=>ce("home"),className:`text-sm tracking-wider uppercase hover:text-gold-400 transition ${t==="home"?"text-gold-500":"text-gray-300"}`,children:X.nav.home}),y.jsx("button",{onClick:()=>ce("services"),className:`text-sm tracking-wider uppercase hover:text-gold-400 transition ${t==="services"?"text-gold-500":"text-gray-300"}`,children:X.nav.services}),y.jsx("button",{onClick:()=>ce("barbers"),className:`text-sm tracking-wider uppercase hover:text-gold-400 transition ${t==="barbers"?"text-gold-500":"text-gray-300"}`,children:X.nav.barbers}),y.jsx("button",{onClick:()=>ce("booking"),className:`text-sm tracking-wider uppercase hover:text-gold-400 transition ${t==="booking"?"text-gold-500":"text-gray-300"}`,children:X.nav.bookShort}),y.jsx("button",{onClick:()=>ce("admin"),className:`text-sm tracking-wider uppercase hover:text-gold-400 transition ${t==="admin"?"text-gold-500":"text-gray-300"}`,children:X.nav.admin}),y.jsxs("button",{onClick:Je,className:"flex items-center gap-1 border border-gold-500/30 rounded px-2 py-1 text-xs text-gold-500 font-bold hover:bg-gold-500 hover:text-black transition",children:[y.jsx("i",{className:"fa-solid fa-globe"})," ",a.toUpperCase()]})]}),y.jsxs("div",{className:"md:hidden flex gap-4 items-center",children:[y.jsx("button",{onClick:Je,className:"flex items-center gap-1 border border-gold-500/30 rounded px-2 py-1 text-xs text-gold-500 font-bold",children:a.toUpperCase()}),m&&y.jsx("button",{onClick:()=>{Gj(),e("home")},className:"text-xs text-red-500 hover:text-red-400 uppercase tracking-widest ml-4",children:"Logout"}),y.jsx("button",{onClick:()=>e("booking"),className:"bg-gold-500 text-black px-4 py-2 rounded font-bold",children:X.nav.bookShort})]})]})}),y.jsx("main",{className:"flex-1 pt-20",children:y.jsxs(o9,{mode:"wait",children:[t==="home"&&y.jsx(Bc,{children:y.jsxs("div",{className:"animate-fade-in",children:[y.jsxs("div",{className:"relative h-[80vh] flex items-end justify-center overflow-hidden pb-16",style:{"--bg-mobile":`url(${C||"/images/nalby-logo.png"})`,"--bg-desktop":`url(${Z||C||"/images/nalby-logo.png"})`},children:[y.jsx("div",{className:"absolute inset-0 bg-[image:var(--bg-mobile)] md:bg-[image:var(--bg-desktop)] bg-cover bg-center transition-all duration-500",children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 via-transparent to-transparent"})}),y.jsx("div",{className:"relative z-10 text-center px-4 w-full",children:y.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[y.jsx("button",{onClick:()=>e("booking"),className:"bg-gold-500 hover:bg-gold-400 text-dark-900 text-lg font-bold px-8 py-4 rounded transition-all transform hover:-translate-y-1 shadow-[0_10px_20px_-10px_rgba(212,175,55,0.5)]",children:X.hero.ctaBook}),y.jsx("button",{onClick:()=>e("services"),className:"bg-black/50 backdrop-blur-md border border-white/30 hover:border-gold-500 hover:text-gold-500 text-white text-lg px-8 py-4 rounded transition-colors",children:X.hero.ctaServices})]})})]}),y.jsx("div",{className:"bg-dark-800 py-16 border-y border-white/5",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[y.jsxs("div",{className:"p-6 cursor-pointer hover:bg-dark-700/50 rounded-lg transition",onClick:()=>e("barbers"),children:[y.jsx("i",{className:"fa-solid fa-scissors text-4xl text-gold-500 mb-4"}),y.jsx("h3",{className:"text-xl font-display text-white mb-2",children:X.features.barbersTitle}),y.jsx("p",{className:"text-gray-400",children:X.features.barbersDesc})]}),y.jsxs("div",{className:"p-6 border-l border-r border-white/5",children:[y.jsx("i",{className:"fa-solid fa-wine-glass text-4xl text-gold-500 mb-4"}),y.jsx("h3",{className:"text-xl font-display text-white mb-2",children:X.features.premiumTitle}),y.jsx("p",{className:"text-gray-400",children:X.features.premiumDesc})]}),y.jsxs("div",{className:"p-6",children:[y.jsx("i",{className:"fa-solid fa-wand-magic-sparkles text-4xl text-gold-500 mb-4"}),y.jsx("h3",{className:"text-xl font-display text-white mb-2",children:X.features.aiTitle}),y.jsx("p",{className:"text-gray-400",children:X.features.aiDesc})]})]})}),y.jsxs("div",{className:"bg-dark-900 py-24 relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 opacity-5 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),y.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("h2",{className:"text-gold-500 text-sm uppercase tracking-[0.3em] mb-4",children:X.contact.title}),y.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg",children:X.contact.subtitle})]}),y.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-stretch",children:[y.jsxs("div",{className:"space-y-8 flex flex-col justify-center",children:[y.jsx("div",{className:"bg-dark-800 p-8 rounded-2xl border border-gray-800 hover:border-gold-500/30 transition duration-300 group",children:y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-gold-500/10 flex items-center justify-center text-gold-500 group-hover:bg-gold-500 group-hover:text-black transition-colors",children:y.jsx("i",{className:"fa-solid fa-location-dot text-xl"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-display font-bold text-white text-lg mb-2",children:X.contact.addressTitle}),y.jsx("p",{className:"text-gray-400 leading-relaxed",children:X.contact.address})]})]})}),y.jsx("div",{className:"bg-dark-800 p-8 rounded-2xl border border-gray-800 hover:border-gold-500/30 transition duration-300 group",children:y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-gold-500/10 flex items-center justify-center text-gold-500 group-hover:bg-gold-500 group-hover:text-black transition-colors",children:y.jsx("i",{className:"fa-solid fa-phone text-xl"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-display font-bold text-white text-lg mb-2",children:X.contact.phoneTitle}),y.jsx("p",{className:"text-gray-400",children:X.contact.phone}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:X.contact.email})]})]})}),y.jsx("div",{className:"bg-dark-800 p-8 rounded-2xl border border-gray-800 hover:border-gold-500/30 transition duration-300 group",children:y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-gold-500/10 flex items-center justify-center text-gold-500 group-hover:bg-gold-500 group-hover:text-black transition-colors",children:y.jsx("i",{className:"fa-solid fa-clock text-xl"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-display font-bold text-white text-lg mb-2",children:X.contact.hoursTitle}),y.jsx("p",{className:"text-gray-400",children:X.contact.hours}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:X.contact.sunday})]})]})})]}),y.jsxs("div",{className:"h-[500px] w-full rounded-2xl overflow-hidden border border-gray-800 shadow-2xl relative group",children:[y.jsx("iframe",{src:"https://maps.google.com/maps?q=ul.+Zhitnitsa+21,+Sofia&t=&z=15&ie=UTF8&iwloc=&output=embed",className:"w-full h-full grayscale group-hover:grayscale-0 transition duration-700",frameBorder:"0",allowFullScreen:!0,loading:"lazy"}),y.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:y.jsxs("a",{href:"https://maps.google.com/maps?q=ul.+Zhitnitsa+21,+Sofia",target:"_blank",rel:"noreferrer",className:"block w-full bg-black/80 backdrop-blur-md text-white text-center py-4 rounded-xl border border-white/10 hover:bg-gold-500 hover:text-black hover:border-gold-500 transition-all font-bold uppercase tracking-wider",children:[X.contact.getDirections," ",y.jsx("i",{className:"fa-solid fa-arrow-right ml-2"})]})})]})]})]})]})]})},"home"),t==="booking"&&y.jsx(Bc,{children:y.jsx("div",{className:"py-12",children:y.jsx($j,{state:c,onBook:O,lang:a})})},"booking"),t==="services"&&y.jsx(Bc,{children:y.jsx("div",{className:"py-12",children:y.jsx(K4,{services:c.services,onBookNow:()=>e("booking"),lang:a})})},"services"),t==="barbers"&&y.jsx(Bc,{children:y.jsx("div",{className:"py-12",children:y.jsx($4,{barbers:c.barbers,onBookBarber:Ye,lang:a})})},"barbers"),t==="admin"&&y.jsx(Bc,{children:y.jsx("div",{className:"py-12",children:y.jsx(Y4,{state:c,onAddBarber:I,onUpdateBarber:R,onDeleteBarber:M,onAddService:U,onDeleteAppointment:D,onUpdateService:B,lang:a})})},"admin")]})}),!1,y.jsx("footer",{className:"bg-black text-gray-500 py-12 border-t border-gray-800",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsx("div",{className:"font-display font-bold text-xl text-white tracking-widest",children:"NALBY STYLE"}),y.jsx("div",{className:"text-sm",children:" 2024 Nalby Style. All rights reserved."}),y.jsxs("div",{className:"flex gap-4 items-center",children:[y.jsx("a",{href:"#",className:"hover:text-gold-500 transition",children:y.jsx("i",{className:"fa-brands fa-instagram"})}),y.jsx("a",{href:"#",className:"hover:text-gold-500 transition",children:y.jsx("i",{className:"fa-brands fa-facebook"})}),y.jsx("button",{onClick:()=>ce("staff"),className:"text-xs text-gray-700 hover:text-gold-500 uppercase tracking-widest ml-4",children:X.nav.staffLogin})]})]})})]})},P1=document.getElementById("root");if(!P1)throw new Error("Could not find root element to mount to");const vF=vD.createRoot(P1);vF.render(y.jsx(hD.StrictMode,{children:y.jsx(_F,{})}));
